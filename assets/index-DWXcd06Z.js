(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qo={exports:{}},el={},Go={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=Symbol.for("react.element"),ud=Symbol.for("react.portal"),cd=Symbol.for("react.fragment"),dd=Symbol.for("react.strict_mode"),pd=Symbol.for("react.profiler"),md=Symbol.for("react.provider"),fd=Symbol.for("react.context"),xd=Symbol.for("react.forward_ref"),hd=Symbol.for("react.suspense"),gd=Symbol.for("react.memo"),yd=Symbol.for("react.lazy"),Ii=Symbol.iterator;function vd(e){return e===null||typeof e!="object"?null:(e=Ii&&e[Ii]||e["@@iterator"],typeof e=="function"?e:null)}var Jo={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ko=Object.assign,Yo={};function nr(e,t,n){this.props=e,this.context=t,this.refs=Yo,this.updater=n||Jo}nr.prototype.isReactComponent={};nr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xo(){}Xo.prototype=nr.prototype;function Oa(e,t,n){this.props=e,this.context=t,this.refs=Yo,this.updater=n||Jo}var Ma=Oa.prototype=new Xo;Ma.constructor=Oa;Ko(Ma,nr.prototype);Ma.isPureReactComponent=!0;var Ai=Array.isArray,Zo=Object.prototype.hasOwnProperty,Va={current:null},eu={key:!0,ref:!0,__self:!0,__source:!0};function tu(e,t,n){var s,l={},a=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Zo.call(t,s)&&!eu.hasOwnProperty(s)&&(l[s]=t[s]);var o=arguments.length-2;if(o===1)l.children=n;else if(1<o){for(var u=Array(o),p=0;p<o;p++)u[p]=arguments[p+2];l.children=u}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)l[s]===void 0&&(l[s]=o[s]);return{$$typeof:qr,type:e,key:a,ref:i,props:l,_owner:Va.current}}function jd(e,t){return{$$typeof:qr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ba(e){return typeof e=="object"&&e!==null&&e.$$typeof===qr}function Nd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ri=/\/+/g;function vl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nd(""+e.key):t.toString(36)}function ys(e,t,n,s,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case qr:case ud:i=!0}}if(i)return i=e,l=l(i),e=s===""?"."+vl(i,0):s,Ai(l)?(n="",e!=null&&(n=e.replace(Ri,"$&/")+"/"),ys(l,t,n,"",function(p){return p})):l!=null&&(Ba(l)&&(l=jd(l,n+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Ri,"$&/")+"/")+e)),t.push(l)),1;if(i=0,s=s===""?".":s+":",Ai(e))for(var o=0;o<e.length;o++){a=e[o];var u=s+vl(a,o);i+=ys(a,t,n,u,l)}else if(u=vd(e),typeof u=="function")for(e=u.call(e),o=0;!(a=e.next()).done;)a=a.value,u=s+vl(a,o++),i+=ys(a,t,n,u,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Xr(e,t,n){if(e==null)return e;var s=[],l=0;return ys(e,s,"","",function(a){return t.call(n,a,l++)}),s}function bd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ke={current:null},vs={transition:null},wd={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:vs,ReactCurrentOwner:Va};function nu(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:Xr,forEach:function(e,t,n){Xr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xr(e,function(){t++}),t},toArray:function(e){return Xr(e,function(t){return t})||[]},only:function(e){if(!Ba(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=nr;Y.Fragment=cd;Y.Profiler=pd;Y.PureComponent=Oa;Y.StrictMode=dd;Y.Suspense=hd;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wd;Y.act=nu;Y.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Ko({},e.props),l=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=Va.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)Zo.call(t,u)&&!eu.hasOwnProperty(u)&&(s[u]=t[u]===void 0&&o!==void 0?o[u]:t[u])}var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){o=Array(u);for(var p=0;p<u;p++)o[p]=arguments[p+2];s.children=o}return{$$typeof:qr,type:e.type,key:l,ref:a,props:s,_owner:i}};Y.createContext=function(e){return e={$$typeof:fd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:md,_context:e},e.Consumer=e};Y.createElement=tu;Y.createFactory=function(e){var t=tu.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:xd,render:e}};Y.isValidElement=Ba;Y.lazy=function(e){return{$$typeof:yd,_payload:{_status:-1,_result:e},_init:bd}};Y.memo=function(e,t){return{$$typeof:gd,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=vs.transition;vs.transition={};try{e()}finally{vs.transition=t}};Y.unstable_act=nu;Y.useCallback=function(e,t){return Ke.current.useCallback(e,t)};Y.useContext=function(e){return Ke.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return Ke.current.useDeferredValue(e)};Y.useEffect=function(e,t){return Ke.current.useEffect(e,t)};Y.useId=function(){return Ke.current.useId()};Y.useImperativeHandle=function(e,t,n){return Ke.current.useImperativeHandle(e,t,n)};Y.useInsertionEffect=function(e,t){return Ke.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return Ke.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return Ke.current.useMemo(e,t)};Y.useReducer=function(e,t,n){return Ke.current.useReducer(e,t,n)};Y.useRef=function(e){return Ke.current.useRef(e)};Y.useState=function(e){return Ke.current.useState(e)};Y.useSyncExternalStore=function(e,t,n){return Ke.current.useSyncExternalStore(e,t,n)};Y.useTransition=function(){return Ke.current.useTransition()};Y.version="18.3.1";Go.exports=Y;var j=Go.exports;const Ha=od(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=j,_d=Symbol.for("react.element"),kd=Symbol.for("react.fragment"),Cd=Object.prototype.hasOwnProperty,Ed=Sd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Td={key:!0,ref:!0,__self:!0,__source:!0};function ru(e,t,n){var s,l={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)Cd.call(t,s)&&!Td.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)l[s]===void 0&&(l[s]=t[s]);return{$$typeof:_d,type:e,key:a,ref:i,props:l,_owner:Ed.current}}el.Fragment=kd;el.jsx=ru;el.jsxs=ru;Qo.exports=el;var r=Qo.exports,ql={},su={exports:{}},ot={},lu={exports:{}},au={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,B){var H=z.length;z.push(B);e:for(;0<H;){var X=H-1>>>1,re=z[X];if(0<l(re,B))z[X]=B,z[H]=re,H=X;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var B=z[0],H=z.pop();if(H!==B){z[0]=H;e:for(var X=0,re=z.length,ve=re>>>1;X<ve;){var ce=2*(X+1)-1,ze=z[ce],We=ce+1,rt=z[We];if(0>l(ze,H))We<re&&0>l(rt,ze)?(z[X]=rt,z[We]=H,X=We):(z[X]=ze,z[ce]=H,X=ce);else if(We<re&&0>l(rt,H))z[X]=rt,z[We]=H,X=We;else break e}}return B}function l(z,B){var H=z.sortIndex-B.sortIndex;return H!==0?H:z.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var u=[],p=[],v=1,y=null,m=3,_=!1,h=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(z){for(var B=n(p);B!==null;){if(B.callback===null)s(p);else if(B.startTime<=z)s(p),B.sortIndex=B.expirationTime,t(u,B);else break;B=n(p)}}function S(z){if(w=!1,f(z),!h)if(n(u)!==null)h=!0,ye(b);else{var B=n(p);B!==null&&Oe(S,B.startTime-z)}}function b(z,B){h=!1,w&&(w=!1,d(I),I=-1),_=!0;var H=m;try{for(f(B),y=n(u);y!==null&&(!(y.expirationTime>B)||z&&!V());){var X=y.callback;if(typeof X=="function"){y.callback=null,m=y.priorityLevel;var re=X(y.expirationTime<=B);B=e.unstable_now(),typeof re=="function"?y.callback=re:y===n(u)&&s(u),f(B)}else s(u);y=n(u)}if(y!==null)var ve=!0;else{var ce=n(p);ce!==null&&Oe(S,ce.startTime-B),ve=!1}return ve}finally{y=null,m=H,_=!1}}var E=!1,T=null,I=-1,k=5,P=-1;function V(){return!(e.unstable_now()-P<k)}function J(){if(T!==null){var z=e.unstable_now();P=z;var B=!0;try{B=T(!0,z)}finally{B?ee():(E=!1,T=null)}}else E=!1}var ee;if(typeof c=="function")ee=function(){c(J)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Ee=le.port2;le.port1.onmessage=J,ee=function(){Ee.postMessage(null)}}else ee=function(){C(J,0)};function ye(z){T=z,E||(E=!0,ee())}function Oe(z,B){I=C(function(){z(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){h||_||(h=!0,ye(b))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var H=m;m=B;try{return z()}finally{m=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,B){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var H=m;m=z;try{return B()}finally{m=H}},e.unstable_scheduleCallback=function(z,B,H){var X=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,z){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=H+re,z={id:v++,callback:B,priorityLevel:z,startTime:H,expirationTime:re,sortIndex:-1},H>X?(z.sortIndex=H,t(p,z),n(u)===null&&z===n(p)&&(w?(d(I),I=-1):w=!0,Oe(S,H-X))):(z.sortIndex=re,t(u,z),h||_||(h=!0,ye(b))),z},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(z){var B=m;return function(){var H=m;m=B;try{return z.apply(this,arguments)}finally{m=H}}}})(au);lu.exports=au;var Pd=lu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd=j,it=Pd;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iu=new Set,Tr={};function Cn(e,t){Jn(e,t),Jn(e+"Capture",t)}function Jn(e,t){for(Tr[e]=t,e=0;e<t.length;e++)iu.add(t[e])}var Mt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ql=Object.prototype.hasOwnProperty,Ld=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fi={},Oi={};function zd(e){return Ql.call(Oi,e)?!0:Ql.call(Fi,e)?!1:Ld.test(e)?Oi[e]=!0:(Fi[e]=!0,!1)}function $d(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Id(e,t,n,s){if(t===null||typeof t>"u"||$d(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ye(e,t,n,s,l,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fe[e]=new Ye(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fe[t]=new Ye(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fe[e]=new Ye(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fe[e]=new Ye(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fe[e]=new Ye(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fe[e]=new Ye(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fe[e]=new Ye(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fe[e]=new Ye(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fe[e]=new Ye(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ua=/[\-:]([a-z])/g;function Wa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ua,Wa);Fe[t]=new Ye(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ua,Wa);Fe[t]=new Ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ua,Wa);Fe[t]=new Ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fe[e]=new Ye(e,1,!1,e.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fe[e]=new Ye(e,1,!1,e.toLowerCase(),null,!0,!0)});function qa(e,t,n,s){var l=Fe.hasOwnProperty(t)?Fe[t]:null;(l!==null?l.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Id(t,n,l,s)&&(n=null),s||l===null?zd(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,s=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Ut=Dd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zr=Symbol.for("react.element"),Dn=Symbol.for("react.portal"),Ln=Symbol.for("react.fragment"),Qa=Symbol.for("react.strict_mode"),Gl=Symbol.for("react.profiler"),ou=Symbol.for("react.provider"),uu=Symbol.for("react.context"),Ga=Symbol.for("react.forward_ref"),Jl=Symbol.for("react.suspense"),Kl=Symbol.for("react.suspense_list"),Ja=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),cu=Symbol.for("react.offscreen"),Mi=Symbol.iterator;function ar(e){return e===null||typeof e!="object"?null:(e=Mi&&e[Mi]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Object.assign,jl;function hr(e){if(jl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jl=t&&t[1]||""}return`
`+jl+e}var Nl=!1;function bl(e,t){if(!e||Nl)return"";Nl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var s=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){s=p}e.call(t.prototype)}else{try{throw Error()}catch(p){s=p}e()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var l=p.stack.split(`
`),a=s.stack.split(`
`),i=l.length-1,o=a.length-1;1<=i&&0<=o&&l[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==a[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==a[o]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=o);break}}}finally{Nl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hr(e):""}function Ad(e){switch(e.tag){case 5:return hr(e.type);case 16:return hr("Lazy");case 13:return hr("Suspense");case 19:return hr("SuspenseList");case 0:case 2:case 15:return e=bl(e.type,!1),e;case 11:return e=bl(e.type.render,!1),e;case 1:return e=bl(e.type,!0),e;default:return""}}function Yl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ln:return"Fragment";case Dn:return"Portal";case Gl:return"Profiler";case Qa:return"StrictMode";case Jl:return"Suspense";case Kl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uu:return(e.displayName||"Context")+".Consumer";case ou:return(e._context.displayName||"Context")+".Provider";case Ga:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ja:return t=e.displayName||null,t!==null?t:Yl(e.type)||"Memo";case qt:t=e._payload,e=e._init;try{return Yl(e(t))}catch{}}return null}function Rd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yl(t);case 8:return t===Qa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function on(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function du(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fd(e){var t=du(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){s=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function es(e){e._valueTracker||(e._valueTracker=Fd(e))}function pu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=du(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Ps(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xl(e,t){var n=t.checked;return xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vi(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=on(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mu(e,t){t=t.checked,t!=null&&qa(e,"checked",t,!1)}function Zl(e,t){mu(e,t);var n=on(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ea(e,t.type,n):t.hasOwnProperty("defaultValue")&&ea(e,t.type,on(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bi(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ea(e,t,n){(t!=="number"||Ps(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gr=Array.isArray;function Hn(e,t,n,s){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&s&&(e[n].defaultSelected=!0)}else{for(n=""+on(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ta(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hi(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(gr(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:on(n)}}function fu(e,t){var n=on(t.value),s=on(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Ui(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function na(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ts,hu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ts=ts||document.createElement("div"),ts.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ts.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Od=["Webkit","ms","Moz","O"];Object.keys(jr).forEach(function(e){Od.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jr[t]=jr[e]})});function gu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jr.hasOwnProperty(e)&&jr[e]?(""+t).trim():t+"px"}function yu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,l=gu(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,l):e[n]=l}}var Md=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ra(e,t){if(t){if(Md[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function sa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var la=null;function Ka(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var aa=null,Un=null,Wn=null;function Wi(e){if(e=Jr(e)){if(typeof aa!="function")throw Error(L(280));var t=e.stateNode;t&&(t=ll(t),aa(e.stateNode,e.type,t))}}function vu(e){Un?Wn?Wn.push(e):Wn=[e]:Un=e}function ju(){if(Un){var e=Un,t=Wn;if(Wn=Un=null,Wi(e),t)for(e=0;e<t.length;e++)Wi(t[e])}}function Nu(e,t){return e(t)}function bu(){}var wl=!1;function wu(e,t,n){if(wl)return e(t,n);wl=!0;try{return Nu(e,t,n)}finally{wl=!1,(Un!==null||Wn!==null)&&(bu(),ju())}}function Dr(e,t){var n=e.stateNode;if(n===null)return null;var s=ll(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var ia=!1;if(Mt)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){ia=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{ia=!1}function Vd(e,t,n,s,l,a,i,o,u){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(v){this.onError(v)}}var Nr=!1,Ds=null,Ls=!1,oa=null,Bd={onError:function(e){Nr=!0,Ds=e}};function Hd(e,t,n,s,l,a,i,o,u){Nr=!1,Ds=null,Vd.apply(Bd,arguments)}function Ud(e,t,n,s,l,a,i,o,u){if(Hd.apply(this,arguments),Nr){if(Nr){var p=Ds;Nr=!1,Ds=null}else throw Error(L(198));Ls||(Ls=!0,oa=p)}}function En(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Su(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qi(e){if(En(e)!==e)throw Error(L(188))}function Wd(e){var t=e.alternate;if(!t){if(t=En(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,s=t;;){var l=n.return;if(l===null)break;var a=l.alternate;if(a===null){if(s=l.return,s!==null){n=s;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===n)return qi(l),e;if(a===s)return qi(l),t;a=a.sibling}throw Error(L(188))}if(n.return!==s.return)n=l,s=a;else{for(var i=!1,o=l.child;o;){if(o===n){i=!0,n=l,s=a;break}if(o===s){i=!0,s=l,n=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===n){i=!0,n=a,s=l;break}if(o===s){i=!0,s=a,n=l;break}o=o.sibling}if(!i)throw Error(L(189))}}if(n.alternate!==s)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function _u(e){return e=Wd(e),e!==null?ku(e):null}function ku(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ku(e);if(t!==null)return t;e=e.sibling}return null}var Cu=it.unstable_scheduleCallback,Qi=it.unstable_cancelCallback,qd=it.unstable_shouldYield,Qd=it.unstable_requestPaint,Ne=it.unstable_now,Gd=it.unstable_getCurrentPriorityLevel,Ya=it.unstable_ImmediatePriority,Eu=it.unstable_UserBlockingPriority,zs=it.unstable_NormalPriority,Jd=it.unstable_LowPriority,Tu=it.unstable_IdlePriority,tl=null,zt=null;function Kd(e){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(tl,e,void 0,(e.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:Zd,Yd=Math.log,Xd=Math.LN2;function Zd(e){return e>>>=0,e===0?32:31-(Yd(e)/Xd|0)|0}var ns=64,rs=4194304;function yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $s(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,l=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var o=i&~l;o!==0?s=yr(o):(a&=i,a!==0&&(s=yr(a)))}else i=n&~l,i!==0?s=yr(i):a!==0&&(s=yr(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&l)&&(l=s&-s,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-St(t),l=1<<n,s|=e[n],t&=~l;return s}function ep(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tp(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-St(a),o=1<<i,u=l[i];u===-1?(!(o&n)||o&s)&&(l[i]=ep(o,t)):u<=t&&(e.expiredLanes|=o),a&=~o}}function ua(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pu(){var e=ns;return ns<<=1,!(ns&4194240)&&(ns=64),e}function Sl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-St(t),e[t]=n}function np(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-St(n),a=1<<l;t[l]=0,s[l]=-1,e[l]=-1,n&=~a}}function Xa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-St(n),l=1<<s;l&t|e[s]&t&&(e[s]|=t),n&=~l}}var se=0;function Du(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lu,Za,zu,$u,Iu,ca=!1,ss=[],Zt=null,en=null,tn=null,Lr=new Map,zr=new Map,Gt=[],rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gi(e,t){switch(e){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":en=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":Lr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function or(e,t,n,s,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[l]},t!==null&&(t=Jr(t),t!==null&&Za(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function sp(e,t,n,s,l){switch(t){case"focusin":return Zt=or(Zt,e,t,n,s,l),!0;case"dragenter":return en=or(en,e,t,n,s,l),!0;case"mouseover":return tn=or(tn,e,t,n,s,l),!0;case"pointerover":var a=l.pointerId;return Lr.set(a,or(Lr.get(a)||null,e,t,n,s,l)),!0;case"gotpointercapture":return a=l.pointerId,zr.set(a,or(zr.get(a)||null,e,t,n,s,l)),!0}return!1}function Au(e){var t=gn(e.target);if(t!==null){var n=En(t);if(n!==null){if(t=n.tag,t===13){if(t=Su(n),t!==null){e.blockedOn=t,Iu(e.priority,function(){zu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function js(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=da(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);la=s,n.target.dispatchEvent(s),la=null}else return t=Jr(n),t!==null&&Za(t),e.blockedOn=n,!1;t.shift()}return!0}function Ji(e,t,n){js(e)&&n.delete(t)}function lp(){ca=!1,Zt!==null&&js(Zt)&&(Zt=null),en!==null&&js(en)&&(en=null),tn!==null&&js(tn)&&(tn=null),Lr.forEach(Ji),zr.forEach(Ji)}function ur(e,t){e.blockedOn===t&&(e.blockedOn=null,ca||(ca=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,lp)))}function $r(e){function t(l){return ur(l,e)}if(0<ss.length){ur(ss[0],e);for(var n=1;n<ss.length;n++){var s=ss[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Zt!==null&&ur(Zt,e),en!==null&&ur(en,e),tn!==null&&ur(tn,e),Lr.forEach(t),zr.forEach(t),n=0;n<Gt.length;n++)s=Gt[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Gt.length&&(n=Gt[0],n.blockedOn===null);)Au(n),n.blockedOn===null&&Gt.shift()}var qn=Ut.ReactCurrentBatchConfig,Is=!0;function ap(e,t,n,s){var l=se,a=qn.transition;qn.transition=null;try{se=1,ei(e,t,n,s)}finally{se=l,qn.transition=a}}function ip(e,t,n,s){var l=se,a=qn.transition;qn.transition=null;try{se=4,ei(e,t,n,s)}finally{se=l,qn.transition=a}}function ei(e,t,n,s){if(Is){var l=da(e,t,n,s);if(l===null)$l(e,t,s,As,n),Gi(e,s);else if(sp(l,e,t,n,s))s.stopPropagation();else if(Gi(e,s),t&4&&-1<rp.indexOf(e)){for(;l!==null;){var a=Jr(l);if(a!==null&&Lu(a),a=da(e,t,n,s),a===null&&$l(e,t,s,As,n),a===l)break;l=a}l!==null&&s.stopPropagation()}else $l(e,t,s,null,n)}}var As=null;function da(e,t,n,s){if(As=null,e=Ka(s),e=gn(e),e!==null)if(t=En(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Su(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return As=e,null}function Ru(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gd()){case Ya:return 1;case Eu:return 4;case zs:case Jd:return 16;case Tu:return 536870912;default:return 16}default:return 16}}var Kt=null,ti=null,Ns=null;function Fu(){if(Ns)return Ns;var e,t=ti,n=t.length,s,l="value"in Kt?Kt.value:Kt.textContent,a=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===l[a-s];s++);return Ns=l.slice(e,1<s?1-s:void 0)}function bs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ls(){return!0}function Ki(){return!1}function ut(e){function t(n,s,l,a,i){this._reactName=n,this._targetInst=l,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ls:Ki,this.isPropagationStopped=Ki,this}return xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),t}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ni=ut(rr),Gr=xe({},rr,{view:0,detail:0}),op=ut(Gr),_l,kl,cr,nl=xe({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ri,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cr&&(cr&&e.type==="mousemove"?(_l=e.screenX-cr.screenX,kl=e.screenY-cr.screenY):kl=_l=0,cr=e),_l)},movementY:function(e){return"movementY"in e?e.movementY:kl}}),Yi=ut(nl),up=xe({},nl,{dataTransfer:0}),cp=ut(up),dp=xe({},Gr,{relatedTarget:0}),Cl=ut(dp),pp=xe({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),mp=ut(pp),fp=xe({},rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xp=ut(fp),hp=xe({},rr,{data:0}),Xi=ut(hp),gp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vp[e])?!!t[e]:!1}function ri(){return jp}var Np=xe({},Gr,{key:function(e){if(e.key){var t=gp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ri,charCode:function(e){return e.type==="keypress"?bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bp=ut(Np),wp=xe({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zi=ut(wp),Sp=xe({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ri}),_p=ut(Sp),kp=xe({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cp=ut(kp),Ep=xe({},nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tp=ut(Ep),Pp=[9,13,27,32],si=Mt&&"CompositionEvent"in window,br=null;Mt&&"documentMode"in document&&(br=document.documentMode);var Dp=Mt&&"TextEvent"in window&&!br,Ou=Mt&&(!si||br&&8<br&&11>=br),eo=" ",to=!1;function Mu(e,t){switch(e){case"keyup":return Pp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zn=!1;function Lp(e,t){switch(e){case"compositionend":return Vu(t);case"keypress":return t.which!==32?null:(to=!0,eo);case"textInput":return e=t.data,e===eo&&to?null:e;default:return null}}function zp(e,t){if(zn)return e==="compositionend"||!si&&Mu(e,t)?(e=Fu(),Ns=ti=Kt=null,zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ou&&t.locale!=="ko"?null:t.data;default:return null}}var $p={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function no(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$p[e.type]:t==="textarea"}function Bu(e,t,n,s){vu(s),t=Rs(t,"onChange"),0<t.length&&(n=new ni("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var wr=null,Ir=null;function Ip(e){Zu(e,0)}function rl(e){var t=An(e);if(pu(t))return e}function Ap(e,t){if(e==="change")return t}var Hu=!1;if(Mt){var El;if(Mt){var Tl="oninput"in document;if(!Tl){var ro=document.createElement("div");ro.setAttribute("oninput","return;"),Tl=typeof ro.oninput=="function"}El=Tl}else El=!1;Hu=El&&(!document.documentMode||9<document.documentMode)}function so(){wr&&(wr.detachEvent("onpropertychange",Uu),Ir=wr=null)}function Uu(e){if(e.propertyName==="value"&&rl(Ir)){var t=[];Bu(t,Ir,e,Ka(e)),wu(Ip,t)}}function Rp(e,t,n){e==="focusin"?(so(),wr=t,Ir=n,wr.attachEvent("onpropertychange",Uu)):e==="focusout"&&so()}function Fp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rl(Ir)}function Op(e,t){if(e==="click")return rl(t)}function Mp(e,t){if(e==="input"||e==="change")return rl(t)}function Vp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:Vp;function Ar(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var l=n[s];if(!Ql.call(t,l)||!kt(e[l],t[l]))return!1}return!0}function lo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ao(e,t){var n=lo(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lo(n)}}function Wu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qu(){for(var e=window,t=Ps();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ps(e.document)}return t}function li(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Bp(e){var t=qu(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Wu(n.ownerDocument.documentElement,n)){if(s!==null&&li(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,a=Math.min(s.start,l);s=s.end===void 0?a:Math.min(s.end,l),!e.extend&&a>s&&(l=s,s=a,a=l),l=ao(n,a);var i=ao(n,s);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hp=Mt&&"documentMode"in document&&11>=document.documentMode,$n=null,pa=null,Sr=null,ma=!1;function io(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ma||$n==null||$n!==Ps(s)||(s=$n,"selectionStart"in s&&li(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Sr&&Ar(Sr,s)||(Sr=s,s=Rs(pa,"onSelect"),0<s.length&&(t=new ni("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=$n)))}function as(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var In={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionend:as("Transition","TransitionEnd")},Pl={},Qu={};Mt&&(Qu=document.createElement("div").style,"AnimationEvent"in window||(delete In.animationend.animation,delete In.animationiteration.animation,delete In.animationstart.animation),"TransitionEvent"in window||delete In.transitionend.transition);function sl(e){if(Pl[e])return Pl[e];if(!In[e])return e;var t=In[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Qu)return Pl[e]=t[n];return e}var Gu=sl("animationend"),Ju=sl("animationiteration"),Ku=sl("animationstart"),Yu=sl("transitionend"),Xu=new Map,oo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(e,t){Xu.set(e,t),Cn(t,[e])}for(var Dl=0;Dl<oo.length;Dl++){var Ll=oo[Dl],Up=Ll.toLowerCase(),Wp=Ll[0].toUpperCase()+Ll.slice(1);cn(Up,"on"+Wp)}cn(Gu,"onAnimationEnd");cn(Ju,"onAnimationIteration");cn(Ku,"onAnimationStart");cn("dblclick","onDoubleClick");cn("focusin","onFocus");cn("focusout","onBlur");cn(Yu,"onTransitionEnd");Jn("onMouseEnter",["mouseout","mouseover"]);Jn("onMouseLeave",["mouseout","mouseover"]);Jn("onPointerEnter",["pointerout","pointerover"]);Jn("onPointerLeave",["pointerout","pointerover"]);Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qp=new Set("cancel close invalid load scroll toggle".split(" ").concat(vr));function uo(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Ud(s,t,void 0,e),e.currentTarget=null}function Zu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],l=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],u=o.instance,p=o.currentTarget;if(o=o.listener,u!==a&&l.isPropagationStopped())break e;uo(l,o,p),a=u}else for(i=0;i<s.length;i++){if(o=s[i],u=o.instance,p=o.currentTarget,o=o.listener,u!==a&&l.isPropagationStopped())break e;uo(l,o,p),a=u}}}if(Ls)throw e=oa,Ls=!1,oa=null,e}function oe(e,t){var n=t[ya];n===void 0&&(n=t[ya]=new Set);var s=e+"__bubble";n.has(s)||(ec(t,e,2,!1),n.add(s))}function zl(e,t,n){var s=0;t&&(s|=4),ec(n,e,s,t)}var is="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){if(!e[is]){e[is]=!0,iu.forEach(function(n){n!=="selectionchange"&&(qp.has(n)||zl(n,!1,e),zl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[is]||(t[is]=!0,zl("selectionchange",!1,t))}}function ec(e,t,n,s){switch(Ru(t)){case 1:var l=ap;break;case 4:l=ip;break;default:l=ei}n=l.bind(null,t,n,e),l=void 0,!ia||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function $l(e,t,n,s,l){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var o=s.stateNode.containerInfo;if(o===l||o.nodeType===8&&o.parentNode===l)break;if(i===4)for(i=s.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;i=i.return}for(;o!==null;){if(i=gn(o),i===null)return;if(u=i.tag,u===5||u===6){s=a=i;continue e}o=o.parentNode}}s=s.return}wu(function(){var p=a,v=Ka(n),y=[];e:{var m=Xu.get(e);if(m!==void 0){var _=ni,h=e;switch(e){case"keypress":if(bs(n)===0)break e;case"keydown":case"keyup":_=bp;break;case"focusin":h="focus",_=Cl;break;case"focusout":h="blur",_=Cl;break;case"beforeblur":case"afterblur":_=Cl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Yi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=cp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=_p;break;case Gu:case Ju:case Ku:_=mp;break;case Yu:_=Cp;break;case"scroll":_=op;break;case"wheel":_=Tp;break;case"copy":case"cut":case"paste":_=xp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Zi}var w=(t&4)!==0,C=!w&&e==="scroll",d=w?m!==null?m+"Capture":null:m;w=[];for(var c=p,f;c!==null;){f=c;var S=f.stateNode;if(f.tag===5&&S!==null&&(f=S,d!==null&&(S=Dr(c,d),S!=null&&w.push(Fr(c,S,f)))),C)break;c=c.return}0<w.length&&(m=new _(m,h,null,n,v),y.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==la&&(h=n.relatedTarget||n.fromElement)&&(gn(h)||h[Vt]))break e;if((_||m)&&(m=v.window===v?v:(m=v.ownerDocument)?m.defaultView||m.parentWindow:window,_?(h=n.relatedTarget||n.toElement,_=p,h=h?gn(h):null,h!==null&&(C=En(h),h!==C||h.tag!==5&&h.tag!==6)&&(h=null)):(_=null,h=p),_!==h)){if(w=Yi,S="onMouseLeave",d="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(w=Zi,S="onPointerLeave",d="onPointerEnter",c="pointer"),C=_==null?m:An(_),f=h==null?m:An(h),m=new w(S,c+"leave",_,n,v),m.target=C,m.relatedTarget=f,S=null,gn(v)===p&&(w=new w(d,c+"enter",h,n,v),w.target=f,w.relatedTarget=C,S=w),C=S,_&&h)t:{for(w=_,d=h,c=0,f=w;f;f=Pn(f))c++;for(f=0,S=d;S;S=Pn(S))f++;for(;0<c-f;)w=Pn(w),c--;for(;0<f-c;)d=Pn(d),f--;for(;c--;){if(w===d||d!==null&&w===d.alternate)break t;w=Pn(w),d=Pn(d)}w=null}else w=null;_!==null&&co(y,m,_,w,!1),h!==null&&C!==null&&co(y,C,h,w,!0)}}e:{if(m=p?An(p):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var b=Ap;else if(no(m))if(Hu)b=Mp;else{b=Fp;var E=Rp}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(b=Op);if(b&&(b=b(e,p))){Bu(y,b,n,v);break e}E&&E(e,m,p),e==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&ea(m,"number",m.value)}switch(E=p?An(p):window,e){case"focusin":(no(E)||E.contentEditable==="true")&&($n=E,pa=p,Sr=null);break;case"focusout":Sr=pa=$n=null;break;case"mousedown":ma=!0;break;case"contextmenu":case"mouseup":case"dragend":ma=!1,io(y,n,v);break;case"selectionchange":if(Hp)break;case"keydown":case"keyup":io(y,n,v)}var T;if(si)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else zn?Mu(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Ou&&n.locale!=="ko"&&(zn||I!=="onCompositionStart"?I==="onCompositionEnd"&&zn&&(T=Fu()):(Kt=v,ti="value"in Kt?Kt.value:Kt.textContent,zn=!0)),E=Rs(p,I),0<E.length&&(I=new Xi(I,e,null,n,v),y.push({event:I,listeners:E}),T?I.data=T:(T=Vu(n),T!==null&&(I.data=T)))),(T=Dp?Lp(e,n):zp(e,n))&&(p=Rs(p,"onBeforeInput"),0<p.length&&(v=new Xi("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:p}),v.data=T))}Zu(y,t)})}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Rs(e,t){for(var n=t+"Capture",s=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=Dr(e,n),a!=null&&s.unshift(Fr(e,a,l)),a=Dr(e,t),a!=null&&s.push(Fr(e,a,l))),e=e.return}return s}function Pn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function co(e,t,n,s,l){for(var a=t._reactName,i=[];n!==null&&n!==s;){var o=n,u=o.alternate,p=o.stateNode;if(u!==null&&u===s)break;o.tag===5&&p!==null&&(o=p,l?(u=Dr(n,a),u!=null&&i.unshift(Fr(n,u,o))):l||(u=Dr(n,a),u!=null&&i.push(Fr(n,u,o)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Qp=/\r\n?/g,Gp=/\u0000|\uFFFD/g;function po(e){return(typeof e=="string"?e:""+e).replace(Qp,`
`).replace(Gp,"")}function os(e,t,n){if(t=po(t),po(e)!==t&&n)throw Error(L(425))}function Fs(){}var fa=null,xa=null;function ha(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ga=typeof setTimeout=="function"?setTimeout:void 0,Jp=typeof clearTimeout=="function"?clearTimeout:void 0,mo=typeof Promise=="function"?Promise:void 0,Kp=typeof queueMicrotask=="function"?queueMicrotask:typeof mo<"u"?function(e){return mo.resolve(null).then(e).catch(Yp)}:ga;function Yp(e){setTimeout(function(){throw e})}function Il(e,t){var n=t,s=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(s===0){e.removeChild(l),$r(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=l}while(n);$r(t)}function nn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fo(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var sr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+sr,Or="__reactProps$"+sr,Vt="__reactContainer$"+sr,ya="__reactEvents$"+sr,Xp="__reactListeners$"+sr,Zp="__reactHandles$"+sr;function gn(e){var t=e[Lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vt]||n[Lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=fo(e);e!==null;){if(n=e[Lt])return n;e=fo(e)}return t}e=n,n=e.parentNode}return null}function Jr(e){return e=e[Lt]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function An(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function ll(e){return e[Or]||null}var va=[],Rn=-1;function dn(e){return{current:e}}function ue(e){0>Rn||(e.current=va[Rn],va[Rn]=null,Rn--)}function ie(e,t){Rn++,va[Rn]=e.current,e.current=t}var un={},Ue=dn(un),et=dn(!1),bn=un;function Kn(e,t){var n=e.type.contextTypes;if(!n)return un;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in n)l[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function tt(e){return e=e.childContextTypes,e!=null}function Os(){ue(et),ue(Ue)}function xo(e,t,n){if(Ue.current!==un)throw Error(L(168));ie(Ue,t),ie(et,n)}function tc(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(L(108,Rd(e)||"Unknown",l));return xe({},n,s)}function Ms(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||un,bn=Ue.current,ie(Ue,e),ie(et,et.current),!0}function ho(e,t,n){var s=e.stateNode;if(!s)throw Error(L(169));n?(e=tc(e,t,bn),s.__reactInternalMemoizedMergedChildContext=e,ue(et),ue(Ue),ie(Ue,e)):ue(et),ie(et,n)}var At=null,al=!1,Al=!1;function nc(e){At===null?At=[e]:At.push(e)}function em(e){al=!0,nc(e)}function pn(){if(!Al&&At!==null){Al=!0;var e=0,t=se;try{var n=At;for(se=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}At=null,al=!1}catch(l){throw At!==null&&(At=At.slice(e+1)),Cu(Ya,pn),l}finally{se=t,Al=!1}}return null}var Fn=[],On=0,Vs=null,Bs=0,pt=[],mt=0,wn=null,Rt=1,Ft="";function xn(e,t){Fn[On++]=Bs,Fn[On++]=Vs,Vs=e,Bs=t}function rc(e,t,n){pt[mt++]=Rt,pt[mt++]=Ft,pt[mt++]=wn,wn=e;var s=Rt;e=Ft;var l=32-St(s)-1;s&=~(1<<l),n+=1;var a=32-St(t)+l;if(30<a){var i=l-l%5;a=(s&(1<<i)-1).toString(32),s>>=i,l-=i,Rt=1<<32-St(t)+l|n<<l|s,Ft=a+e}else Rt=1<<a|n<<l|s,Ft=e}function ai(e){e.return!==null&&(xn(e,1),rc(e,1,0))}function ii(e){for(;e===Vs;)Vs=Fn[--On],Fn[On]=null,Bs=Fn[--On],Fn[On]=null;for(;e===wn;)wn=pt[--mt],pt[mt]=null,Ft=pt[--mt],pt[mt]=null,Rt=pt[--mt],pt[mt]=null}var at=null,lt=null,pe=!1,wt=null;function sc(e,t){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function go(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,lt=nn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=wn!==null?{id:Rt,overflow:Ft}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,at=e,lt=null,!0):!1;default:return!1}}function ja(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Na(e){if(pe){var t=lt;if(t){var n=t;if(!go(e,t)){if(ja(e))throw Error(L(418));t=nn(n.nextSibling);var s=at;t&&go(e,t)?sc(s,n):(e.flags=e.flags&-4097|2,pe=!1,at=e)}}else{if(ja(e))throw Error(L(418));e.flags=e.flags&-4097|2,pe=!1,at=e}}}function yo(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function us(e){if(e!==at)return!1;if(!pe)return yo(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ha(e.type,e.memoizedProps)),t&&(t=lt)){if(ja(e))throw lc(),Error(L(418));for(;t;)sc(e,t),t=nn(t.nextSibling)}if(yo(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){lt=nn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}lt=null}}else lt=at?nn(e.stateNode.nextSibling):null;return!0}function lc(){for(var e=lt;e;)e=nn(e.nextSibling)}function Yn(){lt=at=null,pe=!1}function oi(e){wt===null?wt=[e]:wt.push(e)}var tm=Ut.ReactCurrentBatchConfig;function dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var s=n.stateNode}if(!s)throw Error(L(147,e));var l=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var o=l.refs;i===null?delete o[a]:o[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function cs(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vo(e){var t=e._init;return t(e._payload)}function ac(e){function t(d,c){if(e){var f=d.deletions;f===null?(d.deletions=[c],d.flags|=16):f.push(c)}}function n(d,c){if(!e)return null;for(;c!==null;)t(d,c),c=c.sibling;return null}function s(d,c){for(d=new Map;c!==null;)c.key!==null?d.set(c.key,c):d.set(c.index,c),c=c.sibling;return d}function l(d,c){return d=an(d,c),d.index=0,d.sibling=null,d}function a(d,c,f){return d.index=f,e?(f=d.alternate,f!==null?(f=f.index,f<c?(d.flags|=2,c):f):(d.flags|=2,c)):(d.flags|=1048576,c)}function i(d){return e&&d.alternate===null&&(d.flags|=2),d}function o(d,c,f,S){return c===null||c.tag!==6?(c=Hl(f,d.mode,S),c.return=d,c):(c=l(c,f),c.return=d,c)}function u(d,c,f,S){var b=f.type;return b===Ln?v(d,c,f.props.children,S,f.key):c!==null&&(c.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===qt&&vo(b)===c.type)?(S=l(c,f.props),S.ref=dr(d,c,f),S.return=d,S):(S=Ts(f.type,f.key,f.props,null,d.mode,S),S.ref=dr(d,c,f),S.return=d,S)}function p(d,c,f,S){return c===null||c.tag!==4||c.stateNode.containerInfo!==f.containerInfo||c.stateNode.implementation!==f.implementation?(c=Ul(f,d.mode,S),c.return=d,c):(c=l(c,f.children||[]),c.return=d,c)}function v(d,c,f,S,b){return c===null||c.tag!==7?(c=Nn(f,d.mode,S,b),c.return=d,c):(c=l(c,f),c.return=d,c)}function y(d,c,f){if(typeof c=="string"&&c!==""||typeof c=="number")return c=Hl(""+c,d.mode,f),c.return=d,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Zr:return f=Ts(c.type,c.key,c.props,null,d.mode,f),f.ref=dr(d,null,c),f.return=d,f;case Dn:return c=Ul(c,d.mode,f),c.return=d,c;case qt:var S=c._init;return y(d,S(c._payload),f)}if(gr(c)||ar(c))return c=Nn(c,d.mode,f,null),c.return=d,c;cs(d,c)}return null}function m(d,c,f,S){var b=c!==null?c.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return b!==null?null:o(d,c,""+f,S);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Zr:return f.key===b?u(d,c,f,S):null;case Dn:return f.key===b?p(d,c,f,S):null;case qt:return b=f._init,m(d,c,b(f._payload),S)}if(gr(f)||ar(f))return b!==null?null:v(d,c,f,S,null);cs(d,f)}return null}function _(d,c,f,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return d=d.get(f)||null,o(c,d,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zr:return d=d.get(S.key===null?f:S.key)||null,u(c,d,S,b);case Dn:return d=d.get(S.key===null?f:S.key)||null,p(c,d,S,b);case qt:var E=S._init;return _(d,c,f,E(S._payload),b)}if(gr(S)||ar(S))return d=d.get(f)||null,v(c,d,S,b,null);cs(c,S)}return null}function h(d,c,f,S){for(var b=null,E=null,T=c,I=c=0,k=null;T!==null&&I<f.length;I++){T.index>I?(k=T,T=null):k=T.sibling;var P=m(d,T,f[I],S);if(P===null){T===null&&(T=k);break}e&&T&&P.alternate===null&&t(d,T),c=a(P,c,I),E===null?b=P:E.sibling=P,E=P,T=k}if(I===f.length)return n(d,T),pe&&xn(d,I),b;if(T===null){for(;I<f.length;I++)T=y(d,f[I],S),T!==null&&(c=a(T,c,I),E===null?b=T:E.sibling=T,E=T);return pe&&xn(d,I),b}for(T=s(d,T);I<f.length;I++)k=_(T,d,I,f[I],S),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?I:k.key),c=a(k,c,I),E===null?b=k:E.sibling=k,E=k);return e&&T.forEach(function(V){return t(d,V)}),pe&&xn(d,I),b}function w(d,c,f,S){var b=ar(f);if(typeof b!="function")throw Error(L(150));if(f=b.call(f),f==null)throw Error(L(151));for(var E=b=null,T=c,I=c=0,k=null,P=f.next();T!==null&&!P.done;I++,P=f.next()){T.index>I?(k=T,T=null):k=T.sibling;var V=m(d,T,P.value,S);if(V===null){T===null&&(T=k);break}e&&T&&V.alternate===null&&t(d,T),c=a(V,c,I),E===null?b=V:E.sibling=V,E=V,T=k}if(P.done)return n(d,T),pe&&xn(d,I),b;if(T===null){for(;!P.done;I++,P=f.next())P=y(d,P.value,S),P!==null&&(c=a(P,c,I),E===null?b=P:E.sibling=P,E=P);return pe&&xn(d,I),b}for(T=s(d,T);!P.done;I++,P=f.next())P=_(T,d,I,P.value,S),P!==null&&(e&&P.alternate!==null&&T.delete(P.key===null?I:P.key),c=a(P,c,I),E===null?b=P:E.sibling=P,E=P);return e&&T.forEach(function(J){return t(d,J)}),pe&&xn(d,I),b}function C(d,c,f,S){if(typeof f=="object"&&f!==null&&f.type===Ln&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Zr:e:{for(var b=f.key,E=c;E!==null;){if(E.key===b){if(b=f.type,b===Ln){if(E.tag===7){n(d,E.sibling),c=l(E,f.props.children),c.return=d,d=c;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===qt&&vo(b)===E.type){n(d,E.sibling),c=l(E,f.props),c.ref=dr(d,E,f),c.return=d,d=c;break e}n(d,E);break}else t(d,E);E=E.sibling}f.type===Ln?(c=Nn(f.props.children,d.mode,S,f.key),c.return=d,d=c):(S=Ts(f.type,f.key,f.props,null,d.mode,S),S.ref=dr(d,c,f),S.return=d,d=S)}return i(d);case Dn:e:{for(E=f.key;c!==null;){if(c.key===E)if(c.tag===4&&c.stateNode.containerInfo===f.containerInfo&&c.stateNode.implementation===f.implementation){n(d,c.sibling),c=l(c,f.children||[]),c.return=d,d=c;break e}else{n(d,c);break}else t(d,c);c=c.sibling}c=Ul(f,d.mode,S),c.return=d,d=c}return i(d);case qt:return E=f._init,C(d,c,E(f._payload),S)}if(gr(f))return h(d,c,f,S);if(ar(f))return w(d,c,f,S);cs(d,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,c!==null&&c.tag===6?(n(d,c.sibling),c=l(c,f),c.return=d,d=c):(n(d,c),c=Hl(f,d.mode,S),c.return=d,d=c),i(d)):n(d,c)}return C}var Xn=ac(!0),ic=ac(!1),Hs=dn(null),Us=null,Mn=null,ui=null;function ci(){ui=Mn=Us=null}function di(e){var t=Hs.current;ue(Hs),e._currentValue=t}function ba(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Qn(e,t){Us=e,ui=Mn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ze=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(ui!==e)if(e={context:e,memoizedValue:t,next:null},Mn===null){if(Us===null)throw Error(L(308));Mn=e,Us.dependencies={lanes:0,firstContext:e}}else Mn=Mn.next=e;return t}var yn=null;function pi(e){yn===null?yn=[e]:yn.push(e)}function oc(e,t,n,s){var l=t.interleaved;return l===null?(n.next=n,pi(t)):(n.next=l.next,l.next=n),t.interleaved=n,Bt(e,s)}function Bt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Qt=!1;function mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ot(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ne&2){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,Bt(e,n)}return l=s.interleaved,l===null?(t.next=t,pi(s)):(t.next=l.next,l.next=t),s.interleaved=t,Bt(e,n)}function ws(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Xa(e,n)}}function jo(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var l=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?l=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?l=a=t:a=a.next=t}else l=a=t;n={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,s){var l=e.updateQueue;Qt=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,o=l.shared.pending;if(o!==null){l.shared.pending=null;var u=o,p=u.next;u.next=null,i===null?a=p:i.next=p,i=u;var v=e.alternate;v!==null&&(v=v.updateQueue,o=v.lastBaseUpdate,o!==i&&(o===null?v.firstBaseUpdate=p:o.next=p,v.lastBaseUpdate=u))}if(a!==null){var y=l.baseState;i=0,v=p=u=null,o=a;do{var m=o.lane,_=o.eventTime;if((s&m)===m){v!==null&&(v=v.next={eventTime:_,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,w=o;switch(m=t,_=n,w.tag){case 1:if(h=w.payload,typeof h=="function"){y=h.call(_,y,m);break e}y=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=w.payload,m=typeof h=="function"?h.call(_,y,m):h,m==null)break e;y=xe({},y,m);break e;case 2:Qt=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=l.effects,m===null?l.effects=[o]:m.push(o))}else _={eventTime:_,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},v===null?(p=v=_,u=y):v=v.next=_,i|=m;if(o=o.next,o===null){if(o=l.shared.pending,o===null)break;m=o,o=m.next,m.next=null,l.lastBaseUpdate=m,l.shared.pending=null}}while(!0);if(v===null&&(u=y),l.baseState=u,l.firstBaseUpdate=p,l.lastBaseUpdate=v,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);_n|=i,e.lanes=i,e.memoizedState=y}}function No(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=n,typeof l!="function")throw Error(L(191,l));l.call(s)}}}var Kr={},$t=dn(Kr),Mr=dn(Kr),Vr=dn(Kr);function vn(e){if(e===Kr)throw Error(L(174));return e}function fi(e,t){switch(ie(Vr,t),ie(Mr,e),ie($t,Kr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:na(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=na(t,e)}ue($t),ie($t,t)}function Zn(){ue($t),ue(Mr),ue(Vr)}function cc(e){vn(Vr.current);var t=vn($t.current),n=na(t,e.type);t!==n&&(ie(Mr,e),ie($t,n))}function xi(e){Mr.current===e&&(ue($t),ue(Mr))}var me=dn(0);function qs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rl=[];function hi(){for(var e=0;e<Rl.length;e++)Rl[e]._workInProgressVersionPrimary=null;Rl.length=0}var Ss=Ut.ReactCurrentDispatcher,Fl=Ut.ReactCurrentBatchConfig,Sn=0,fe=null,ke=null,De=null,Qs=!1,_r=!1,Br=0,nm=0;function Ve(){throw Error(L(321))}function gi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kt(e[n],t[n]))return!1;return!0}function yi(e,t,n,s,l,a){if(Sn=a,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ss.current=e===null||e.memoizedState===null?am:im,e=n(s,l),_r){a=0;do{if(_r=!1,Br=0,25<=a)throw Error(L(301));a+=1,De=ke=null,t.updateQueue=null,Ss.current=om,e=n(s,l)}while(_r)}if(Ss.current=Gs,t=ke!==null&&ke.next!==null,Sn=0,De=ke=fe=null,Qs=!1,t)throw Error(L(300));return e}function vi(){var e=Br!==0;return Br=0,e}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?fe.memoizedState=De=e:De=De.next=e,De}function gt(){if(ke===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=De===null?fe.memoizedState:De.next;if(t!==null)De=t,ke=e;else{if(e===null)throw Error(L(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},De===null?fe.memoizedState=De=e:De=De.next=e}return De}function Hr(e,t){return typeof t=="function"?t(e):t}function Ol(e){var t=gt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var s=ke,l=s.baseQueue,a=n.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}s.baseQueue=l=a,n.pending=null}if(l!==null){a=l.next,s=s.baseState;var o=i=null,u=null,p=a;do{var v=p.lane;if((Sn&v)===v)u!==null&&(u=u.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:e(s,p.action);else{var y={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};u===null?(o=u=y,i=s):u=u.next=y,fe.lanes|=v,_n|=v}p=p.next}while(p!==null&&p!==a);u===null?i=s:u.next=o,kt(s,t.memoizedState)||(Ze=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=u,n.lastRenderedState=s}if(e=n.interleaved,e!==null){l=e;do a=l.lane,fe.lanes|=a,_n|=a,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ml(e){var t=gt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var s=n.dispatch,l=n.pending,a=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do a=e(a,i.action),i=i.next;while(i!==l);kt(a,t.memoizedState)||(Ze=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function dc(){}function pc(e,t){var n=fe,s=gt(),l=t(),a=!kt(s.memoizedState,l);if(a&&(s.memoizedState=l,Ze=!0),s=s.queue,ji(xc.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,Ur(9,fc.bind(null,n,s,l,t),void 0,null),Le===null)throw Error(L(349));Sn&30||mc(n,t,l)}return l}function mc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function fc(e,t,n,s){t.value=n,t.getSnapshot=s,hc(t)&&gc(e)}function xc(e,t,n){return n(function(){hc(t)&&gc(e)})}function hc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kt(e,n)}catch{return!0}}function gc(e){var t=Bt(e,1);t!==null&&_t(t,e,1,-1)}function bo(e){var t=Dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:e},t.queue=e,e=e.dispatch=lm.bind(null,fe,e),[t.memoizedState,e]}function Ur(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function yc(){return gt().memoizedState}function _s(e,t,n,s){var l=Dt();fe.flags|=e,l.memoizedState=Ur(1|t,n,void 0,s===void 0?null:s)}function il(e,t,n,s){var l=gt();s=s===void 0?null:s;var a=void 0;if(ke!==null){var i=ke.memoizedState;if(a=i.destroy,s!==null&&gi(s,i.deps)){l.memoizedState=Ur(t,n,a,s);return}}fe.flags|=e,l.memoizedState=Ur(1|t,n,a,s)}function wo(e,t){return _s(8390656,8,e,t)}function ji(e,t){return il(2048,8,e,t)}function vc(e,t){return il(4,2,e,t)}function jc(e,t){return il(4,4,e,t)}function Nc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bc(e,t,n){return n=n!=null?n.concat([e]):null,il(4,4,Nc.bind(null,t,e),n)}function Ni(){}function wc(e,t){var n=gt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&gi(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Sc(e,t){var n=gt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&gi(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function _c(e,t,n){return Sn&21?(kt(n,t)||(n=Pu(),fe.lanes|=n,_n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ze=!0),e.memoizedState=n)}function rm(e,t){var n=se;se=n!==0&&4>n?n:4,e(!0);var s=Fl.transition;Fl.transition={};try{e(!1),t()}finally{se=n,Fl.transition=s}}function kc(){return gt().memoizedState}function sm(e,t,n){var s=ln(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Cc(e))Ec(t,n);else if(n=oc(e,t,n,s),n!==null){var l=Je();_t(n,e,s,l),Tc(n,t,s)}}function lm(e,t,n){var s=ln(e),l={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cc(e))Ec(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,o=a(i,n);if(l.hasEagerState=!0,l.eagerState=o,kt(o,i)){var u=t.interleaved;u===null?(l.next=l,pi(t)):(l.next=u.next,u.next=l),t.interleaved=l;return}}catch{}finally{}n=oc(e,t,l,s),n!==null&&(l=Je(),_t(n,e,s,l),Tc(n,t,s))}}function Cc(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function Ec(e,t){_r=Qs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Tc(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Xa(e,n)}}var Gs={readContext:ht,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},am={readContext:ht,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:wo,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_s(4194308,4,Nc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _s(4194308,4,e,t)},useInsertionEffect:function(e,t){return _s(4,2,e,t)},useMemo:function(e,t){var n=Dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Dt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=sm.bind(null,fe,e),[s.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:bo,useDebugValue:Ni,useDeferredValue:function(e){return Dt().memoizedState=e},useTransition:function(){var e=bo(!1),t=e[0];return e=rm.bind(null,e[1]),Dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=fe,l=Dt();if(pe){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Le===null)throw Error(L(349));Sn&30||mc(s,t,n)}l.memoizedState=n;var a={value:n,getSnapshot:t};return l.queue=a,wo(xc.bind(null,s,a,e),[e]),s.flags|=2048,Ur(9,fc.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=Dt(),t=Le.identifierPrefix;if(pe){var n=Ft,s=Rt;n=(s&~(1<<32-St(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Br++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=nm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},im={readContext:ht,useCallback:wc,useContext:ht,useEffect:ji,useImperativeHandle:bc,useInsertionEffect:vc,useLayoutEffect:jc,useMemo:Sc,useReducer:Ol,useRef:yc,useState:function(){return Ol(Hr)},useDebugValue:Ni,useDeferredValue:function(e){var t=gt();return _c(t,ke.memoizedState,e)},useTransition:function(){var e=Ol(Hr)[0],t=gt().memoizedState;return[e,t]},useMutableSource:dc,useSyncExternalStore:pc,useId:kc,unstable_isNewReconciler:!1},om={readContext:ht,useCallback:wc,useContext:ht,useEffect:ji,useImperativeHandle:bc,useInsertionEffect:vc,useLayoutEffect:jc,useMemo:Sc,useReducer:Ml,useRef:yc,useState:function(){return Ml(Hr)},useDebugValue:Ni,useDeferredValue:function(e){var t=gt();return ke===null?t.memoizedState=e:_c(t,ke.memoizedState,e)},useTransition:function(){var e=Ml(Hr)[0],t=gt().memoizedState;return[e,t]},useMutableSource:dc,useSyncExternalStore:pc,useId:kc,unstable_isNewReconciler:!1};function Nt(e,t){if(e&&e.defaultProps){t=xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function wa(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ol={isMounted:function(e){return(e=e._reactInternals)?En(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Je(),l=ln(e),a=Ot(s,l);a.payload=t,n!=null&&(a.callback=n),t=rn(e,a,l),t!==null&&(_t(t,e,l,s),ws(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Je(),l=ln(e),a=Ot(s,l);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=rn(e,a,l),t!==null&&(_t(t,e,l,s),ws(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Je(),s=ln(e),l=Ot(n,s);l.tag=2,t!=null&&(l.callback=t),t=rn(e,l,s),t!==null&&(_t(t,e,s,n),ws(t,e,s))}};function So(e,t,n,s,l,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,i):t.prototype&&t.prototype.isPureReactComponent?!Ar(n,s)||!Ar(l,a):!0}function Pc(e,t,n){var s=!1,l=un,a=t.contextType;return typeof a=="object"&&a!==null?a=ht(a):(l=tt(t)?bn:Ue.current,s=t.contextTypes,a=(s=s!=null)?Kn(e,l):un),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ol,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function _o(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&ol.enqueueReplaceState(t,t.state,null)}function Sa(e,t,n,s){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},mi(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=ht(a):(a=tt(t)?bn:Ue.current,l.context=Kn(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(wa(e,t,a,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ol.enqueueReplaceState(l,l.state,null),Ws(e,n,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function er(e,t){try{var n="",s=t;do n+=Ad(s),s=s.return;while(s);var l=n}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function Vl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _a(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var um=typeof WeakMap=="function"?WeakMap:Map;function Dc(e,t,n){n=Ot(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Ks||(Ks=!0,Ia=s),_a(e,t)},n}function Lc(e,t,n){n=Ot(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;n.payload=function(){return s(l)},n.callback=function(){_a(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){_a(e,t),typeof s!="function"&&(sn===null?sn=new Set([this]):sn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function ko(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new um;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(n)||(l.add(n),e=wm.bind(null,e,t,n),t.then(e,e))}function Co(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Eo(e,t,n,s,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ot(-1,1),t.tag=2,rn(n,t,1))),n.lanes|=1),e)}var cm=Ut.ReactCurrentOwner,Ze=!1;function Ge(e,t,n,s){t.child=e===null?ic(t,null,n,s):Xn(t,e.child,n,s)}function To(e,t,n,s,l){n=n.render;var a=t.ref;return Qn(t,l),s=yi(e,t,n,s,a,l),n=vi(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ht(e,t,l)):(pe&&n&&ai(t),t.flags|=1,Ge(e,t,s,l),t.child)}function Po(e,t,n,s,l){if(e===null){var a=n.type;return typeof a=="function"&&!Ti(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,zc(e,t,a,s,l)):(e=Ts(n.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ar,n(i,s)&&e.ref===t.ref)return Ht(e,t,l)}return t.flags|=1,e=an(a,s),e.ref=t.ref,e.return=t,t.child=e}function zc(e,t,n,s,l){if(e!==null){var a=e.memoizedProps;if(Ar(a,s)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=s=a,(e.lanes&l)!==0)e.flags&131072&&(Ze=!0);else return t.lanes=e.lanes,Ht(e,t,l)}return ka(e,t,n,s,l)}function $c(e,t,n){var s=t.pendingProps,l=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(Bn,st),st|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(Bn,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,ie(Bn,st),st|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,ie(Bn,st),st|=s;return Ge(e,t,l,n),t.child}function Ic(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,s,l){var a=tt(n)?bn:Ue.current;return a=Kn(t,a),Qn(t,l),n=yi(e,t,n,s,a,l),s=vi(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ht(e,t,l)):(pe&&s&&ai(t),t.flags|=1,Ge(e,t,n,l),t.child)}function Do(e,t,n,s,l){if(tt(n)){var a=!0;Ms(t)}else a=!1;if(Qn(t,l),t.stateNode===null)ks(e,t),Pc(t,n,s),Sa(t,n,s,l),s=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var u=i.context,p=n.contextType;typeof p=="object"&&p!==null?p=ht(p):(p=tt(n)?bn:Ue.current,p=Kn(t,p));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function";y||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==s||u!==p)&&_o(t,i,s,p),Qt=!1;var m=t.memoizedState;i.state=m,Ws(t,s,i,l),u=t.memoizedState,o!==s||m!==u||et.current||Qt?(typeof v=="function"&&(wa(t,n,v,s),u=t.memoizedState),(o=Qt||So(t,n,o,s,m,u,p))?(y||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),i.props=s,i.state=u,i.context=p,s=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,uc(e,t),o=t.memoizedProps,p=t.type===t.elementType?o:Nt(t.type,o),i.props=p,y=t.pendingProps,m=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=ht(u):(u=tt(n)?bn:Ue.current,u=Kn(t,u));var _=n.getDerivedStateFromProps;(v=typeof _=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==y||m!==u)&&_o(t,i,s,u),Qt=!1,m=t.memoizedState,i.state=m,Ws(t,s,i,l);var h=t.memoizedState;o!==y||m!==h||et.current||Qt?(typeof _=="function"&&(wa(t,n,_,s),h=t.memoizedState),(p=Qt||So(t,n,p,s,m,h,u)||!1)?(v||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,h,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,h,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=h),i.props=s,i.state=h,i.context=u,s=p):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Ca(e,t,n,s,a,l)}function Ca(e,t,n,s,l,a){Ic(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return l&&ho(t,n,!1),Ht(e,t,a);s=t.stateNode,cm.current=t;var o=i&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=Xn(t,e.child,null,a),t.child=Xn(t,null,o,a)):Ge(e,t,o,a),t.memoizedState=s.state,l&&ho(t,n,!0),t.child}function Ac(e){var t=e.stateNode;t.pendingContext?xo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xo(e,t.context,!1),fi(e,t.containerInfo)}function Lo(e,t,n,s,l){return Yn(),oi(l),t.flags|=256,Ge(e,t,n,s),t.child}var Ea={dehydrated:null,treeContext:null,retryLane:0};function Ta(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rc(e,t,n){var s=t.pendingProps,l=me.current,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(l&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),ie(me,l&1),e===null)return Na(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,a?(s=t.mode,a=t.child,i={mode:"hidden",children:i},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=dl(i,s,0,null),e=Nn(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ta(n),t.memoizedState=Ea,e):bi(t,i));if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null))return dm(e,t,i,s,o,l,n);if(a){a=s.fallback,i=t.mode,l=e.child,o=l.sibling;var u={mode:"hidden",children:s.children};return!(i&1)&&t.child!==l?(s=t.child,s.childLanes=0,s.pendingProps=u,t.deletions=null):(s=an(l,u),s.subtreeFlags=l.subtreeFlags&14680064),o!==null?a=an(o,a):(a=Nn(a,i,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,i=e.child.memoizedState,i=i===null?Ta(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=Ea,s}return a=e.child,e=a.sibling,s=an(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function bi(e,t){return t=dl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ds(e,t,n,s){return s!==null&&oi(s),Xn(t,e.child,null,n),e=bi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dm(e,t,n,s,l,a,i){if(n)return t.flags&256?(t.flags&=-257,s=Vl(Error(L(422))),ds(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,l=t.mode,s=dl({mode:"visible",children:s.children},l,0,null),a=Nn(a,l,i,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Xn(t,e.child,null,i),t.child.memoizedState=Ta(i),t.memoizedState=Ea,a);if(!(t.mode&1))return ds(e,t,i,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(L(419)),s=Vl(a,s,void 0),ds(e,t,i,s)}if(o=(i&e.childLanes)!==0,Ze||o){if(s=Le,s!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(s.suspendedLanes|i)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,Bt(e,l),_t(s,e,l,-1))}return Ei(),s=Vl(Error(L(421))),ds(e,t,i,s)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Sm.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,lt=nn(l.nextSibling),at=t,pe=!0,wt=null,e!==null&&(pt[mt++]=Rt,pt[mt++]=Ft,pt[mt++]=wn,Rt=e.id,Ft=e.overflow,wn=t),t=bi(t,s.children),t.flags|=4096,t)}function zo(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ba(e.return,t,n)}function Bl(e,t,n,s,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=l)}function Fc(e,t,n){var s=t.pendingProps,l=s.revealOrder,a=s.tail;if(Ge(e,t,s.children,n),s=me.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zo(e,n,t);else if(e.tag===19)zo(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ie(me,s),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&qs(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Bl(t,!1,l,n,a);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&qs(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Bl(t,!0,n,null,a);break;case"together":Bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ks(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ht(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=an(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=an(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pm(e,t,n){switch(t.tag){case 3:Ac(t),Yn();break;case 5:cc(t);break;case 1:tt(t.type)&&Ms(t);break;case 4:fi(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,l=t.memoizedProps.value;ie(Hs,s._currentValue),s._currentValue=l;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ie(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?Rc(e,t,n):(ie(me,me.current&1),e=Ht(e,t,n),e!==null?e.sibling:null);ie(me,me.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Fc(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ie(me,me.current),s)break;return null;case 22:case 23:return t.lanes=0,$c(e,t,n)}return Ht(e,t,n)}var Oc,Pa,Mc,Vc;Oc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pa=function(){};Mc=function(e,t,n,s){var l=e.memoizedProps;if(l!==s){e=t.stateNode,vn($t.current);var a=null;switch(n){case"input":l=Xl(e,l),s=Xl(e,s),a=[];break;case"select":l=xe({},l,{value:void 0}),s=xe({},s,{value:void 0}),a=[];break;case"textarea":l=ta(e,l),s=ta(e,s),a=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Fs)}ra(n,s);var i;n=null;for(p in l)if(!s.hasOwnProperty(p)&&l.hasOwnProperty(p)&&l[p]!=null)if(p==="style"){var o=l[p];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Tr.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in s){var u=s[p];if(o=l!=null?l[p]:void 0,s.hasOwnProperty(p)&&u!==o&&(u!=null||o!=null))if(p==="style")if(o){for(i in o)!o.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&o[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(a||(a=[]),a.push(p,n)),n=u;else p==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(a=a||[]).push(p,u)):p==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(p,""+u):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Tr.hasOwnProperty(p)?(u!=null&&p==="onScroll"&&oe("scroll",e),a||o===u||(a=[])):(a=a||[]).push(p,u))}n&&(a=a||[]).push("style",n);var p=a;(t.updateQueue=p)&&(t.flags|=4)}};Vc=function(e,t,n,s){n!==s&&(t.flags|=4)};function pr(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Be(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function mm(e,t,n){var s=t.pendingProps;switch(ii(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(t),null;case 1:return tt(t.type)&&Os(),Be(t),null;case 3:return s=t.stateNode,Zn(),ue(et),ue(Ue),hi(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(us(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wt!==null&&(Fa(wt),wt=null))),Pa(e,t),Be(t),null;case 5:xi(t);var l=vn(Vr.current);if(n=t.type,e!==null&&t.stateNode!=null)Mc(e,t,n,s,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(L(166));return Be(t),null}if(e=vn($t.current),us(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[Lt]=t,s[Or]=a,e=(t.mode&1)!==0,n){case"dialog":oe("cancel",s),oe("close",s);break;case"iframe":case"object":case"embed":oe("load",s);break;case"video":case"audio":for(l=0;l<vr.length;l++)oe(vr[l],s);break;case"source":oe("error",s);break;case"img":case"image":case"link":oe("error",s),oe("load",s);break;case"details":oe("toggle",s);break;case"input":Vi(s,a),oe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},oe("invalid",s);break;case"textarea":Hi(s,a),oe("invalid",s)}ra(n,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];i==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&os(s.textContent,o,e),l=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&os(s.textContent,o,e),l=["children",""+o]):Tr.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&oe("scroll",s)}switch(n){case"input":es(s),Bi(s,a,!0);break;case"textarea":es(s),Ui(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Fs)}s=l,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(n,{is:s.is}):(e=i.createElement(n),n==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,n),e[Lt]=t,e[Or]=s,Oc(e,t,!1,!1),t.stateNode=e;e:{switch(i=sa(n,s),n){case"dialog":oe("cancel",e),oe("close",e),l=s;break;case"iframe":case"object":case"embed":oe("load",e),l=s;break;case"video":case"audio":for(l=0;l<vr.length;l++)oe(vr[l],e);l=s;break;case"source":oe("error",e),l=s;break;case"img":case"image":case"link":oe("error",e),oe("load",e),l=s;break;case"details":oe("toggle",e),l=s;break;case"input":Vi(e,s),l=Xl(e,s),oe("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=xe({},s,{value:void 0}),oe("invalid",e);break;case"textarea":Hi(e,s),l=ta(e,s),oe("invalid",e);break;default:l=s}ra(n,l),o=l;for(a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="style"?yu(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&hu(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Pr(e,u):typeof u=="number"&&Pr(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Tr.hasOwnProperty(a)?u!=null&&a==="onScroll"&&oe("scroll",e):u!=null&&qa(e,a,u,i))}switch(n){case"input":es(e),Bi(e,s,!1);break;case"textarea":es(e),Ui(e);break;case"option":s.value!=null&&e.setAttribute("value",""+on(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?Hn(e,!!s.multiple,a,!1):s.defaultValue!=null&&Hn(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Fs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Be(t),null;case 6:if(e&&t.stateNode!=null)Vc(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(L(166));if(n=vn(Vr.current),vn($t.current),us(t)){if(s=t.stateNode,n=t.memoizedProps,s[Lt]=t,(a=s.nodeValue!==n)&&(e=at,e!==null))switch(e.tag){case 3:os(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&os(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Lt]=t,t.stateNode=s}return Be(t),null;case 13:if(ue(me),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&lt!==null&&t.mode&1&&!(t.flags&128))lc(),Yn(),t.flags|=98560,a=!1;else if(a=us(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(L(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(L(317));a[Lt]=t}else Yn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Be(t),a=!1}else wt!==null&&(Fa(wt),wt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Ce===0&&(Ce=3):Ei())),t.updateQueue!==null&&(t.flags|=4),Be(t),null);case 4:return Zn(),Pa(e,t),e===null&&Rr(t.stateNode.containerInfo),Be(t),null;case 10:return di(t.type._context),Be(t),null;case 17:return tt(t.type)&&Os(),Be(t),null;case 19:if(ue(me),a=t.memoizedState,a===null)return Be(t),null;if(s=(t.flags&128)!==0,i=a.rendering,i===null)if(s)pr(a,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=qs(e),i!==null){for(t.flags|=128,pr(a,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ie(me,me.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ne()>tr&&(t.flags|=128,s=!0,pr(a,!1),t.lanes=4194304)}else{if(!s)if(e=qs(i),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!pe)return Be(t),null}else 2*Ne()-a.renderingStartTime>tr&&n!==1073741824&&(t.flags|=128,s=!0,pr(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ne(),t.sibling=null,n=me.current,ie(me,s?n&1|2:n&1),t):(Be(t),null);case 22:case 23:return Ci(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?st&1073741824&&(Be(t),t.subtreeFlags&6&&(t.flags|=8192)):Be(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function fm(e,t){switch(ii(t),t.tag){case 1:return tt(t.type)&&Os(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zn(),ue(et),ue(Ue),hi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xi(t),null;case 13:if(ue(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Yn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(me),null;case 4:return Zn(),null;case 10:return di(t.type._context),null;case 22:case 23:return Ci(),null;case 24:return null;default:return null}}var ps=!1,He=!1,xm=typeof WeakSet=="function"?WeakSet:Set,R=null;function Vn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){ge(e,t,s)}else n.current=null}function Da(e,t,n){try{n()}catch(s){ge(e,t,s)}}var $o=!1;function hm(e,t){if(fa=Is,e=qu(),li(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var l=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,o=-1,u=-1,p=0,v=0,y=e,m=null;t:for(;;){for(var _;y!==n||l!==0&&y.nodeType!==3||(o=i+l),y!==a||s!==0&&y.nodeType!==3||(u=i+s),y.nodeType===3&&(i+=y.nodeValue.length),(_=y.firstChild)!==null;)m=y,y=_;for(;;){if(y===e)break t;if(m===n&&++p===l&&(o=i),m===a&&++v===s&&(u=i),(_=y.nextSibling)!==null)break;y=m,m=y.parentNode}y=_}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(xa={focusedElem:e,selectionRange:n},Is=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var w=h.memoizedProps,C=h.memoizedState,d=t.stateNode,c=d.getSnapshotBeforeUpdate(t.elementType===t.type?w:Nt(t.type,w),C);d.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(S){ge(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return h=$o,$o=!1,h}function kr(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&Da(t,n,a)}l=l.next}while(l!==s)}}function ul(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function La(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Bc(e){var t=e.alternate;t!==null&&(e.alternate=null,Bc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[Or],delete t[ya],delete t[Xp],delete t[Zp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hc(e){return e.tag===5||e.tag===3||e.tag===4}function Io(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function za(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fs));else if(s!==4&&(e=e.child,e!==null))for(za(e,t,n),e=e.sibling;e!==null;)za(e,t,n),e=e.sibling}function $a(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for($a(e,t,n),e=e.sibling;e!==null;)$a(e,t,n),e=e.sibling}var Ae=null,bt=!1;function Wt(e,t,n){for(n=n.child;n!==null;)Uc(e,t,n),n=n.sibling}function Uc(e,t,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(tl,n)}catch{}switch(n.tag){case 5:He||Vn(n,t);case 6:var s=Ae,l=bt;Ae=null,Wt(e,t,n),Ae=s,bt=l,Ae!==null&&(bt?(e=Ae,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(bt?(e=Ae,n=n.stateNode,e.nodeType===8?Il(e.parentNode,n):e.nodeType===1&&Il(e,n),$r(e)):Il(Ae,n.stateNode));break;case 4:s=Ae,l=bt,Ae=n.stateNode.containerInfo,bt=!0,Wt(e,t,n),Ae=s,bt=l;break;case 0:case 11:case 14:case 15:if(!He&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Da(n,t,i),l=l.next}while(l!==s)}Wt(e,t,n);break;case 1:if(!He&&(Vn(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){ge(n,t,o)}Wt(e,t,n);break;case 21:Wt(e,t,n);break;case 22:n.mode&1?(He=(s=He)||n.memoizedState!==null,Wt(e,t,n),He=s):Wt(e,t,n);break;default:Wt(e,t,n)}}function Ao(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xm),t.forEach(function(s){var l=_m.bind(null,e,s);n.has(s)||(n.add(s),s.then(l,l))})}}function jt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];try{var a=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:Ae=o.stateNode,bt=!1;break e;case 3:Ae=o.stateNode.containerInfo,bt=!0;break e;case 4:Ae=o.stateNode.containerInfo,bt=!0;break e}o=o.return}if(Ae===null)throw Error(L(160));Uc(a,i,l),Ae=null,bt=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(p){ge(l,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wc(t,e),t=t.sibling}function Wc(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jt(t,e),Tt(e),s&4){try{kr(3,e,e.return),ul(3,e)}catch(w){ge(e,e.return,w)}try{kr(5,e,e.return)}catch(w){ge(e,e.return,w)}}break;case 1:jt(t,e),Tt(e),s&512&&n!==null&&Vn(n,n.return);break;case 5:if(jt(t,e),Tt(e),s&512&&n!==null&&Vn(n,n.return),e.flags&32){var l=e.stateNode;try{Pr(l,"")}catch(w){ge(e,e.return,w)}}if(s&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,o=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&mu(l,a),sa(o,i);var p=sa(o,a);for(i=0;i<u.length;i+=2){var v=u[i],y=u[i+1];v==="style"?yu(l,y):v==="dangerouslySetInnerHTML"?hu(l,y):v==="children"?Pr(l,y):qa(l,v,y,p)}switch(o){case"input":Zl(l,a);break;case"textarea":fu(l,a);break;case"select":var m=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var _=a.value;_!=null?Hn(l,!!a.multiple,_,!1):m!==!!a.multiple&&(a.defaultValue!=null?Hn(l,!!a.multiple,a.defaultValue,!0):Hn(l,!!a.multiple,a.multiple?[]:"",!1))}l[Or]=a}catch(w){ge(e,e.return,w)}}break;case 6:if(jt(t,e),Tt(e),s&4){if(e.stateNode===null)throw Error(L(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(w){ge(e,e.return,w)}}break;case 3:if(jt(t,e),Tt(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{$r(t.containerInfo)}catch(w){ge(e,e.return,w)}break;case 4:jt(t,e),Tt(e);break;case 13:jt(t,e),Tt(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(_i=Ne())),s&4&&Ao(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(He=(p=He)||v,jt(t,e),He=p):jt(t,e),Tt(e),s&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!v&&e.mode&1)for(R=e,v=e.child;v!==null;){for(y=R=v;R!==null;){switch(m=R,_=m.child,m.tag){case 0:case 11:case 14:case 15:kr(4,m,m.return);break;case 1:Vn(m,m.return);var h=m.stateNode;if(typeof h.componentWillUnmount=="function"){s=m,n=m.return;try{t=s,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(w){ge(s,n,w)}}break;case 5:Vn(m,m.return);break;case 22:if(m.memoizedState!==null){Fo(y);continue}}_!==null?(_.return=m,R=_):Fo(y)}v=v.sibling}e:for(v=null,y=e;;){if(y.tag===5){if(v===null){v=y;try{l=y.stateNode,p?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=y.stateNode,u=y.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=gu("display",i))}catch(w){ge(e,e.return,w)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(w){ge(e,e.return,w)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:jt(t,e),Tt(e),s&4&&Ao(e);break;case 21:break;default:jt(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hc(n)){var s=n;break e}n=n.return}throw Error(L(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(Pr(l,""),s.flags&=-33);var a=Io(e);$a(e,a,l);break;case 3:case 4:var i=s.stateNode.containerInfo,o=Io(e);za(e,o,i);break;default:throw Error(L(161))}}catch(u){ge(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gm(e,t,n){R=e,qc(e)}function qc(e,t,n){for(var s=(e.mode&1)!==0;R!==null;){var l=R,a=l.child;if(l.tag===22&&s){var i=l.memoizedState!==null||ps;if(!i){var o=l.alternate,u=o!==null&&o.memoizedState!==null||He;o=ps;var p=He;if(ps=i,(He=u)&&!p)for(R=l;R!==null;)i=R,u=i.child,i.tag===22&&i.memoizedState!==null?Oo(l):u!==null?(u.return=i,R=u):Oo(l);for(;a!==null;)R=a,qc(a),a=a.sibling;R=l,ps=o,He=p}Ro(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,R=a):Ro(e)}}function Ro(e){for(;R!==null;){var t=R;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:He||ul(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!He)if(n===null)s.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Nt(t.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&No(t,a,s);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}No(t,i,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&$r(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}He||t.flags&512&&La(t)}catch(m){ge(t,t.return,m)}}if(t===e){R=null;break}if(n=t.sibling,n!==null){n.return=t.return,R=n;break}R=t.return}}function Fo(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var n=t.sibling;if(n!==null){n.return=t.return,R=n;break}R=t.return}}function Oo(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ul(4,t)}catch(u){ge(t,n,u)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(u){ge(t,l,u)}}var a=t.return;try{La(t)}catch(u){ge(t,a,u)}break;case 5:var i=t.return;try{La(t)}catch(u){ge(t,i,u)}}}catch(u){ge(t,t.return,u)}if(t===e){R=null;break}var o=t.sibling;if(o!==null){o.return=t.return,R=o;break}R=t.return}}var ym=Math.ceil,Js=Ut.ReactCurrentDispatcher,wi=Ut.ReactCurrentOwner,xt=Ut.ReactCurrentBatchConfig,ne=0,Le=null,be=null,Re=0,st=0,Bn=dn(0),Ce=0,Wr=null,_n=0,cl=0,Si=0,Cr=null,Xe=null,_i=0,tr=1/0,It=null,Ks=!1,Ia=null,sn=null,ms=!1,Yt=null,Ys=0,Er=0,Aa=null,Cs=-1,Es=0;function Je(){return ne&6?Ne():Cs!==-1?Cs:Cs=Ne()}function ln(e){return e.mode&1?ne&2&&Re!==0?Re&-Re:tm.transition!==null?(Es===0&&(Es=Pu()),Es):(e=se,e!==0||(e=window.event,e=e===void 0?16:Ru(e.type)),e):1}function _t(e,t,n,s){if(50<Er)throw Er=0,Aa=null,Error(L(185));Qr(e,n,s),(!(ne&2)||e!==Le)&&(e===Le&&(!(ne&2)&&(cl|=n),Ce===4&&Jt(e,Re)),nt(e,s),n===1&&ne===0&&!(t.mode&1)&&(tr=Ne()+500,al&&pn()))}function nt(e,t){var n=e.callbackNode;tp(e,t);var s=$s(e,e===Le?Re:0);if(s===0)n!==null&&Qi(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Qi(n),t===1)e.tag===0?em(Mo.bind(null,e)):nc(Mo.bind(null,e)),Kp(function(){!(ne&6)&&pn()}),n=null;else{switch(Du(s)){case 1:n=Ya;break;case 4:n=Eu;break;case 16:n=zs;break;case 536870912:n=Tu;break;default:n=zs}n=ed(n,Qc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Qc(e,t){if(Cs=-1,Es=0,ne&6)throw Error(L(327));var n=e.callbackNode;if(Gn()&&e.callbackNode!==n)return null;var s=$s(e,e===Le?Re:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Xs(e,s);else{t=s;var l=ne;ne|=2;var a=Jc();(Le!==e||Re!==t)&&(It=null,tr=Ne()+500,jn(e,t));do try{Nm();break}catch(o){Gc(e,o)}while(!0);ci(),Js.current=a,ne=l,be!==null?t=0:(Le=null,Re=0,t=Ce)}if(t!==0){if(t===2&&(l=ua(e),l!==0&&(s=l,t=Ra(e,l))),t===1)throw n=Wr,jn(e,0),Jt(e,s),nt(e,Ne()),n;if(t===6)Jt(e,s);else{if(l=e.current.alternate,!(s&30)&&!vm(l)&&(t=Xs(e,s),t===2&&(a=ua(e),a!==0&&(s=a,t=Ra(e,a))),t===1))throw n=Wr,jn(e,0),Jt(e,s),nt(e,Ne()),n;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(L(345));case 2:hn(e,Xe,It);break;case 3:if(Jt(e,s),(s&130023424)===s&&(t=_i+500-Ne(),10<t)){if($s(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){Je(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=ga(hn.bind(null,e,Xe,It),t);break}hn(e,Xe,It);break;case 4:if(Jt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var i=31-St(s);a=1<<i,i=t[i],i>l&&(l=i),s&=~a}if(s=l,s=Ne()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*ym(s/1960))-s,10<s){e.timeoutHandle=ga(hn.bind(null,e,Xe,It),s);break}hn(e,Xe,It);break;case 5:hn(e,Xe,It);break;default:throw Error(L(329))}}}return nt(e,Ne()),e.callbackNode===n?Qc.bind(null,e):null}function Ra(e,t){var n=Cr;return e.current.memoizedState.isDehydrated&&(jn(e,t).flags|=256),e=Xs(e,t),e!==2&&(t=Xe,Xe=n,t!==null&&Fa(t)),e}function Fa(e){Xe===null?Xe=e:Xe.push.apply(Xe,e)}function vm(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var l=n[s],a=l.getSnapshot;l=l.value;try{if(!kt(a(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jt(e,t){for(t&=~Si,t&=~cl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-St(t),s=1<<n;e[n]=-1,t&=~s}}function Mo(e){if(ne&6)throw Error(L(327));Gn();var t=$s(e,0);if(!(t&1))return nt(e,Ne()),null;var n=Xs(e,t);if(e.tag!==0&&n===2){var s=ua(e);s!==0&&(t=s,n=Ra(e,s))}if(n===1)throw n=Wr,jn(e,0),Jt(e,t),nt(e,Ne()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hn(e,Xe,It),nt(e,Ne()),null}function ki(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(tr=Ne()+500,al&&pn())}}function kn(e){Yt!==null&&Yt.tag===0&&!(ne&6)&&Gn();var t=ne;ne|=1;var n=xt.transition,s=se;try{if(xt.transition=null,se=1,e)return e()}finally{se=s,xt.transition=n,ne=t,!(ne&6)&&pn()}}function Ci(){st=Bn.current,ue(Bn)}function jn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Jp(n)),be!==null)for(n=be.return;n!==null;){var s=n;switch(ii(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Os();break;case 3:Zn(),ue(et),ue(Ue),hi();break;case 5:xi(s);break;case 4:Zn();break;case 13:ue(me);break;case 19:ue(me);break;case 10:di(s.type._context);break;case 22:case 23:Ci()}n=n.return}if(Le=e,be=e=an(e.current,null),Re=st=t,Ce=0,Wr=null,Si=cl=_n=0,Xe=Cr=null,yn!==null){for(t=0;t<yn.length;t++)if(n=yn[t],s=n.interleaved,s!==null){n.interleaved=null;var l=s.next,a=n.pending;if(a!==null){var i=a.next;a.next=l,s.next=i}n.pending=s}yn=null}return e}function Gc(e,t){do{var n=be;try{if(ci(),Ss.current=Gs,Qs){for(var s=fe.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Qs=!1}if(Sn=0,De=ke=fe=null,_r=!1,Br=0,wi.current=null,n===null||n.return===null){Ce=1,Wr=t,be=null;break}e:{var a=e,i=n.return,o=n,u=t;if(t=Re,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var p=u,v=o,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var m=v.alternate;m?(v.updateQueue=m.updateQueue,v.memoizedState=m.memoizedState,v.lanes=m.lanes):(v.updateQueue=null,v.memoizedState=null)}var _=Co(i);if(_!==null){_.flags&=-257,Eo(_,i,o,a,t),_.mode&1&&ko(a,p,t),t=_,u=p;var h=t.updateQueue;if(h===null){var w=new Set;w.add(u),t.updateQueue=w}else h.add(u);break e}else{if(!(t&1)){ko(a,p,t),Ei();break e}u=Error(L(426))}}else if(pe&&o.mode&1){var C=Co(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Eo(C,i,o,a,t),oi(er(u,o));break e}}a=u=er(u,o),Ce!==4&&(Ce=2),Cr===null?Cr=[a]:Cr.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var d=Dc(a,u,t);jo(a,d);break e;case 1:o=u;var c=a.type,f=a.stateNode;if(!(a.flags&128)&&(typeof c.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(sn===null||!sn.has(f)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=Lc(a,o,t);jo(a,S);break e}}a=a.return}while(a!==null)}Yc(n)}catch(b){t=b,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function Jc(){var e=Js.current;return Js.current=Gs,e===null?Gs:e}function Ei(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Le===null||!(_n&268435455)&&!(cl&268435455)||Jt(Le,Re)}function Xs(e,t){var n=ne;ne|=2;var s=Jc();(Le!==e||Re!==t)&&(It=null,jn(e,t));do try{jm();break}catch(l){Gc(e,l)}while(!0);if(ci(),ne=n,Js.current=s,be!==null)throw Error(L(261));return Le=null,Re=0,Ce}function jm(){for(;be!==null;)Kc(be)}function Nm(){for(;be!==null&&!qd();)Kc(be)}function Kc(e){var t=Zc(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?Yc(e):be=t,wi.current=null}function Yc(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fm(n,t),n!==null){n.flags&=32767,be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,be=null;return}}else if(n=mm(n,t,st),n!==null){be=n;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);Ce===0&&(Ce=5)}function hn(e,t,n){var s=se,l=xt.transition;try{xt.transition=null,se=1,bm(e,t,n,s)}finally{xt.transition=l,se=s}return null}function bm(e,t,n,s){do Gn();while(Yt!==null);if(ne&6)throw Error(L(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(np(e,a),e===Le&&(be=Le=null,Re=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ms||(ms=!0,ed(zs,function(){return Gn(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=xt.transition,xt.transition=null;var i=se;se=1;var o=ne;ne|=4,wi.current=null,hm(e,n),Wc(n,e),Bp(xa),Is=!!fa,xa=fa=null,e.current=n,gm(n),Qd(),ne=o,se=i,xt.transition=a}else e.current=n;if(ms&&(ms=!1,Yt=e,Ys=l),a=e.pendingLanes,a===0&&(sn=null),Kd(n.stateNode),nt(e,Ne()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],s(l.value,{componentStack:l.stack,digest:l.digest});if(Ks)throw Ks=!1,e=Ia,Ia=null,e;return Ys&1&&e.tag!==0&&Gn(),a=e.pendingLanes,a&1?e===Aa?Er++:(Er=0,Aa=e):Er=0,pn(),null}function Gn(){if(Yt!==null){var e=Du(Ys),t=xt.transition,n=se;try{if(xt.transition=null,se=16>e?16:e,Yt===null)var s=!1;else{if(e=Yt,Yt=null,Ys=0,ne&6)throw Error(L(331));var l=ne;for(ne|=4,R=e.current;R!==null;){var a=R,i=a.child;if(R.flags&16){var o=a.deletions;if(o!==null){for(var u=0;u<o.length;u++){var p=o[u];for(R=p;R!==null;){var v=R;switch(v.tag){case 0:case 11:case 15:kr(8,v,a)}var y=v.child;if(y!==null)y.return=v,R=y;else for(;R!==null;){v=R;var m=v.sibling,_=v.return;if(Bc(v),v===p){R=null;break}if(m!==null){m.return=_,R=m;break}R=_}}}var h=a.alternate;if(h!==null){var w=h.child;if(w!==null){h.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}R=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,R=i;else e:for(;R!==null;){if(a=R,a.flags&2048)switch(a.tag){case 0:case 11:case 15:kr(9,a,a.return)}var d=a.sibling;if(d!==null){d.return=a.return,R=d;break e}R=a.return}}var c=e.current;for(R=c;R!==null;){i=R;var f=i.child;if(i.subtreeFlags&2064&&f!==null)f.return=i,R=f;else e:for(i=c;R!==null;){if(o=R,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ul(9,o)}}catch(b){ge(o,o.return,b)}if(o===i){R=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,R=S;break e}R=o.return}}if(ne=l,pn(),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(tl,e)}catch{}s=!0}return s}finally{se=n,xt.transition=t}}return!1}function Vo(e,t,n){t=er(n,t),t=Dc(e,t,1),e=rn(e,t,1),t=Je(),e!==null&&(Qr(e,1,t),nt(e,t))}function ge(e,t,n){if(e.tag===3)Vo(e,e,n);else for(;t!==null;){if(t.tag===3){Vo(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(sn===null||!sn.has(s))){e=er(n,e),e=Lc(t,e,1),t=rn(t,e,1),e=Je(),t!==null&&(Qr(t,1,e),nt(t,e));break}}t=t.return}}function wm(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Je(),e.pingedLanes|=e.suspendedLanes&n,Le===e&&(Re&n)===n&&(Ce===4||Ce===3&&(Re&130023424)===Re&&500>Ne()-_i?jn(e,0):Si|=n),nt(e,t)}function Xc(e,t){t===0&&(e.mode&1?(t=rs,rs<<=1,!(rs&130023424)&&(rs=4194304)):t=1);var n=Je();e=Bt(e,t),e!==null&&(Qr(e,t,n),nt(e,n))}function Sm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xc(e,n)}function _m(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(L(314))}s!==null&&s.delete(t),Xc(e,n)}var Zc;Zc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||et.current)Ze=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ze=!1,pm(e,t,n);Ze=!!(e.flags&131072)}else Ze=!1,pe&&t.flags&1048576&&rc(t,Bs,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;ks(e,t),e=t.pendingProps;var l=Kn(t,Ue.current);Qn(t,n),l=yi(null,t,s,e,l,n);var a=vi();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tt(s)?(a=!0,Ms(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,mi(t),l.updater=ol,t.stateNode=l,l._reactInternals=t,Sa(t,s,e,n),t=Ca(null,t,s,!0,a,n)):(t.tag=0,pe&&a&&ai(t),Ge(null,t,l,n),t=t.child),t;case 16:s=t.elementType;e:{switch(ks(e,t),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=Cm(s),e=Nt(s,e),l){case 0:t=ka(null,t,s,e,n);break e;case 1:t=Do(null,t,s,e,n);break e;case 11:t=To(null,t,s,e,n);break e;case 14:t=Po(null,t,s,Nt(s.type,e),n);break e}throw Error(L(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Nt(s,l),ka(e,t,s,l,n);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Nt(s,l),Do(e,t,s,l,n);case 3:e:{if(Ac(t),e===null)throw Error(L(387));s=t.pendingProps,a=t.memoizedState,l=a.element,uc(e,t),Ws(t,s,null,n);var i=t.memoizedState;if(s=i.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=er(Error(L(423)),t),t=Lo(e,t,s,n,l);break e}else if(s!==l){l=er(Error(L(424)),t),t=Lo(e,t,s,n,l);break e}else for(lt=nn(t.stateNode.containerInfo.firstChild),at=t,pe=!0,wt=null,n=ic(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yn(),s===l){t=Ht(e,t,n);break e}Ge(e,t,s,n)}t=t.child}return t;case 5:return cc(t),e===null&&Na(t),s=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,i=l.children,ha(s,l)?i=null:a!==null&&ha(s,a)&&(t.flags|=32),Ic(e,t),Ge(e,t,i,n),t.child;case 6:return e===null&&Na(t),null;case 13:return Rc(e,t,n);case 4:return fi(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Xn(t,null,s,n):Ge(e,t,s,n),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Nt(s,l),To(e,t,s,l,n);case 7:return Ge(e,t,t.pendingProps,n),t.child;case 8:return Ge(e,t,t.pendingProps.children,n),t.child;case 12:return Ge(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,a=t.memoizedProps,i=l.value,ie(Hs,s._currentValue),s._currentValue=i,a!==null)if(kt(a.value,i)){if(a.children===l.children&&!et.current){t=Ht(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){i=a.child;for(var u=o.firstContext;u!==null;){if(u.context===s){if(a.tag===1){u=Ot(-1,n&-n),u.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?u.next=u:(u.next=v.next,v.next=u),p.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),ba(a.return,n,t),o.lanes|=n;break}u=u.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(L(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),ba(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Ge(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,Qn(t,n),l=ht(l),s=s(l),t.flags|=1,Ge(e,t,s,n),t.child;case 14:return s=t.type,l=Nt(s,t.pendingProps),l=Nt(s.type,l),Po(e,t,s,l,n);case 15:return zc(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Nt(s,l),ks(e,t),t.tag=1,tt(s)?(e=!0,Ms(t)):e=!1,Qn(t,n),Pc(t,s,l),Sa(t,s,l,n),Ca(null,t,s,!0,e,n);case 19:return Fc(e,t,n);case 22:return $c(e,t,n)}throw Error(L(156,t.tag))};function ed(e,t){return Cu(e,t)}function km(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,n,s){return new km(e,t,n,s)}function Ti(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cm(e){if(typeof e=="function")return Ti(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ga)return 11;if(e===Ja)return 14}return 2}function an(e,t){var n=e.alternate;return n===null?(n=ft(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ts(e,t,n,s,l,a){var i=2;if(s=e,typeof e=="function")Ti(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Ln:return Nn(n.children,l,a,t);case Qa:i=8,l|=8;break;case Gl:return e=ft(12,n,t,l|2),e.elementType=Gl,e.lanes=a,e;case Jl:return e=ft(13,n,t,l),e.elementType=Jl,e.lanes=a,e;case Kl:return e=ft(19,n,t,l),e.elementType=Kl,e.lanes=a,e;case cu:return dl(n,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ou:i=10;break e;case uu:i=9;break e;case Ga:i=11;break e;case Ja:i=14;break e;case qt:i=16,s=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=ft(i,n,t,l),t.elementType=e,t.type=s,t.lanes=a,t}function Nn(e,t,n,s){return e=ft(7,e,s,t),e.lanes=n,e}function dl(e,t,n,s){return e=ft(22,e,s,t),e.elementType=cu,e.lanes=n,e.stateNode={isHidden:!1},e}function Hl(e,t,n){return e=ft(6,e,null,t),e.lanes=n,e}function Ul(e,t,n){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Em(e,t,n,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Pi(e,t,n,s,l,a,i,o,u){return e=new Em(e,t,n,o,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ft(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mi(a),e}function Tm(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dn,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function td(e){if(!e)return un;e=e._reactInternals;e:{if(En(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(tt(n))return tc(e,n,t)}return t}function nd(e,t,n,s,l,a,i,o,u){return e=Pi(n,s,!0,e,l,a,i,o,u),e.context=td(null),n=e.current,s=Je(),l=ln(n),a=Ot(s,l),a.callback=t??null,rn(n,a,l),e.current.lanes=l,Qr(e,l,s),nt(e,s),e}function pl(e,t,n,s){var l=t.current,a=Je(),i=ln(l);return n=td(n),t.context===null?t.context=n:t.pendingContext=n,t=Ot(a,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=rn(l,t,i),e!==null&&(_t(e,l,i,a),ws(e,l,i)),i}function Zs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bo(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Di(e,t){Bo(e,t),(e=e.alternate)&&Bo(e,t)}function Pm(){return null}var rd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Li(e){this._internalRoot=e}ml.prototype.render=Li.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));pl(e,t,null,null)};ml.prototype.unmount=Li.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kn(function(){pl(null,e,null,null)}),t[Vt]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var t=$u();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gt.length&&t!==0&&t<Gt[n].priority;n++);Gt.splice(n,0,e),n===0&&Au(e)}};function zi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ho(){}function Dm(e,t,n,s,l){if(l){if(typeof s=="function"){var a=s;s=function(){var p=Zs(i);a.call(p)}}var i=nd(t,s,e,0,null,!1,!1,"",Ho);return e._reactRootContainer=i,e[Vt]=i.current,Rr(e.nodeType===8?e.parentNode:e),kn(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var o=s;s=function(){var p=Zs(u);o.call(p)}}var u=Pi(e,0,!1,null,null,!1,!1,"",Ho);return e._reactRootContainer=u,e[Vt]=u.current,Rr(e.nodeType===8?e.parentNode:e),kn(function(){pl(t,u,n,s)}),u}function xl(e,t,n,s,l){var a=n._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var o=l;l=function(){var u=Zs(i);o.call(u)}}pl(t,i,e,l)}else i=Dm(n,t,e,l,s);return Zs(i)}Lu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=yr(t.pendingLanes);n!==0&&(Xa(t,n|1),nt(t,Ne()),!(ne&6)&&(tr=Ne()+500,pn()))}break;case 13:kn(function(){var s=Bt(e,1);if(s!==null){var l=Je();_t(s,e,1,l)}}),Di(e,1)}};Za=function(e){if(e.tag===13){var t=Bt(e,134217728);if(t!==null){var n=Je();_t(t,e,134217728,n)}Di(e,134217728)}};zu=function(e){if(e.tag===13){var t=ln(e),n=Bt(e,t);if(n!==null){var s=Je();_t(n,e,t,s)}Di(e,t)}};$u=function(){return se};Iu=function(e,t){var n=se;try{return se=e,t()}finally{se=n}};aa=function(e,t,n){switch(t){case"input":if(Zl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var l=ll(s);if(!l)throw Error(L(90));pu(s),Zl(s,l)}}}break;case"textarea":fu(e,n);break;case"select":t=n.value,t!=null&&Hn(e,!!n.multiple,t,!1)}};Nu=ki;bu=kn;var Lm={usingClientEntryPoint:!1,Events:[Jr,An,ll,vu,ju,ki]},mr={findFiberByHostInstance:gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zm={bundleType:mr.bundleType,version:mr.version,rendererPackageName:mr.rendererPackageName,rendererConfig:mr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_u(e),e===null?null:e.stateNode},findFiberByHostInstance:mr.findFiberByHostInstance||Pm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fs.isDisabled&&fs.supportsFiber)try{tl=fs.inject(zm),zt=fs}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lm;ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zi(t))throw Error(L(200));return Tm(e,t,null,n)};ot.createRoot=function(e,t){if(!zi(e))throw Error(L(299));var n=!1,s="",l=rd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Pi(e,1,!1,null,null,n,!1,s,l),e[Vt]=t.current,Rr(e.nodeType===8?e.parentNode:e),new Li(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=_u(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return kn(e)};ot.hydrate=function(e,t,n){if(!fl(t))throw Error(L(200));return xl(null,e,t,!0,n)};ot.hydrateRoot=function(e,t,n){if(!zi(e))throw Error(L(405));var s=n!=null&&n.hydratedSources||null,l=!1,a="",i=rd;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=nd(t,null,e,1,n??null,l,!1,a,i),e[Vt]=t.current,Rr(e),s)for(e=0;e<s.length;e++)n=s[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new ml(t)};ot.render=function(e,t,n){if(!fl(t))throw Error(L(200));return xl(null,e,t,!1,n)};ot.unmountComponentAtNode=function(e){if(!fl(e))throw Error(L(40));return e._reactRootContainer?(kn(function(){xl(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1};ot.unstable_batchedUpdates=ki;ot.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!fl(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return xl(e,t,n,!1,s)};ot.version="18.3.1-next-f1338f8080-20240426";function sd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sd)}catch(e){console.error(e)}}sd(),su.exports=ot;var $m=su.exports,Uo=$m;ql.createRoot=Uo.createRoot,ql.hydrateRoot=Uo.hydrateRoot;const Im=async e=>{const t=await fetch(`${e}/vincent-dindy/pianos`);if(!t.ok){const n=await t.json().catch(()=>({detail:"Erreur inconnue"}));throw new Error(n.detail||`Erreur ${t.status}`)}return t.json()},Am=async(e,t)=>{const n=await fetch(`${e}/vincent-dindy/reports`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const s=await n.json().catch(()=>({detail:"Erreur inconnue"}));throw new Error(s.detail||`Erreur ${n.status}`)}return n.json()},Rm=async(e,t,n)=>{const s=await fetch(`${e}/vincent-dindy/pianos/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok){const l=await s.json().catch(()=>({detail:"Erreur inconnue"}));throw new Error(l.detail||`Erreur ${s.status}`)}return s.json()},xs="https://assistant-gazelle-v5-api.onrender.com",$i=({currentUser:e})=>{const[t,n]=j.useState([]),[s,l]=j.useState(!0),[a,i]=j.useState(null),[o,u]=j.useState("nicolas"),[p,v]=j.useState(!1),[y,m]=j.useState(!1),[_,h]=j.useState(""),[w,C]=j.useState({key:"local",direction:"asc"}),[d,c]=j.useState("all"),[f,S]=j.useState(0),[b,E]=j.useState(new Set),T=j.useRef(null),[I,k]=j.useState(null),[P,V]=j.useState(""),[J,ee]=j.useState(""),[le,Ee]=j.useState(null),[ye,Oe]=j.useState(""),[z,B]=j.useState(null),[H,X]=j.useState(null),re=["Piano","Accompagnement","Pratique","Concert","Enseignement","Loisir"];j.useEffect(()=>{ve()},[]);const ve=async()=>{var N;try{l(!0),i(null),console.log(" Chargement des pianos depuis:",xs);const D=await Im(xs);console.log(" Donnes reues:",D),console.log(" Nombre de pianos:",D.count||((N=D.pianos)==null?void 0:N.length)||0),D.error?(console.error(" Erreur API:",D.message),i(D.message||"Erreur lors du chargement des pianos"),n([])):(n(D.pianos||[]),D.debug&&console.log(" Debug:",D.debug))}catch(D){console.error(" Erreur lors du chargement des pianos:",D),i(D.message||"Erreur lors du chargement des pianos"),n([])}finally{l(!1)}},ce=async(N,D)=>{try{const A={...D,updated_by:(e==null?void 0:e.email)||(e==null?void 0:e.name)||"Unknown"};await Rm(xs,N,A),console.log(" Piano sauvegard par",e==null?void 0:e.name,":",N,A)}catch(A){console.error(" Erreur lors de la sauvegarde:",A),alert(`Erreur lors de la sauvegarde: ${A.message}`),await ve()}},ze=N=>{const D=new Date(N);return Math.floor((new Date-D)/(1e3*60*60*24*30))},We=N=>{C(D=>({key:N,direction:D.key===N&&D.direction==="asc"?"desc":"asc"}))},rt=({columnKey:N})=>w.key!==N?r.jsx("span",{className:"text-gray-300 ml-1",children:""}):r.jsx("span",{className:"text-blue-600 ml-1",children:w.direction==="asc"?"":""}),Ct=({columnKey:N,children:D})=>r.jsx("th",{onClick:()=>We(N),className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:r.jsxs("div",{className:"flex items-center",children:[D,r.jsx(rt,{columnKey:N})]})}),te=j.useMemo(()=>{let N=[...t];return o==="nicolas"?p&&(N=N.filter(D=>D.status==="proposed"||D.status==="completed")):o==="technicien"&&(y&&(N=N.filter(D=>D.status==="proposed")),_.trim()&&(N=N.filter(D=>D.local.toLowerCase().includes(_.toLowerCase())))),d!=="all"&&(N=N.filter(D=>d===""?!D.usage:D.usage===d)),f>0&&(N=N.filter(D=>ze(D.dernierAccord)>=f)),N.sort((D,A)=>{switch(w.key){case"local":return w.direction==="asc"?D.local.localeCompare(A.local,void 0,{numeric:!0}):A.local.localeCompare(D.local,void 0,{numeric:!0});case"piano":return w.direction==="asc"?D.piano.localeCompare(A.piano):A.piano.localeCompare(D.piano);case"accord":const U=new Date(D.dernierAccord).getTime(),qe=new Date(A.dernierAccord).getTime();return w.direction==="asc"?U-qe:qe-U;case"mois":const de=ze(D.dernierAccord),fn=ze(A.dernierAccord);return w.direction==="asc"?de-fn:fn-de;default:return 0}}),N},[t,w,d,f,o,p,y,_]);j.useEffect(()=>{if(T.current&&te.length>=0){const N=b.size===te.length&&te.length>0,D=b.size>0&&b.size<te.length;T.current.checked=N,T.current.indeterminate=D}},[b.size,te.length]);const Te=async N=>{const D=t.find(U=>U.id===N);if(!D)return;let A;D.status==="normal"||!D.status?A="proposed":D.status==="proposed"?A="completed":D.status==="completed"&&(A="normal"),n(t.map(U=>U.id===N?{...U,status:A}:U)),await ce(N,{status:A})},$e=N=>{E(D=>{const A=new Set(D);return A.has(N)?A.delete(N):A.add(N),A})},Me=()=>E(new Set(te.map(N=>N.id))),mn=()=>E(new Set),we=async N=>{const D=Array.from(b),A=t.map(U=>b.has(U.id)?{...U,status:N}:U);n(A),E(new Set);for(const U of D)await ce(U,{status:N})},Pe=async N=>{const D=Array.from(b);n(t.map(A=>b.has(A.id)?{...A,usage:N}:A)),E(new Set);for(const A of D)await ce(A,{usage:N})},lr=N=>{I===N.id?k(null):(k(N.id),V(N.travail||""),ee(N.observations||""))},Tn=async N=>{const D=t.find(A=>A.id===N);if(D)try{const A={technician_name:"Technicien",client_name:"cole Vincent-d'Indy",date:new Date().toISOString().split("T")[0],report_type:"maintenance",description:`Travail effectu sur piano ${D.piano} (Srie: ${D.serie}) - Local: ${D.local}`,notes:D.aFaire?` faire: ${D.aFaire}

Travail: ${P}

Observations: ${J}`:`Travail: ${P}

Observations: ${J}`,hours_worked:null};await Am(xs,A),n(t.map(de=>de.id===N?{...de,travail:P,observations:J,status:"completed"}:de)),await ce(N,{travail:P,observations:J,status:"completed"});const U=te.findIndex(de=>de.id===N),qe=te[U+1];qe&&qe.status==="proposed"?(k(qe.id),V(qe.travail||""),ee(qe.observations||"")):k(null)}catch(A){console.error("Erreur lors de la sauvegarde:",A),alert("Erreur lors de la sauvegarde du rapport. Veuillez ressayer.")}},je={total:t.length,top:t.filter(N=>N.status==="top").length,proposed:t.filter(N=>N.status==="proposed"||N.aFaire&&N.aFaire.trim()!=="").length,completed:t.filter(N=>N.status==="completed").length},yt=N=>b.has(N.id)?"bg-purple-200":N.status==="top"?"bg-amber-200":N.status==="completed"?"bg-green-200":N.status==="proposed"||N.aFaire&&N.aFaire.trim()!==""?"bg-yellow-200":"bg-white";return o==="technicien"?s?r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"text-lg text-gray-600",children:"Chargement des pianos..."})})}):a?r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center bg-white p-6 rounded-lg shadow",children:[r.jsx("div",{className:"text-red-600 mb-2",children:" Erreur"}),r.jsx("div",{className:"text-sm text-gray-600",children:a}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Ressayer"})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-100",children:[r.jsxs("div",{className:"bg-white shadow p-3 sticky top-0 z-10",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-lg font-bold",children:" Tourne"}),r.jsxs("div",{className:"flex gap-2 text-xs",children:[je.top>0&&r.jsxs("span",{className:"px-2 py-1 bg-amber-200 rounded",children:[je.top," Top"]}),r.jsxs("span",{className:"px-2 py-1 bg-yellow-200 rounded",children:[je.proposed,"  faire"]}),r.jsxs("span",{className:"px-2 py-1 bg-green-200 rounded",children:[je.completed," "]})]})]}),r.jsx("div",{className:"flex mt-2 text-xs",children:["nicolas","technicien"].map(N=>r.jsx("button",{onClick:()=>u(N),className:`flex-1 py-2 ${o===N?"bg-blue-500 text-white rounded":"text-gray-500"}`,children:N==="nicolas"?"Nick":"Technicien"},N))}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[r.jsxs("button",{onClick:()=>m(!1),className:`flex-1 py-1 px-2 text-xs rounded ${y?"bg-gray-100":"bg-blue-500 text-white"}`,children:["Tous (",je.total,")"]}),r.jsxs("button",{onClick:()=>m(!0),className:`flex-1 py-1 px-2 text-xs rounded ${y?"bg-blue-500 text-white":"bg-gray-100"}`,children:[" faire (",je.proposed,")"]})]}),r.jsx("div",{className:"mt-2",children:r.jsx("input",{type:"text",placeholder:"Rechercher par local (ex: 301)",value:_,onChange:N=>h(N.target.value),className:"w-full px-3 py-2 border rounded text-sm"})})]}),r.jsx("div",{className:"p-2 space-y-2",children:te.length===0?r.jsx("div",{className:"bg-white rounded-lg p-6 text-center text-gray-500",children:y?"Aucun piano  faire.":"Aucun piano trouv."}):te.map(N=>{const D=I===N.id,A=ze(N.dernierAccord);return r.jsxs("div",{className:`rounded-lg shadow overflow-hidden ${N.status==="top"?"bg-amber-100":N.status==="completed"?"bg-green-100":N.status==="proposed"||N.aFaire&&N.aFaire.trim()!==""?"bg-yellow-100":"bg-white"}`,children:[r.jsxs("div",{onClick:()=>lr(N),className:"p-3 flex justify-between items-center cursor-pointer active:bg-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg font-bold text-gray-700",children:N.local}),r.jsx("span",{className:"text-gray-600",children:N.piano})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[N.status==="completed"&&r.jsx("span",{className:"text-green-600",children:""}),r.jsxs("span",{className:`text-sm ${A>=6?"text-orange-500":"text-gray-400"}`,children:[A,"m"]}),r.jsx("span",{className:"text-gray-400",children:D?"":""})]})]}),D&&r.jsxs("div",{className:"border-t bg-gray-50 p-3 space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Srie:"})," ",N.serie]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Type:"})," ",N.type==="D"?"Droit":"Queue"]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Dernier:"})," ",N.dernierAccord]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Usage:"})," ",N.usage||"-"]})]}),N.aFaire&&r.jsxs("div",{className:"bg-yellow-100 p-2 rounded text-sm",children:[r.jsx("span",{className:"font-medium",children:"  faire:"})," ",N.aFaire]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Travail effectu"}),r.jsx("textarea",{value:P,onChange:U=>V(U.target.value),className:"w-full border rounded p-2 text-sm h-20",placeholder:"Accord, rglages..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Observations"}),r.jsx("textarea",{value:J,onChange:U=>ee(U.target.value),className:"w-full border rounded p-2 text-sm h-20",placeholder:"Problmes, recommandations..."})]}),r.jsx("button",{onClick:()=>Tn(N.id),className:"w-full bg-green-500 text-white py-3 rounded-lg font-medium active:bg-green-600",children:" Sauvegarder  Suivant"})]})]},N.id)})})]}):s?r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"text-lg text-gray-600",children:"Chargement des pianos..."})})}):a?r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center bg-white p-6 rounded-lg shadow",children:[r.jsx("div",{className:"text-red-600 mb-2",children:" Erreur"}),r.jsx("div",{className:"text-sm text-gray-600",children:a}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Ressayer"})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-100 p-4",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow mb-4",children:[r.jsx("div",{className:"p-4 border-b",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Vincent-d'Indy"}),r.jsxs("div",{className:"flex gap-4 mt-2 text-sm flex-wrap",children:[r.jsxs("span",{className:"px-2 py-1 bg-gray-200 rounded",children:[je.total," pianos"]}),je.top>0&&r.jsxs("span",{className:"px-2 py-1 bg-amber-200 rounded font-medium",children:[je.top," Top"]}),r.jsxs("span",{className:"px-2 py-1 bg-yellow-200 rounded",children:[je.proposed,"  faire"]}),r.jsxs("span",{className:"px-2 py-1 bg-green-200 rounded",children:[je.completed," complts"]})]})]}),r.jsx("button",{onClick:ve,className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 border rounded",title:"Rafrachir les donnes depuis l'API",children:" Rafrachir"})]})}),r.jsx("div",{className:"flex",children:[{key:"nicolas",label:"Nick"},{key:"technicien",label:"Technicien"}].map(N=>r.jsx("button",{onClick:()=>{u(N.key),E(new Set)},className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 ${o===N.key?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:bg-gray-50"}`,children:N.label},N.key))})]}),o==="nicolas"&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4 space-y-3",children:[r.jsxs("div",{className:"flex gap-3 items-center",children:[r.jsxs("button",{onClick:()=>v(!1),className:`px-4 py-2 rounded text-sm font-medium ${p?"bg-gray-100 hover:bg-gray-200":"bg-blue-500 text-white"}`,children:[" Tous les pianos (",je.total,")"]}),r.jsxs("button",{onClick:()=>v(!0),className:`px-4 py-2 rounded text-sm font-medium ${p?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[" Projet de tourne (",je.proposed+je.completed,")"]})]}),r.jsxs("div",{className:"flex gap-4 flex-wrap items-center border-t pt-3",children:[r.jsxs("select",{value:d,onChange:N=>c(N.target.value),className:"border rounded px-2 py-1 text-sm",children:[r.jsx("option",{value:"all",children:"Tous usages"}),re.map(N=>r.jsx("option",{value:N,children:N},N)),r.jsx("option",{value:"",children:"Sans usage"})]}),r.jsxs("select",{value:f,onChange:N=>S(parseInt(N.target.value)),className:"border rounded px-2 py-1 text-sm",children:[r.jsx("option",{value:0,children:"Tous"}),r.jsx("option",{value:3,children:"3+ mois"}),r.jsx("option",{value:6,children:"6+ mois"}),r.jsx("option",{value:12,children:"12+ mois"})]})]}),r.jsxs("div",{className:"flex gap-3 flex-wrap items-center border-t pt-3",children:[r.jsx("button",{onClick:Me,className:"px-3 py-1 rounded text-sm bg-gray-200 hover:bg-gray-300",children:" Tous"}),r.jsx("button",{onClick:mn,className:"px-3 py-1 rounded text-sm bg-gray-200 hover:bg-gray-300",children:" Aucun"}),b.size>0&&r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"text-purple-600 font-medium text-sm",children:[b.size," sel."]}),r.jsx("button",{onClick:()=>we("top"),className:"px-3 py-1 rounded text-sm bg-amber-400",children:" Top"}),r.jsx("button",{onClick:()=>we("proposed"),className:"px-3 py-1 rounded text-sm bg-yellow-400",children:"  faire"}),r.jsx("button",{onClick:()=>we("normal"),className:"px-3 py-1 rounded text-sm bg-white border",children:" Retirer"}),r.jsxs("select",{onChange:N=>{N.target.value&&Pe(N.target.value)},className:"border rounded px-2 py-1 text-sm",value:"",children:[r.jsx("option",{value:"",children:"Usage..."}),re.map(N=>r.jsx("option",{value:N,children:N},N))]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[o==="nicolas"&&r.jsx("th",{className:"px-2 py-3 w-10",children:r.jsx("input",{ref:T,type:"checkbox",onChange:N=>N.target.checked?Me():mn(),className:"rounded"})}),r.jsx(Ct,{columnKey:"local",children:"Local"}),r.jsx(Ct,{columnKey:"piano",children:"Piano"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"# Srie"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usage"}),r.jsx(Ct,{columnKey:"mois",children:"Mois"}),o==="nicolas"&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-yellow-50",children:" faire (Nick)"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-blue-50",children:"Travail (Tech)"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase bg-purple-50",children:"Observations (Tech)"})]}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:te.map(N=>{const D=ze(N.dernierAccord);return r.jsxs("tr",{className:`${yt(N)} ${o==="nicolas"?"cursor-pointer hover:opacity-80":""}`,onClick:()=>{o==="nicolas"&&Te(N.id)},children:[o==="nicolas"&&r.jsx("td",{className:"px-2 py-3 text-center",onClick:A=>A.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:b.has(N.id),onChange:()=>$e(N.id),className:"rounded"})}),r.jsx("td",{className:"px-3 py-3 text-sm font-medium",children:N.local}),r.jsx("td",{className:"px-3 py-3 text-sm",children:N.piano}),r.jsx("td",{className:"px-3 py-3 text-sm text-gray-500 font-mono",children:N.serie}),r.jsx("td",{className:"px-3 py-3 text-sm text-gray-500",children:N.usage||"-"}),r.jsx("td",{className:`px-3 py-3 text-sm font-medium ${D>=12?"text-red-600":D>=6?"text-orange-500":"text-green-600"}`,children:D}),o==="nicolas"&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-3 py-3 bg-yellow-50",onClick:A=>A.stopPropagation(),children:le===N.id?r.jsx("input",{type:"text",value:ye,onChange:A=>Oe(A.target.value),onKeyDown:async A=>{A.key==="Enter"&&(n(t.map(U=>U.id===N.id?{...U,aFaire:ye}:U)),Ee(null),Oe(""),await ce(N.id,{aFaire:ye}))},onBlur:async()=>{n(t.map(U=>U.id===N.id?{...U,aFaire:ye}:U)),Ee(null);const A=ye;Oe(""),await ce(N.id,{aFaire:A})},className:"border rounded px-2 py-1 text-sm w-full",placeholder:"Instructions...",autoFocus:!0}):r.jsx("span",{className:"text-sm cursor-text",onClick:()=>{Ee(N.id),Oe(N.aFaire||"")},children:N.aFaire||r.jsx("span",{className:"text-gray-400",children:"Cliquer..."})})}),r.jsx("td",{className:"px-3 py-3 bg-blue-50",onClick:A=>A.stopPropagation(),children:z===N.id?r.jsx("textarea",{value:P,onChange:A=>V(A.target.value),onBlur:async()=>{n(t.map(U=>U.id===N.id?{...U,travail:P}:U)),B(null);const A=P;V(""),await ce(N.id,{travail:A})},className:"border rounded px-2 py-1 text-xs w-full",placeholder:"Travail effectu...",rows:"2",autoFocus:!0}):r.jsx("span",{className:"text-xs cursor-text block",onClick:()=>{B(N.id),V(N.travail||"")},children:N.travail||r.jsx("span",{className:"text-gray-400",children:"Cliquer..."})})}),r.jsx("td",{className:"px-3 py-3 bg-purple-50",onClick:A=>A.stopPropagation(),children:H===N.id?r.jsx("textarea",{value:J,onChange:A=>ee(A.target.value),onBlur:async()=>{n(t.map(U=>U.id===N.id?{...U,observations:J}:U)),X(null);const A=J;ee(""),await ce(N.id,{observations:A})},className:"border rounded px-2 py-1 text-xs w-full",placeholder:"Observations...",rows:"2",autoFocus:!0}):r.jsx("span",{className:"text-xs cursor-text block",onClick:()=>{X(N.id),ee(N.observations||"")},children:N.observations||r.jsx("span",{className:"text-gray-400",children:"Cliquer..."})})})]}),r.jsxs("td",{className:"px-3 py-3 text-sm",children:[N.status==="top"&&r.jsx("span",{className:"px-2 py-1 bg-amber-400 rounded text-xs font-medium",children:"Top"}),N.status==="proposed"&&r.jsx("span",{className:"px-2 py-1 bg-yellow-400 rounded text-xs",children:" faire"}),N.status==="completed"&&r.jsx("span",{className:"px-2 py-1 bg-green-400 rounded text-xs",children:"Complt"}),N.status==="normal"&&r.jsx("span",{className:"text-gray-400",children:"-"})]})]},N.id)})})]}),te.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucun piano."})]}),r.jsxs("div",{className:"mt-4 bg-white rounded-lg shadow p-3 flex gap-4 text-sm flex-wrap",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-3 bg-white border rounded"})," Normal"]},"legend-normal"),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-3 bg-amber-200 rounded"})," Top (priorit leve)"]},"legend-top"),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-3 bg-yellow-200 rounded"}),"  faire"]},"legend-proposed"),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-3 bg-green-200 rounded"})," Complt"]},"legend-completed")]})]})},Xt={admin:{name:"Administrateur",email:"asutton@piano-tek.com",permissions:["*"],dashboards:["inventaire","commissions","stats","admin","sync_gazelle","tournees"],technicianName:"allan"},nick:{name:"Nick (Gestionnaire)",email:"nlessard@piano-tek.com",permissions:["view_inventory","manage_own_inventory","create_tours","view_tours","use_assistant"],dashboards:["inventaire","tournees"]},louise:{name:"Louise (Assistante)",email:"info@piano-tek.com",permissions:["view_inventory","edit_inventory","view_tours","use_assistant"],dashboards:["inventaire","tournees"]},jeanphilippe:{name:"Jean-Philippe (Technicien)",email:"jpreny@gmail.com",permissions:["view_inventory","edit_inventory","view_tours","use_assistant"],dashboards:["inventaire","tournees"]}};function Fm(e){if(!e)return"admin";const t=e.toLowerCase();for(const[n,s]of Object.entries(Xt))if(s.email.toLowerCase()===t)return n;return"admin"}const Om=[{id:1,name:"Allan",email:Xt.admin.email,role:"admin",pin:"6342"},{id:2,name:"Louise",email:Xt.louise.email,role:"admin",pin:"6343"},{id:3,name:"Nick",email:Xt.nick.email,role:"technician",pin:"6344"},{id:4,name:"JP",email:Xt.jeanphilippe.email,role:"technician",pin:"6345"}];function Mm({onLogin:e}){const[t,n]=j.useState(null),[s,l]=j.useState(""),[a,i]=j.useState(""),[o,u]=j.useState("/festive-tree.png"),[p,v]=j.useState(!0),y=m=>{if(m.preventDefault(),!t){i("Veuillez slectionner un utilisateur");return}s===t.pin?(localStorage.setItem("currentUser",JSON.stringify(t)),e(t)):(i("PIN incorrect"),l(""))};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl max-w-5xl w-full overflow-hidden",children:r.jsxs("div",{className:"grid md:grid-cols-2",children:[p&&r.jsxs("div",{className:"relative bg-gradient-to-br from-green-50 via-white to-red-50 hidden md:block",children:[r.jsx("img",{src:o,alt:"Sapin de Nol dcor",className:"h-full w-full object-cover",onError:()=>{o==="/festive-tree.png"?u("/estive-tree.png"):v(!1)}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/65 via-white/40 to-white/20"}),r.jsx("div",{className:"absolute top-4 left-4 bg-white/80 backdrop-blur-sm px-3 py-2 rounded-lg text-sm font-semibold text-green-800 shadow",children:"Joyeuses ftes !"})]}),r.jsxs("div",{className:"p-8 md:p-10",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Vincent-d'Indy"}),r.jsx("p",{className:"text-gray-600",children:"Dashboard Techniciens"})]}),r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Qui tes-vous ?"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:Om.map(m=>r.jsxs("button",{type:"button",onClick:()=>{n(m),i("")},className:`p-4 rounded-lg border-2 transition-all ${(t==null?void 0:t.id)===m.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("div",{className:"text-sm font-medium text-gray-800",children:m.name}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:m.role==="admin"?"Admin":"Tech"})]},m.id))})]}),t&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"pin",className:"block text-sm font-medium text-gray-700 mb-2",children:"Entrez votre PIN"}),r.jsx("input",{type:"password",id:"pin",value:s,onChange:m=>l(m.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl tracking-widest",placeholder:"",maxLength:4,autoFocus:!0})]}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:a}),r.jsx("button",{type:"submit",disabled:!t||s.length!==4,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Se connecter"})]}),r.jsx("div",{className:"mt-6 text-center text-xs text-gray-500",children:r.jsx("p",{children:"Slectionnez votre nom et entrez votre PIN  4 chiffres"})})]})]})})})}const Vm="https://assistant-gazelle-v5-api.onrender.com";function Bm({currentUser:e}){const[t,n]=j.useState([]),[s,l]=j.useState(!0),[a,i]=j.useState(null);j.useEffect(()=>{o();const m=setInterval(o,3e4);return()=>clearInterval(m)},[]);const o=async()=>{try{l(!0);const _=await(await fetch(`${Vm}/vincent-dindy/activity?limit=50`)).json();n(_.activities||[]),i(null)}catch(m){console.error("Erreur chargement activits:",m),i(m.message)}finally{l(!1)}},u=m=>{if(!m)return"Date inconnue";const _=new Date(m),w=new Date-_,C=Math.floor(w/6e4),d=Math.floor(w/36e5),c=Math.floor(w/864e5);return C<1?" l'instant":C<60?`Il y a ${C} min`:d<24?`Il y a ${d}h`:c<7?`Il y a ${c}j`:_.toLocaleDateString("fr-CA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},p=m=>{const h={selected:{color:"bg-yellow-100 text-yellow-800",text:"Slectionn"},completed:{color:"bg-green-100 text-green-800",text:"Complt"},normal:{color:"bg-gray-100 text-gray-800",text:"Normal"},proposed:{color:"bg-blue-100 text-blue-800",text:"Propos"}}[m]||{color:"bg-gray-100 text-gray-600",text:m};return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.color}`,children:h.text})},v=m=>m?m.split("@")[0].charAt(0).toUpperCase():"??",y=m=>{const _=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-red-500"],h=(m==null?void 0:m.split("").reduce((w,C)=>w+C.charCodeAt(0),0))||0;return _[h%_.length]};return s&&t.length===0?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Chargement de l'historique..."})}):r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Tableau de bord - Historique d'activit"}),r.jsx("p",{className:"text-gray-600",children:"Suivi des modifications effectues sur les pianos"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total modifications"}),r.jsx("div",{className:"text-3xl font-bold text-gray-800",children:t.length})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Dernire modification"}),r.jsx("div",{className:"text-lg font-semibold text-gray-800",children:t.length>0?u(t[0].updated_at):"Aucune"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Utilisateurs actifs"}),r.jsx("div",{className:"text-3xl font-bold text-gray-800",children:new Set(t.map(m=>m.updated_by)).size})]})]}),a&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:["Erreur: ",a]}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Activits rcentes (",t.length,")"]}),r.jsx("button",{onClick:o,className:"px-3 py-1 text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 rounded transition-colors",children:" Actualiser"})]}),r.jsx("div",{className:"divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:t.length===0?r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"Aucune activit enregistre pour le moment"}):t.map((m,_)=>{var h;return r.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-full ${y(m.updated_by)} flex items-center justify-center text-white font-bold flex-shrink-0`,children:v(m.updated_by)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium text-gray-900",children:((h=m.updated_by)==null?void 0:h.split("@")[0])||"Utilisateur inconnu"}),r.jsx("span",{className:"text-gray-500 text-sm",children:"a modifi le piano"}),r.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-0.5 rounded",children:m.piano_id})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 mb-2",children:[r.jsx("span",{children:u(m.updated_at)}),m.status&&p(m.status)]}),m.observations&&r.jsxs("div",{className:"text-sm text-gray-700 bg-gray-50 px-3 py-2 rounded border-l-2 border-blue-400",children:[" ",m.observations]})]})]})},`${m.piano_id}-${_}`)})})]})]})}const hs="https://assistant-gazelle-v5-api.onrender.com";function Hm({currentUser:e}){const[t,n]=j.useState([]),[s,l]=j.useState([]),[a,i]=j.useState(!0),[o,u]=j.useState(null),[p,v]=j.useState(null);j.useEffect(()=>{y();const h=setInterval(y,6e4);return()=>clearInterval(h)},[]);const y=async()=>{try{i(!0);const w=await(await fetch(`${hs}/alertes-rv/check`)).json();n(w.unconfirmed||[]);const d=await(await fetch(`${hs}/alertes-rv/alerts`)).json();l(d.alerts||[]);const f=await(await fetch(`${hs}/alertes-rv/stats`)).json();u(f)}catch(h){console.error("Erreur chargement alertes RV:",h)}finally{i(!1)}},m=async h=>{if(confirm(`Envoyer une alerte  ${h.client_name} (${h.client_email}) ?`)){v(h.id);try{(await fetch(`${hs}/alertes-rv/send/${h.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appointment_id:h.id,client_name:h.client_name,client_email:h.client_email,appointment_date:h.appointment_date,alert_sent_by:e.email})})).ok?(alert(" Alerte envoye avec succs !"),y()):alert(" Erreur lors de l'envoi de l'alerte")}catch(w){console.error("Erreur envoi alerte:",w),alert(" Erreur lors de l'envoi de l'alerte")}finally{v(null)}}},_=h=>new Date(h).toLocaleString("fr-CA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a&&t.length===0?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Chargement des alertes RV..."})}):r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Alertes de Rendez-vous Non Confirms"}),r.jsx("p",{className:"text-gray-600",children:"Suivi et notification des clients qui n'ont pas confirm leur RV"})]}),o&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"RV non confirms"}),r.jsx("div",{className:"text-3xl font-bold text-red-600",children:t.length})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Alertes envoyes (7j)"}),r.jsx("div",{className:"text-3xl font-bold text-gray-800",children:o.alerts_last_7_days})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total alertes"}),r.jsx("div",{className:"text-3xl font-bold text-gray-800",children:o.total_alerts_sent})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Taux de confirmation"}),r.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[Math.round(o.by_status.confirmed/o.total_alerts_sent*100),"%"]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[" Rendez-vous ncessitant une alerte (",t.length,")"]}),r.jsx("button",{onClick:y,className:"px-3 py-1 text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 rounded transition-colors",children:" Actualiser"})]}),r.jsx("div",{className:"divide-y divide-gray-200",children:t.length===0?r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:" Aucun RV non confirm ncessitant une alerte"}):t.map(h=>r.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("span",{className:"font-medium text-gray-900",children:h.client_name}),r.jsx("span",{className:"text-sm text-gray-500",children:""}),r.jsx("span",{className:"text-sm text-gray-600",children:h.client_email}),r.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:["Technicien: ",h.technician]})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:[" RV prvu : ",_(h.appointment_date),r.jsxs("span",{className:"ml-3 text-red-600",children:["(Non confirm depuis ",Math.ceil((new Date-new Date(h.created_at))/(1e3*60*60*24))," jours)"]})]})]}),r.jsx("button",{onClick:()=>m(h),disabled:p===h.id,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:p===h.id?" Envoi...":" Envoyer alerte"})]})},h.id))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[" Historique des alertes envoyes (",s.length,")"]})}),r.jsx("div",{className:"divide-y divide-gray-200 max-h-[500px] overflow-y-auto",children:s.length===0?r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"Aucune alerte envoye pour le moment"}):s.map(h=>r.jsx("div",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold flex-shrink-0",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium text-gray-900",children:h.client_name}),r.jsx("span",{className:"text-sm text-gray-500",children:"a reu une alerte"}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.status==="confirmed"?"bg-green-100 text-green-700":h.status==="cancelled"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:h.status==="confirmed"?"Confirm":h.status==="cancelled"?"Annul":"Envoy"})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:[" ",h.client_email,"   RV: ",_(h.appointment_date),"   Envoy par ",h.alert_sent_by.split("@")[0],"   ",_(h.alert_sent_at)]})]})]})},h.id))})]})]})}const Um=({data:e=[],filename:t="export",columns:n=null,className:s=""})=>{const[l,a]=j.useState(!1),o=n||["code_produit","nom","categorie","description","unite_mesure","prix_unitaire","fournisseur","has_commission","commission_rate","variant_group","variant_label","display_order","is_active"],u=(v,y)=>{if(!v||v.length===0)return"";const m=y.map(w=>({code_produit:"Code Produit",nom:"Nom",categorie:"Catgorie",description:"Description",unite_mesure:"Unit",prix_unitaire:"Prix Unitaire",fournisseur:"Fournisseur",has_commission:"Avec Commission",commission_rate:"Taux Commission (%)",variant_group:"Groupe Variantes",variant_label:"Label Variante",display_order:"Ordre Affichage",is_active:"Actif"})[w]||w),_=v.map(w=>y.map(C=>{let d=w[C];return d==null?d="":typeof d=="boolean"?d=d?"Oui":"Non":typeof d=="number"?d=d:(d=String(d).replace(/"/g,'""'),(d.includes(",")||d.includes('"')||d.includes(`
`))&&(d=`"${d}"`)),d}));return[m.join(","),..._.map(w=>w.join(","))].join(`
`)},p=()=>{if(!e||e.length===0){alert("Aucune donne  exporter");return}a(!0);try{const v=u(e,o),y="\uFEFF",m=new Blob([y+v],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a"),h=URL.createObjectURL(m);_.setAttribute("href",h),_.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),_.style.visibility="hidden",document.body.appendChild(_),_.click(),document.body.removeChild(_),setTimeout(()=>URL.revokeObjectURL(h),100)}catch(v){console.error("Erreur lors de l'export:",v),alert("Erreur lors de l'export: "+v.message)}finally{a(!1)}};return r.jsx("button",{onClick:p,disabled:l||!e||e.length===0,className:`
        px-4 py-2 rounded-lg font-medium transition-colors
        ${l||!e||e.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 active:bg-green-800"}
        ${s}
      `,title:!e||e.length===0?"Aucune donne  exporter":"Exporter en CSV",children:l?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"inline-block animate-spin mr-2",children:""}),"Export en cours..."]}):r.jsxs(r.Fragment,{children:[" Exporter CSV (",(e==null?void 0:e.length)||0," produits)"]})})},Ie="https://assistant-gazelle-v5-api.onrender.com",Pt=[{id:"usr_ofYggsCDt2JAVeNP",name:"Allan",username:"allan"},{id:"usr_ReUSmIJmBF86ilY1",name:"Jean-Philippe",username:"jeanphilippe"},{id:"usr_HcCiFk7o0vZ9xAI0",name:"Nick",username:"nicolas"}],Wl=({currentUser:e})=>{const[t,n]=j.useState([]),[s,l]=j.useState([]),[a,i]=j.useState(!0),[o,u]=j.useState(null),[p,v]=j.useState("inventaire"),[y,m]=j.useState(""),[_,h]=j.useState(new Set),[w,C]=j.useState({}),[d,c]=j.useState([]),[f,S]=j.useState(!1),[b,E]=j.useState(null),[T,I]=j.useState(""),[k,P]=j.useState(null),[V,J]=j.useState(!1),[ee,le]=j.useState(new Set),[Ee,ye]=j.useState(null),[Oe,z]=j.useState("produit"),[B,H]=j.useState(!1),[X,re]=j.useState([]),[ve,ce]=j.useState([]),[ze,We]=j.useState("duplicates"),[rt,Ct]=j.useState(null),[te,Te]=j.useState(!1),[$e,Me]=j.useState(new Set),[mn,we]=j.useState("Services"),[Pe,lr]=j.useState("service"),[Tn,je]=j.useState(!1),[yt,N]=j.useState(0),[D,A]=j.useState(window.innerWidth<=768);j.useEffect(()=>{const x=()=>A(window.innerWidth<=768);return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const U=async()=>{var x,$;try{i(!0);const F=await fetch(`${Ie}/inventaire/catalogue`);if(!F.ok)throw new Error("Erreur chargement catalogue");const q=await F.json(),Z={};q.produits.forEach(W=>{const ae={};Pt.forEach(_e=>{ae[_e.username]=0}),Z[W.code_produit]={id:W.code_produit,code_produit:W.code_produit,name:W.nom,original_name:W.nom,sku:W.code_produit,category:W.categorie||"Sans catgorie",categorie:W.categorie,variant_group:W.variant_group,variant_label:W.variant_label,prix_unitaire:W.prix_unitaire,has_commission:W.has_commission,commission_rate:W.commission_rate,type_produit:W.type_produit,display_order:W.display_order||0,is_active:W.is_active!==!1,quantities:ae}}),console.log(" === DBUT CHARGEMENT INVENTAIRES ==="),console.log(" Ordre TECHNICIENS:",Pt.map(W=>`${W.name} (${W.username})`).join(", "));for(const W of Pt)try{console.log(` Chargement pour: ${W.name} (username: ${W.username})`);const ae=await fetch(`${Ie}/inventaire/stock/${W.name}`);if(ae.ok){const _e=await ae.json();console.log(` Rponse API: technicien="${_e.technicien}", ${((x=_e.inventaire)==null?void 0:x.length)||0} items`),(_e.inventaire||[]).slice(0,3).forEach(ct=>{console.log(`    ${ct.code_produit}: ${ct.quantite_stock} units - ASSIGN  "${W.username}"`)}),($=_e.inventaire)==null||$.forEach(ct=>{Z[ct.code_produit]&&(Z[ct.code_produit].quantities[W.username]=ct.quantite_stock||0,(ct.code_produit==="PROD-4"||ct.code_produit==="PROD-33")&&console.log(`    ASSIGNATION: ${ct.code_produit}  quantities["${W.username}"] = ${ct.quantite_stock}`))})}}catch(ae){console.error(` Erreur chargement inventaire ${W.name}:`,ae)}console.log(" === FIN CHARGEMENT INVENTAIRES ==="),console.log(" Vrification quantits finales:"),["PROD-4","PROD-33"].forEach(W=>{const ae=Z[W];ae&&(console.log(`   ${W}:`),console.log(`     Allan (quantities.allan) = ${ae.quantities.allan}`),console.log(`     Nick (quantities.nicolas) = ${ae.quantities.nicolas}`),console.log(`     Jean-Philippe (quantities.jeanphilippe) = ${ae.quantities.jeanphilippe}`))});const Q=Object.values(Z);Q.sort((W,ae)=>{const _e=Number(W.display_order)||999999,Qe=Number(ae.display_order)||999999;return _e-Qe}),n(Q),c(Q)}catch(F){u(F.message)}finally{i(!1)}},qe=async()=>{try{const x=await fetch(`${Ie}/inventaire/transactions?limit=50`);if(!x.ok)throw new Error("Erreur chargement transactions");const $=await x.json();l($.transactions||[])}catch(x){console.error("Erreur transactions:",x)}};j.useEffect(()=>{U(),qe()},[]);const de=async(x,$,F)=>{var Z;const q=parseInt(F)||0;n(O=>O.map(Q=>Q.code_produit===x?{...Q,quantities:{...Q.quantities,[$]:q}}:Q));try{if(!(await fetch(`${Ie}/inventaire/stock`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code_produit:x,technicien:((Z=Pt.find(Q=>Q.username===$))==null?void 0:Z.name)||"Allan",quantite_stock:q,type_transaction:"ajustement",motif:"Ajustement manuel"})})).ok)throw await U(),new Error("Erreur mise  jour");C(Q=>({...Q,[x+$]:!0})),setTimeout(()=>{C(Q=>{const W={...Q};return delete W[x+$],W})},1e3)}catch(O){await U(),alert("Erreur: "+O.message)}},fn=async()=>{if(y.trim())try{if(!(await fetch(`${Ie}/inventaire/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:y,username:(e==null?void 0:e.name)||"Utilisateur"})})).ok)throw new Error("Erreur envoi commentaire");alert("Commentaire envoy, Slack a t notifi."),m("")}catch(x){alert("Erreur: "+x.message)}},hl=()=>{const x={};return t.filter($=>$.is_active!==!1).filter($=>$.type_produit!=="service").forEach($=>{const F=$.categorie||"Sans catgorie";x[F]||(x[F]=[]),x[F].push($)}),Object.keys(x).forEach($=>{x[$].sort((F,q)=>{const Z=Number(F.display_order)||999999,O=Number(q.display_order)||999999;return Z-O})}),x},gl=x=>{h($=>{const F=new Set($);return F.has(x)?F.delete(x):F.add(x),F})},Yr=(x,$)=>{E($),x.dataTransfer.effectAllowed="move"},yl=x=>{x.preventDefault(),x.dataTransfer.dropEffect="move"},g=(x,$)=>{if(x.preventDefault(),!b||b.code_produit===$.code_produit)return;const F=d.findIndex(Q=>Q.code_produit===b.code_produit),q=d.findIndex(Q=>Q.code_produit===$.code_produit);if(F===-1||q===-1)return;const Z=[...d],[O]=Z.splice(F,1);Z.splice(q,0,O),Z.forEach((Q,W)=>{Q.display_order=W+1}),c(Z),S(!0),E(null)},G=()=>{E(null)},K=async()=>{try{if(!(await fetch(`${Ie}/inventaire/catalogue/batch-order`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({products:d.map($=>({code_produit:$.code_produit,display_order:$.display_order}))})})).ok)throw new Error("Erreur sauvegarde");S(!1),await U(),alert(`Ordre sauvegard pour ${d.length} produits`)}catch(x){alert("Erreur: "+x.message)}},M=T?d.filter(x=>{var $,F,q,Z;return(($=x.name)==null?void 0:$.toLowerCase().includes(T.toLowerCase()))||((F=x.code_produit)==null?void 0:F.toLowerCase().includes(T.toLowerCase()))||((q=x.category)==null?void 0:q.toLowerCase().includes(T.toLowerCase()))||((Z=x.variant_group)==null?void 0:Z.toLowerCase().includes(T.toLowerCase()))}):d;if(a)return r.jsx("div",{className:"p-8 text-center",children:r.jsx("div",{className:"text-gray-500",children:"Chargement..."})});if(o)return r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:["Erreur: ",o]})});const Se=hl(),he=(e==null?void 0:e.role)==="admin",Et=(x=>({"asutton@piano-tek.com":"allan","nlessard@piano-tek.com":"nicolas","jpreny@gmail.com":"jeanphilippe"})[x==null?void 0:x.toLowerCase()]||(x==null?void 0:x.split("@")[0])||"allan")(e==null?void 0:e.email);return console.log(" DEBUG InventaireDashboard - Colonne Verte:",{userEmail:e==null?void 0:e.email,userName:e==null?void 0:e.name,mappedUsername:Et,isAdmin:he,availableUsernames:Pt.map(x=>x.username)}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Inventaire"}),r.jsx("div",{className:"text-sm text-gray-600",children:(e==null?void 0:e.name)||"Utilisateur"})]}),r.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[r.jsx("button",{onClick:()=>v("inventaire"),className:`px-4 py-2 font-medium ${p==="inventaire"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Inventaire"}),r.jsx("button",{onClick:()=>v("transactions"),className:`px-4 py-2 font-medium ${p==="transactions"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Transactions"}),he&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{v("sync")},className:`px-4 py-2 font-medium ${p==="sync"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:" Sync Gazelle"}),r.jsx("button",{onClick:()=>{v("admin"),c([...t]),le(new Set),ye(null)},className:`px-4 py-2 font-medium ${p==="admin"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Admin"})]})]}),p==="inventaire"&&r.jsxs("div",{children:[r.jsxs("div",{className:`mb-4 bg-blue-50 border border-blue-200 rounded-lg ${D?"p-3":"p-4"}`,children:[r.jsxs("label",{className:`block ${D?"text-xs":"text-sm"} font-medium text-gray-700 mb-2`,children:[" Commentaire rapide ",!D&&"(notifie le CTO via Slack)"]}),r.jsxs("div",{className:`flex ${D?"flex-col":"flex-row"} gap-2`,children:[r.jsx("input",{type:"text",value:y,onChange:x=>m(x.target.value),onKeyDown:x=>x.key==="Enter"&&fn(),placeholder:D?"Commentaire...":"Ex: Besoin urgent de coupelles brunes...",className:`flex-1 border rounded ${D?"px-2 py-2 text-base":"px-3 py-2 text-sm"}`}),r.jsx("button",{onClick:fn,className:`${D?"w-full px-4 py-2.5":"px-4 py-2"} bg-blue-600 text-white rounded hover:bg-blue-700 font-medium ${D?"text-base":"text-sm"}`,children:"Envoyer"})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-auto",style:{maxHeight:D?"80vh":"70vh"},children:r.jsxs("table",{className:"min-w-full border-collapse",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:`${D?"px-2 py-2":"px-4 py-3"} text-left text-xs font-medium text-gray-500 uppercase border-b sticky left-0 bg-gray-50 z-20`,children:"Produit"}),Pt.map(x=>D&&!he&&x.username!==Et?null:r.jsx("th",{className:`${D?"px-2 py-2":"px-4 py-3"} text-center text-xs font-medium text-gray-500 uppercase border-b`,children:D?x.name.substring(0,4):x.name},x.username))]})}),r.jsx("tbody",{children:Object.entries(Se).map(([x,$])=>r.jsxs(Ha.Fragment,{children:[r.jsx("tr",{className:"bg-gray-100 hover:bg-gray-200 cursor-pointer sticky",style:{top:D?"40px":"48px",zIndex:9},children:r.jsxs("td",{colSpan:D&&!he?2:Pt.length+1,className:`${D?"px-2 py-1.5":"px-4 py-2"} font-bold text-gray-800 border-b ${D?"text-sm":""}`,onClick:()=>gl(x),children:[_.has(x)?"":""," ",x]})}),!_.has(x)&&$.map(F=>r.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[r.jsxs("td",{className:`${D?"px-2 py-2":"px-4 py-3"} text-sm text-gray-900 sticky left-0 bg-white border-r font-medium`,style:{minWidth:D?"150px":"200px"},children:[r.jsxs("div",{className:D?"text-xs":"text-sm",children:[F.name,F.variant_label&&r.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",F.variant_label,")"]})]}),r.jsx("div",{className:"text-xs text-gray-400",children:F.code_produit})]}),Pt.map(q=>{var ae;if(D&&!he&&q.username!==Et)return null;const Z=((ae=F.quantities)==null?void 0:ae[q.username])||0,O=q.username===Et,Q=F.code_produit+q.username,W=w[Q];return r.jsx("td",{className:`${D?"px-2 py-2":"px-4 py-3"} text-center`,children:r.jsx("input",{type:"number",min:"0",value:Z,onChange:_e=>de(F.code_produit,q.username,_e.target.value),onFocus:_e=>_e.target.select(),onClick:_e=>_e.target.select(),className:`${D?"w-16 text-base":"w-20 text-sm"} px-2 py-1 text-center border rounded ${O?"bg-green-50 border-green-300 font-bold":"border-gray-300"} ${W?"bg-green-200":""}`,style:W?{transition:"background-color 0.3s"}:{}})},q.username)})]},F.code_produit))]},x))})]})})]}),p==="transactions"&&r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produit"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Technicien"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantit"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Motif"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(x=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:new Date(x.created_at).toLocaleDateString("fr-CA")}),r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:x.code_produit}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:x.technicien}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs ${x.type_transaction==="ajout"?"bg-green-100 text-green-700":x.type_transaction==="retrait"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:x.type_transaction})}),r.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:[x.quantite>0?"+":"",x.quantite]}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:x.motif||"-"})]},x.id))})]}),s.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune transaction"})]}),p==="admin"&&he&&r.jsxs("div",{children:[ee.size>0&&r.jsx("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:r.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type:"}),r.jsxs("select",{value:Oe,onChange:x=>{z(x.target.value),x.target.value==="fourniture"&&H(!1)},className:"border rounded px-3 py-2 text-sm",children:[r.jsx("option",{value:"produit",children:"Produit"}),r.jsx("option",{value:"service",children:"Service"}),r.jsx("option",{value:"fourniture",children:"Fourniture"})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:B,onChange:x=>H(x.target.checked),disabled:Oe==="fourniture",className:"w-4 h-4"}),r.jsx("span",{className:Oe==="fourniture"?"text-gray-400":"text-gray-700",children:"Commissionnable (10%)"})]})}),r.jsxs("button",{onClick:async()=>{if(ee.size===0){alert("Slectionnez au moins un produit");return}try{const x=await fetch(`${Ie}/inventaire/catalogue/batch-type-commission`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({codes_produit:Array.from(ee),type_produit:Oe,has_commission:B})});if(!x.ok)throw new Error("Erreur mise  jour");const $=await x.json();alert($.message),await U(),le(new Set),ye(null)}catch(x){alert("Erreur: "+x.message)}},disabled:ee.size===0,className:`px-4 py-2 rounded font-medium ${ee.size>0?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Appliquer  ",ee.size," produit",ee.size>1?"s":""]})]})}),r.jsxs("div",{className:"mb-4 flex justify-between items-center flex-wrap gap-4",children:[r.jsx("input",{type:"text",value:T,onChange:x=>I(x.target.value),placeholder:"Rechercher: nom, code, catgorie, variante...",className:"border rounded px-3 py-2 text-sm w-80"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Um,{data:d,filename:"catalogue_admin"}),r.jsx("button",{onClick:K,className:`px-4 py-2 rounded font-medium ${f?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!f,children:" Sauvegarder l'ordre"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-auto",children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-center",children:r.jsx("input",{type:"checkbox",checked:ee.size===M.length&&M.length>0,onChange:x=>{x.target.checked?le(new Set(M.map($=>$.code_produit))):le(new Set),ye(null)},className:"w-4 h-4",title:"Slectionner tous les produits"})}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ordre"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nom"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Catgorie"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),r.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Commission"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Variante"}),Pt.map(x=>r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:x.name},x.username)),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.sort((x,$)=>(x.display_order||0)-($.display_order||0)).map((x,$)=>{const F=ee.has(x.code_produit),q=x.type_produit||"(non dfini)",Z=x.has_commission||!1;return r.jsxs("tr",{draggable:!0,onDragStart:O=>Yr(O,x),onDragOver:yl,onDrop:O=>g(O,x),onDragEnd:G,className:`hover:bg-gray-50 cursor-move ${(b==null?void 0:b.code_produit)===x.code_produit?"opacity-50":""} ${x.is_active?"":"bg-gray-100 line-through text-gray-400"} ${F?"bg-blue-50":""}`,children:[r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("input",{type:"checkbox",checked:F,onChange:O=>{const Q=new Set(ee);if(O.nativeEvent.shiftKey&&Ee!==null){const W=[...M].sort((Qe,ct)=>(Qe.display_order||0)-(ct.display_order||0)),ae=Math.min(Ee,$),_e=Math.max(Ee,$);for(let Qe=ae;Qe<=_e;Qe++)O.target.checked?Q.add(W[Qe].code_produit):Q.delete(W[Qe].code_produit)}else O.target.checked?Q.add(x.code_produit):Q.delete(x.code_produit);le(Q),ye($)},className:"w-4 h-4",onClick:O=>O.stopPropagation()})}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",value:x.display_order||0,onChange:O=>{const Q=parseInt(O.target.value)||0,W=d.map(ae=>ae.code_produit===x.code_produit?{...ae,display_order:Q}:ae);c(W),S(!0)},className:`w-20 border-2 rounded px-3 py-1 text-sm font-medium ${T?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-300"}`,title:"Modifier la position - Cliquez pour changer l'ordre d'affichage",placeholder:"Position"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("button",{onClick:()=>{if($===0)return;const O=[...d],Q=O[$-1].display_order;O[$-1].display_order=O[$].display_order,O[$].display_order=Q,c(O),S(!0)},disabled:$===0,className:"text-gray-600 hover:text-blue-600 disabled:text-gray-300 text-xs",children:""}),r.jsx("button",{onClick:()=>{if($===M.length-1)return;const O=[...d],Q=O[$+1].display_order;O[$+1].display_order=O[$].display_order,O[$].display_order=Q,c(O),S(!0)},disabled:$===M.length-1,className:"text-gray-600 hover:text-blue-600 disabled:text-gray-300 text-xs",children:""})]})]})}),r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:x.code_produit}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:x.name}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:x.category}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs ${x.type_produit?x.type_produit==="service"?"bg-purple-100 text-purple-700":x.type_produit==="fourniture"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700":"bg-gray-100 text-gray-500 italic"}`,children:q})}),r.jsx("td",{className:"px-4 py-3 text-center text-sm",children:x.type_produit==="fourniture"?r.jsx("span",{className:"text-gray-400 text-xs",children:"- (bloqu)"}):Z?r.jsx("span",{className:"text-green-600 font-medium",children:" 10%"}):r.jsx("span",{className:"text-gray-400",children:""})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:x.variant_group&&r.jsxs("div",{children:[r.jsx("strong",{children:x.variant_group}),x.variant_label&&` (${x.variant_label})`]})}),Pt.map(O=>{var _e;const Q=((_e=x.quantities)==null?void 0:_e[O.username])||0,W=x.code_produit+O.username,ae=w[W];return r.jsx("td",{className:"px-4 py-3 text-sm text-center",children:r.jsx("input",{type:"number",min:"0",value:Q,onChange:Qe=>de(x.code_produit,O.username,Qe.target.value),onFocus:Qe=>Qe.target.select(),onClick:Qe=>Qe.target.select(),className:`w-20 px-2 py-1 text-center border rounded text-sm ${ae?"bg-green-200 border-green-400":"border-gray-300"}`,style:ae?{transition:"background-color 0.3s"}:{}})},O.username)}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{P({...x}),J(!0)},className:"text-blue-600 hover:text-blue-800 font-medium text-xs",title:"Modifier le produit",children:""}),r.jsx("button",{onClick:async()=>{try{const O=await fetch(`${Ie}/inventaire/catalogue/${x.code_produit}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!x.is_active})});if(!O.ok){const Q=await O.json().catch(()=>({detail:"Erreur inconnue"}));throw new Error(Q.detail||"Erreur toggle")}await U()}catch(O){alert("Erreur: "+O.message)}},className:`font-medium text-xs ${x.is_active?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"}`,title:x.is_active?"Masquer de l'inventaire technicien (reste visible en Admin)":"Afficher dans l'inventaire technicien",children:x.is_active?"":""}),r.jsx("button",{onClick:async()=>{const O=x.is_active!==!1,Q=!O;if(window.confirm(O?` Archiver "${x.name}" (${x.code_produit}) ?

Le produit sera masqu de l'inventaire mais les donnes seront conserves.`:` Ractiver "${x.name}" (${x.code_produit}) ?

Le produit redeviendra visible dans l'inventaire.`))try{if(!(await fetch(`${Ie}/inventaire/catalogue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code_produit:x.code_produit,is_active:Q})})).ok)throw new Error("Erreur mise  jour statut");alert(Q?" Produit ractiv":" Produit archiv"),await U()}catch(W){alert("Erreur: "+W.message)}},className:`font-medium text-lg ${x.is_active!==!1?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"}`,title:x.is_active!==!1?"Archiver (masquer)":"Ractiver",children:x.is_active!==!1?"":""})]})})]},x.code_produit)})})]}),M.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucun produit trouv"})]})]}),p==="sync"&&he&&r.jsxs("div",{children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:" Synchronisation Gazelle"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Associez vos produits locaux avec Gazelle Master Service Items et synchronisez les prix"})]}),r.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[r.jsx("button",{onClick:()=>We("duplicates"),className:`px-4 py-2 font-medium ${ze==="duplicates"?"border-b-2 border-purple-500 text-purple-600":"text-gray-600 hover:text-gray-800"}`,children:" Doublons suggrs"}),r.jsx("button",{onClick:()=>We("import"),className:`px-4 py-2 font-medium ${ze==="import"?"border-b-2 border-purple-500 text-purple-600":"text-gray-600 hover:text-gray-800"}`,children:" Catalogue Gazelle"})]}),ze==="duplicates"&&r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4 flex gap-3 flex-wrap",children:[r.jsx("button",{onClick:async()=>{try{Te(!0);const x=await fetch(`${Ie}/inventaire/catalogue/sync-gazelle-smart?force=false&max_age_hours=24`,{method:"POST"});if(!x.ok){const F=await x.json().catch(()=>({detail:"Erreur inconnue"}));throw new Error(F.detail||`Erreur ${x.status}`)}const $=await x.json();alert(` Synchronisation intelligente termine!

 ${$.updated} produits mis  jour
 ${$.skipped||0} produits dj  jour (synchronisation non ncessaire)
 ${$.total} produits associs  Gazelle
`+($.errors?`
 ${$.errors.length} erreurs`:"")),await U()}catch(x){alert(" Erreur: "+x.message)}finally{Te(!1)}},disabled:te,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-semibold shadow-md",children:te?" Synchronisation...":" Sync auto (produits dj associs)"}),r.jsx("button",{onClick:async()=>{if(confirm(` Importer TOUS les items du Master Service List (MSL) ?

Cela va crer/mettre  jour tous les produits dans le catalogue local.
Ncessaire pour le calcul des commissions et la mise  jour automatique.`))try{Te(!0);const x=await fetch(`${Ie}/inventaire/catalogue/import-all-msl`,{method:"POST"});if(!x.ok){const F=await x.json().catch(()=>({detail:"Erreur inconnue"}));throw new Error(F.detail||`Erreur ${x.status}`)}const $=await x.json();alert(` Import MSL termin!

 ${$.created} nouveaux produits crs
 ${$.updated} produits mis  jour
 ${$.total_msl} items dans le MSL
`+($.errors?`
 ${$.errors.length} erreurs`:"")),await U()}catch(x){alert(" Erreur: "+x.message)}finally{Te(!1)}},disabled:te,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-semibold shadow-md",children:te?" Import...":" Importer tous les items MSL"}),r.jsx("button",{onClick:async()=>{try{Te(!0);const x=await fetch(`${Ie}/inventaire/gazelle/find-duplicates?threshold=0.75`);if(!x.ok){const Q=await x.json().catch(()=>({detail:"Erreur inconnue"}));throw new Error(Q.detail||`Erreur ${x.status}`)}const $=await x.json(),F=$.duplicates||[],q=$.count!==void 0?$.count:F.length,Z=$.gazelle_available||!1;ce(F);let O="";q>0?(O=` ${q} doublon${q>1?"s":""} potentiel${q>1?"s":""} dtect${q>1?"s":""}`,Z||(O+=`
(Comparaison uniquement dans le catalogue local - Gazelle non configur)`)):(O=" Aucun doublon dtect avec un seuil de similarit de 75%",Z||(O+=`
(Comparaison uniquement dans le catalogue local - Gazelle non configur)`)),alert(O)}catch(x){alert("Erreur: "+x.message)}finally{Te(!1)}},disabled:te,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:te?" Analyse...":" Dtecter nouveaux doublons"}),r.jsx("span",{className:"text-sm text-gray-600 self-center",children:ve.length>0&&`${ve.length} doublons trouvs`})]}),ve.length===0?r.jsx("div",{className:"text-center py-12 text-gray-500",children:'Cliquez sur "Dtecter les doublons" pour trouver les produits similaires entre votre catalogue et Gazelle'}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[" ",r.jsx("strong",{children:"Glissez-dposez"})," un produit Gazelle (violet) sur un produit local (bleu) pour les fusionner"]})}),ve.map((x,$)=>x.gazelle_id?r.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"border-2 border-blue-300 bg-blue-50 rounded p-3 relative",onDragOver:F=>F.preventDefault(),onDrop:async F=>{if(F.preventDefault(),rt&&rt.gazelle_id){try{if(!(await fetch(`${Ie}/inventaire/catalogue/map-gazelle`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code_produit:x.local_code,gazelle_product_id:rt.gazelle_id,update_prices:!0})})).ok)throw new Error("Erreur association");ce(ve.filter((Z,O)=>O!==$)),await U()}catch(q){alert(" Erreur: "+q.message)}Ct(null)}},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs font-bold rounded",children:"LOCAL"}),r.jsx("span",{className:"font-mono text-xs text-gray-600",children:x.local_code})]}),r.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:x.local_nom}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Prix: ",(x.local_price||0).toFixed(2),"$"]})]}),r.jsxs("div",{draggable:!0,onDragStart:()=>Ct(x),onDragEnd:()=>Ct(null),className:"border-2 border-purple-300 bg-purple-50 rounded p-3 cursor-move hover:shadow-lg transition-shadow",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs font-bold rounded",children:"GAZELLE"}),r.jsxs("span",{className:"text-xs font-bold text-green-600",children:[(x.similarity||0).toFixed(1),"%"]})]})}),r.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:x.gazelle_nom||"N/A"}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Prix: ",(x.gazelle_price||0).toFixed(2),"$"]}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Diff: ",(x.price_diff||0).toFixed(2),"$"]})]})]}),r.jsxs("div",{className:"mt-3 flex gap-2",children:[r.jsx("button",{onClick:async()=>{try{if(!(await fetch(`${Ie}/inventaire/catalogue/map-gazelle`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code_produit:x.local_code,gazelle_product_id:x.gazelle_id,update_prices:!0})})).ok)throw new Error("Erreur");ce(ve.filter((q,Z)=>Z!==$)),await U()}catch(F){alert(" Erreur: "+F.message)}},className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:" Associer"}),r.jsx("button",{onClick:()=>ce(ve.filter((F,q)=>q!==$)),className:"px-3 py-1 text-sm bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:" Ignorer"})]})]},$):null)]})]}),ze==="import"&&r.jsxs("div",{children:[r.jsx("button",{onClick:async()=>{try{Te(!0);const $=await(await fetch(`${Ie}/inventaire/gazelle/products`)).json();re($.products||[]),alert(`${$.count} produits chargs`)}catch(x){alert("Erreur: "+x.message)}finally{Te(!1)}},disabled:te,className:"mb-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:te?" Chargement...":" Charger Master Service Items"}),X.length===0?r.jsx("div",{className:"text-center py-12 text-gray-500",children:"Chargez les Master Service Items pour voir tous les produits Gazelle"}):r.jsxs("div",{children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-3 text-sm text-blue-800",children:[" ",r.jsx("strong",{children:"Import automatique"})," : L'ID Gazelle sera utilis comme code produit (masqu dans l'interface)"]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded p-4 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[r.jsxs("span",{className:"font-semibold text-sm",children:["Configuration batch (",$e.size," slectionns)"]}),r.jsx("button",{onClick:()=>{$e.size===X.length?Me(new Set):Me(new Set(X.map(x=>x.id)))},className:"text-sm text-blue-600 hover:underline",children:$e.size===X.length?" Tout dslectionner":" Tout slectionner"})]}),r.jsxs("div",{className:"flex gap-3 flex-wrap items-center",children:[r.jsxs("select",{value:mn,onChange:x=>we(x.target.value),className:"px-3 py-2 border rounded",children:[r.jsx("option",{value:"Services",children:"Services"}),r.jsx("option",{value:"Pices",children:"Pices"}),r.jsx("option",{value:"Fournitures",children:"Fournitures"}),r.jsx("option",{value:"Accessoires",children:"Accessoires"})]}),r.jsxs("select",{value:Pe,onChange:x=>lr(x.target.value),className:"px-3 py-2 border rounded",children:[r.jsx("option",{value:"service",children:"Service (pas d'inventaire)"}),r.jsx("option",{value:"produit",children:"Produit (avec inventaire)"}),r.jsx("option",{value:"fourniture",children:"Fourniture (inventaire, pas commission)"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:Tn,onChange:x=>je(x.target.checked)}),r.jsx("span",{className:"text-sm",children:"Commission"})]}),r.jsx("input",{type:"number",value:yt,onChange:x=>N(parseFloat(x.target.value)||0),placeholder:"Taux %",min:"0",max:"100",step:"0.1",className:"w-24 px-3 py-2 border rounded"}),r.jsxs("button",{onClick:async()=>{if($e.size===0){alert(" Aucun produit slectionn");return}const x=X.filter(q=>$e.has(q.id));let $=0,F=[];for(const q of x)try{const Z=await fetch(`${Ie}/inventaire/catalogue/import-gazelle`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gazelle_product_id:q.id,has_commission:Tn,commission_rate:yt,categorie:mn,type_produit:Pe})});if(Z.ok)$++;else{const O=await Z.json().catch(()=>({detail:"Erreur inconnue"}));F.push(`${q.name_fr}: ${O.detail}`)}}catch(Z){F.push(`${q.name_fr}: ${Z.message}`)}re(X.filter(q=>!$e.has(q.id))),Me(new Set),alert(` Import termin!

${$} produits imports
`+(F.length>0?`
 ${F.length} erreurs:
${F.slice(0,5).join(`
`)}`:"")),await U()},disabled:$e.size===0,className:"ml-auto px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 font-semibold disabled:opacity-50",children:[" Importer slection (",$e.size,")"]})]})]}),r.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:X.map((x,$)=>r.jsx("div",{className:`border rounded p-3 ${$e.has(x.id)?"bg-blue-50 border-blue-300":"bg-white"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",checked:$e.has(x.id),onChange:F=>{const q=new Set($e);F.target.checked?q.add(x.id):q.delete(x.id),Me(q)},className:"mt-1"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:x.name_fr}),x.description_fr&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.description_fr}),r.jsxs("div",{className:"flex gap-3 mt-2 text-xs",children:[r.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:["Prix: ",(parseFloat(x.amount||0)/100).toFixed(2),"$"]}),r.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded",children:["Groupe: ",x.group_name_fr||"N/A"]})]})]}),r.jsx("button",{onClick:()=>{re(X.filter((q,Z)=>Z!==$));const F=new Set($e);F.delete(x.id),Me(F)},className:"px-2 py-1 text-gray-400 hover:text-red-600 text-lg",title:"Masquer de la liste",children:""})]})},$))})]})]})]}),V&&k&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Modifier: ",k.code_produit]}),r.jsx("button",{onClick:()=>{J(!1),P(null)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du produit"}),r.jsx("input",{type:"text",value:k.name||"",onChange:x=>P({...k,name:x.target.value}),className:"w-full border rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgorie"}),r.jsxs("select",{value:k.category||"",onChange:x=>P({...k,category:x.target.value}),className:"w-full border rounded px-3 py-2",children:[r.jsx("option",{value:"Cordes",children:"Cordes"}),r.jsx("option",{value:"Feutres",children:"Feutres"}),r.jsx("option",{value:"Accessoire",children:"Accessoire"}),r.jsx("option",{value:"Service",children:"Service"}),r.jsx("option",{value:"Fourniture",children:"Fourniture"}),r.jsx("option",{value:"Produit",children:"Produit"}),r.jsx("option",{value:"Frais",children:"Frais"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix unitaire ($)"}),r.jsx("input",{type:"number",step:"0.01",value:k.prix_unitaire||"",onChange:x=>P({...k,prix_unitaire:parseFloat(x.target.value)||0}),className:"w-full border rounded px-3 py-2"})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("input",{type:"checkbox",id:"has_commission",checked:k.has_commission||!1,onChange:x=>P({...k,has_commission:x.target.checked,commission_rate:x.target.checked?k.commission_rate||15:0}),className:"w-4 h-4"}),r.jsx("label",{htmlFor:"has_commission",className:"text-sm font-medium text-gray-700",children:"Activer la commission"})]}),k.has_commission&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Taux de commission (%)"}),r.jsx("input",{type:"number",step:"0.01",value:k.commission_rate||0,onChange:x=>P({...k,commission_rate:parseFloat(x.target.value)||0}),className:"w-full border rounded px-3 py-2"})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Groupe de variantes"}),r.jsx("input",{type:"text",value:k.variant_group||"",onChange:x=>P({...k,variant_group:x.target.value}),placeholder:"Ex: Cordes Piano",className:"w-full border rounded px-3 py-2"})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label de variante"}),r.jsx("input",{type:"text",value:k.variant_label||"",onChange:x=>P({...k,variant_label:x.target.value}),placeholder:"Ex: Do#3",className:"w-full border rounded px-3 py-2"})]})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"is_active",checked:k.is_active!==!1,onChange:x=>P({...k,is_active:x.target.checked}),className:"w-4 h-4"}),r.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-700",children:"Produit actif"})]})})]}),r.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[r.jsx("button",{onClick:()=>{J(!1),P(null)},className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"Annuler"}),r.jsx("button",{onClick:async()=>{try{if(!(await fetch(`${Ie}/inventaire/catalogue/${k.code_produit}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nom:k.name,categorie:k.category,prix_unitaire:k.prix_unitaire,has_commission:k.has_commission,commission_rate:k.commission_rate,variant_group:k.variant_group,variant_label:k.variant_label,is_active:k.is_active})})).ok)throw new Error("Erreur lors de la sauvegarde");J(!1),P(null),await U(),alert("Produit mis  jour avec succs")}catch(x){alert("Erreur: "+x.message)}},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Enregistrer"})]})]})})]})},fr="https://assistant-gazelle-v5-api.onrender.com";function Wm({currentUser:e}){const[t,n]=j.useState("deductions"),[s,l]=j.useState([]),[a,i]=j.useState(!0),[o,u]=j.useState([]),[p,v]=j.useState([]),[y,m]=j.useState(!0),[_,h]=j.useState([]),[w,C]=j.useState(!0),[d,c]=j.useState(null);j.useEffect(()=>{t==="deductions"?f():t==="alerts"?S():t==="imports"&&b()},[t]);const f=async()=>{try{i(!0);const P=await(await fetch(`${fr}/inventaire/deduction-logs?limit=100`)).json();l(P.logs||[]),c(null)}catch(k){console.error("Erreur chargement logs dduction:",k),c(k.message)}finally{i(!1)}},S=async()=>{try{m(!0);const[k,P]=await Promise.all([fetch(`${fr}/alertes-rv/pending`),fetch(`${fr}/alertes-rv/history?limit=50`)]),V=await k.json(),J=await P.json();u(V.alerts||[]),v(J.history||[]),c(null)}catch(k){console.error("Erreur chargement alertes:",k),c(k.message)}finally{m(!1)}},b=async()=>{try{C(!0);const P=await(await fetch(`${fr}/inventaire/deduction-summary?days=30`)).json();h(P.summary||[]),c(null)}catch(k){console.error("Erreur chargement rsum imports:",k),c(k.message)}finally{C(!1)}},E=k=>k?new Date(k).toLocaleDateString("fr-CA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue",T=k=>{const V={success:{color:"bg-green-100 text-green-800",icon:"",text:"Succs"},error:{color:"bg-red-100 text-red-800",icon:"",text:"Erreur"},skipped:{color:"bg-yellow-100 text-yellow-800",icon:"",text:"Ignor"},pending:{color:"bg-orange-100 text-orange-800",icon:"",text:"En attente"},resolved:{color:"bg-gray-100 text-gray-600",icon:"",text:"Rsolu"}}[k]||{color:"bg-gray-100 text-gray-600",icon:"?",text:k};return r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${V.color}`,children:[V.icon," ",V.text]})},I=async k=>{try{if(!(await fetch(`${fr}/alertes-rv/resolve/${k}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resolved_by:(e==null?void 0:e.email)||"admin"})})).ok)throw new Error("Erreur lors de la rsolution");await S()}catch(P){alert("Erreur: "+P.message)}};return r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:" Notifications & Logs"}),r.jsx("p",{className:"text-gray-600",children:"Suivi des dductions d'inventaire, alertes RV et importations"})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsxs("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{onClick:()=>n("deductions"),className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${t==="deductions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Dductions d'inventaire"}),r.jsxs("button",{onClick:()=>n("alerts"),className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${t==="alerts"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[" Alertes RV",o.length>0&&r.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:o.length})]}),r.jsx("button",{onClick:()=>n("imports"),className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${t==="imports"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Rsum d'imports"})]})}),d&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:["Erreur: ",d]}),t==="deductions"&&r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Logs de dduction (",s.length,")"]}),r.jsx("button",{onClick:f,className:"px-3 py-1 text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 rounded transition-colors",children:" Actualiser"})]}),r.jsx("div",{className:"divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:a?r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"Chargement..."}):s.length===0?r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"Aucune dduction enregistre pour le moment"}):s.map((k,P)=>r.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:r.jsx("div",{className:"flex items-start gap-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[T(k.status),r.jsx("span",{className:"text-sm text-gray-600",children:E(k.created_at)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Technicien:"}),r.jsx("span",{className:"ml-2 font-medium text-gray-900",children:k.technicien})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Facture:"}),r.jsx("span",{className:"ml-2 font-mono text-xs bg-gray-100 px-2 py-0.5 rounded",children:k.invoice_id})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Service:"}),r.jsx("span",{className:"ml-2 text-gray-900",children:k.service_name})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Matriel:"}),r.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[k.material_code," - ",k.material_name]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Quantit:"}),r.jsxs("span",{className:"ml-2 font-bold text-red-600",children:["-",k.quantity_deducted]})]})]}),k.error_message&&r.jsxs("div",{className:"mt-2 text-xs text-red-600 bg-red-50 px-3 py-2 rounded",children:[" ",k.error_message]})]})})},k.id||P))})]}),t==="alerts"&&r.jsxs("div",{className:"space-y-6",children:[o.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-orange-50",children:r.jsxs("h3",{className:"text-lg font-semibold text-orange-800",children:[" Alertes en attente (",o.length,")"]})}),r.jsx("div",{className:"divide-y divide-gray-200",children:o.map((k,P)=>r.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[T("pending"),r.jsx("span",{className:"font-medium text-gray-900",children:k.technician_name}),r.jsxs("span",{className:"text-sm text-gray-600",children:["(",k.technician_email,")"]})]}),r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-medium",children:k.appointment_count})," RV non confirm(s)"]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Envoy: ",E(k.sent_at)]})]}),r.jsx("button",{onClick:()=>I(k.id),className:"px-3 py-1 text-sm bg-green-50 hover:bg-green-100 text-green-700 rounded transition-colors",children:" Marquer rsolu"})]})},k.id||P))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Historique des alertes (",p.length,")"]}),r.jsx("button",{onClick:S,className:"px-3 py-1 text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 rounded transition-colors",children:" Actualiser"})]}),r.jsx("div",{className:"divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:y?r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"Chargement..."}):p.length===0?r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"Aucun historique d'alerte pour le moment"}):p.map((k,P)=>r.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:r.jsx("div",{className:"flex items-start gap-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[T(k.status||"resolved"),r.jsx("span",{className:"font-medium text-gray-900",children:k.technician_name}),r.jsxs("span",{className:"text-sm text-gray-600",children:["(",k.technician_email,")"]})]}),r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-medium",children:k.appointment_count})," RV non confirm(s)"]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Envoy: ",E(k.sent_at),k.resolved_at&&r.jsxs(r.Fragment,{children:["  Rsolu: ",E(k.resolved_at)]})]})]})})},k.id||P))})]})]}),t==="imports"&&r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Rsum des imports (30 derniers jours)"}),r.jsx("button",{onClick:b,className:"px-3 py-1 text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 rounded transition-colors",children:" Actualiser"})]}),r.jsx("div",{className:"divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:w?r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"Chargement..."}):_.length===0?r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"Aucun import enregistr pour le moment"}):_.map((k,P)=>{var V;return r.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:r.jsx("div",{className:"flex items-start gap-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsxs("span",{className:"font-medium text-gray-900",children:[" ",k.sync_date]}),k.errors_count>0&&r.jsxs("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:[k.errors_count," erreur(s)"]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"bg-blue-50 rounded p-3",children:[r.jsx("div",{className:"text-xs text-blue-600 mb-1",children:"Factures traites"}),r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:k.invoices_processed||0})]}),r.jsxs("div",{className:"bg-green-50 rounded p-3",children:[r.jsx("div",{className:"text-xs text-green-600 mb-1",children:"Dductions"}),r.jsx("div",{className:"text-2xl font-bold text-green-900",children:k.total_deductions||0})]}),r.jsxs("div",{className:"bg-purple-50 rounded p-3",children:[r.jsx("div",{className:"text-xs text-purple-600 mb-1",children:"Techniciens"}),r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:((V=k.techniciens_affected)==null?void 0:V.length)||0})]})]}),k.techniciens_affected&&k.techniciens_affected.length>0&&r.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:["Techniciens affects: ",k.techniciens_affected.join(", ")]})]})})},k.id||P)})})]})]})}const gs="https://assistant-gazelle-v5-api.onrender.com",xr=[{id:"usr_ofYggsCDt2JAVeNP",name:"Allan",username:"allan"},{id:"usr_ReUSmIJmBF86ilY1",name:"Jean-Philippe",username:"jeanphilippe"},{id:"usr_HcCiFk7o0vZ9xAI0",name:"Nick",username:"nicolas"}],ld=({currentUser:e,allowComment:t=!0})=>{const[n,s]=j.useState([]),[l,a]=j.useState(!0),[i,o]=j.useState(""),[u,p]=j.useState(new Set),[v,y]=j.useState({}),[m,_]=j.useState(window.innerWidth<=768),w=(b=>({"asutton@piano-tek.com":"allan","nlessard@piano-tek.com":"nicolas","jpreny@gmail.com":"jeanphilippe"})[b==null?void 0:b.toLowerCase()]||(b==null?void 0:b.split("@")[0])||"test")(e==null?void 0:e.email);e==null||e.email,console.log(" DEBUG Colonne Verte:",{userEmail:e==null?void 0:e.email,mappedUsername:w,availableUsernames:xr.map(b=>b.username)}),j.useEffect(()=>{const b=()=>_(window.innerWidth<=768);return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),j.useEffect(()=>{C()},[]);const C=async()=>{var b;try{a(!0);const E=await fetch(`${gs}/inventaire/catalogue`);if(!E.ok)throw new Error("Erreur chargement catalogue");const T=await E.json(),I={};T.produits.forEach(V=>{const J={};xr.forEach(ee=>{J[ee.username]=0}),I[V.code_produit]={id:V.code_produit,code_produit:V.code_produit,name:V.nom,category:V.categorie||"Sans catgorie",variant_label:V.variant_label,display_order:V.display_order||0,is_active:V.is_active!==!1,quantities:J}});const k={Nicolas:"nicolas",Nick:"nicolas",nicolas:"nicolas","nicolas@example.com":"nicolas",Allan:"allan",allan:"allan","allan@example.com":"allan","Jean-Philippe":"jeanphilippe",jeanphilippe:"jeanphilippe","jeanphilippe@example.com":"jeanphilippe"},P=await fetch(`${gs}/inventaire/techniciens/all`);P.ok&&((b=(await P.json()).inventory)==null||b.forEach(J=>{var ee,le;if(I[J.code_produit]){let Ee=k[J.technicien];if(!Ee&&((ee=J.technicien)!=null&&ee.includes("@"))){const ye=J.technicien.split("@")[0].toLowerCase();Ee=k[ye]||ye}Ee||(Ee=(le=J.technicien)==null?void 0:le.toLowerCase().replace("-","")),I[J.code_produit].quantities[Ee]!==void 0&&(I[J.code_produit].quantities[Ee]=J.quantite_stock||0)}})),s(Object.values(I).filter(V=>V.is_active))}catch(E){console.error("Erreur chargement inventaire:",E)}finally{a(!1)}},d=async(b,E,T)=>{const I=parseInt(T)||0;s(P=>P.map(V=>V.code_produit===b?{...V,quantities:{...V.quantities,[E]:I}}:V));const k=b+E;y(P=>({...P,[k]:!0})),setTimeout(()=>{y(P=>{const V={...P};return delete V[k],V})},500);try{await fetch(`${gs}/inventaire/techniciens`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code_produit:b,technicien:E+"@example.com",quantite_stock:I,emplacement:"Atelier"})})}catch(P){console.error("Erreur sauvegarde:",P),await C()}},c=async()=>{if(i.trim())try{await fetch(`${gs}/slack/notify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:` **${(e==null?void 0:e.name)||"Technicien"}**: ${i}`,channel:"inventory"})}),alert(" Commentaire envoy!"),o("")}catch(b){alert(" Erreur envoi commentaire: "+b.message)}},f=b=>{p(E=>{const T=new Set(E);return T.has(b)?T.delete(b):T.add(b),T})},S=n.reduce((b,E)=>{const T=E.category||"Sans catgorie";return b[T]||(b[T]=[]),b[T].push(E),b},{});return Object.keys(S).forEach(b=>{S[b].sort((E,T)=>(E.display_order||0)-(T.display_order||0))}),l?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Chargement..."}):r.jsxs("div",{children:[t&&r.jsxs("div",{className:`mb-4 bg-blue-50 border border-blue-200 rounded-lg ${m?"p-3":"p-4"}`,children:[r.jsxs("label",{className:`block ${m?"text-xs":"text-sm"} font-medium text-gray-700 mb-2`,children:[" Commentaire rapide ",!m&&"(notifie le CTO via Slack)"]}),r.jsxs("div",{className:`flex ${m?"flex-col":"flex-row"} gap-2`,children:[r.jsx("input",{type:"text",value:i,onChange:b=>o(b.target.value),onKeyDown:b=>b.key==="Enter"&&c(),placeholder:m?"Commentaire...":"Ex: Besoin urgent de coupelles brunes...",className:`flex-1 border rounded ${m?"px-2 py-2 text-base":"px-3 py-2 text-sm"}`}),r.jsx("button",{onClick:c,className:`${m?"w-full px-4 py-2.5":"px-4 py-2"} bg-blue-600 text-white rounded hover:bg-blue-700 font-medium ${m?"text-base":"text-sm"}`,children:"Envoyer"})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-auto",style:{maxHeight:m?"80vh":"70vh"},children:r.jsxs("table",{className:"min-w-full border-collapse",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:`${m?"px-2 py-2":"px-4 py-3"} text-left text-xs font-medium text-gray-500 uppercase border-b sticky left-0 bg-gray-50 z-20`,children:"Produit"}),xr.map(b=>{const E={Allan:"Alla","Jean-Philippe":"J-Ph",Nick:"Nick"},T=b.username===w;return r.jsx("th",{className:`${m?"px-2 py-2":"px-4 py-3"} text-center text-xs font-medium uppercase border-b ${T?"bg-green-100 text-green-800 font-bold":"text-gray-500"}`,children:m?E[b.name]||b.name.substring(0,4):b.name},b.username)})]})}),r.jsx("tbody",{children:Object.entries(S).map(([b,E])=>r.jsxs(Ha.Fragment,{children:[r.jsx("tr",{className:"bg-gray-100 hover:bg-gray-200 cursor-pointer sticky",style:{top:m?"40px":"48px",zIndex:9},children:r.jsxs("td",{colSpan:xr.length+1,className:`${m?"px-2 py-1.5":"px-4 py-2"} font-bold text-gray-800 border-b ${m?"text-sm":""}`,onClick:()=>f(b),children:[u.has(b)?"":""," ",b]})}),!u.has(b)&&E.map(T=>r.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[r.jsxs("td",{className:`${m?"px-2 py-2":"px-4 py-3"} text-sm text-gray-900 sticky left-0 bg-white border-r font-medium`,style:{minWidth:m?"150px":"200px"},children:[r.jsxs("div",{className:m?"text-xs":"text-sm",children:[T.name,T.variant_label&&r.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",T.variant_label,")"]})]}),r.jsx("div",{className:"text-xs text-gray-400",children:T.code_produit})]}),xr.map(I=>{var ee;const k=((ee=T.quantities)==null?void 0:ee[I.username])||0,P=I.username===w,V=T.code_produit+I.username,J=v[V];return r.jsx("td",{className:`${m?"px-1 py-2":"px-4 py-3"} text-center ${P?"bg-green-50":""}`,children:r.jsx("input",{type:"number",min:"0",value:k,onChange:le=>d(T.code_produit,I.username,le.target.value),onFocus:le=>le.target.select(),onClick:le=>le.target.select(),className:`${m?"w-14 text-sm":"w-20 text-sm"} px-2 py-1 text-center border rounded ${P?"bg-green-100 border-green-400 font-bold text-green-900":"border-gray-300"} ${J?"bg-green-300":""}`,style:J?{transition:"background-color 0.3s"}:{}})},I.username)})]},T.code_produit))]},b))})]})})]})},Wo="https://assistant-gazelle-v5-api.onrender.com";function ad(){const[e,t]=j.useState(""),[n,s]=j.useState(""),[l,a]=j.useState(!1),[i,o]=j.useState(null),[u,p]=j.useState(null),[v,y]=j.useState([]),[m,_]=j.useState(!1),[h,w]=j.useState(null),C=async()=>{if(!n.trim()){y([]),w(null);return}_(!0),y([]),w(null);try{const S=await(await fetch(`${Wo}/api/admin/travel-fees/search-client?client_name=${encodeURIComponent(n)}`)).json();S.results&&S.results.length>0?(y(S.results),S.results.length===1&&d(S.results[0])):(y([]),alert("Aucun client trouv"))}catch(f){y([]),alert("Erreur recherche client: "+f.message)}finally{_(!1)}},d=f=>{w(f),s(f.client_name);const S=f.address_full||f.address||f.postal_code||"";t(S),y([])},c=async(f=null,S=null)=>{const b=f??e,E=typeof b=="string"?b.trim():b?String(b).trim():"";if(!E){alert("Veuillez entrer une adresse ou code postal");return}a(!0),p(null),o(null);try{const T=await fetch(`${Wo}/api/admin/travel-fees/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({destination:E,client_name:h?h.client_name:S||n.trim()||null})});if(!T.ok){let k="Erreur de calcul";try{k=(await T.json()).detail||k}catch{k=await T.text()}throw new Error(k)}const I=await T.json();o(I)}catch(T){p(T.message)}finally{a(!1)}};return r.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:" Calculateur de frais de dplacement"}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Rechercher un client"}),r.jsxs("div",{className:"flex gap-2 relative",children:[r.jsx("input",{type:"text",value:n,onChange:f=>{s(f.target.value),w(null),y([])},placeholder:"Ex: Carretta ou Michelle",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyPress:f=>f.key==="Enter"&&C()}),r.jsx("button",{onClick:C,disabled:m,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:bg-gray-400 transition-colors",children:m?"":"Chercher"}),v.length>0&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-96 overflow-y-auto",children:v.map((f,S)=>r.jsxs("button",{onClick:()=>d(f),className:`w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0 ${(h==null?void 0:h.client_id)===f.client_id?"bg-blue-100":""}`,children:[r.jsxs("div",{className:"font-semibold text-gray-800 mb-1",children:[f.client_name,f.type==="contact"&&r.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Contact"})]}),f.address_full&&r.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[" ",f.address_full]}),r.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500",children:[f.phone&&r.jsxs("span",{children:[" ",f.phone]}),f.email&&r.jsxs("span",{children:[" ",f.email]}),f.postal_code&&r.jsxs("span",{children:[" ",f.postal_code]})]}),f.notes&&r.jsx("div",{className:"text-xs text-gray-400 mt-1 italic truncate",children:f.notes})]},S))})]}),h&&r.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-800 space-y-1",children:[r.jsxs("p",{className:"font-semibold",children:["Client : ",h.client_name]}),h.address_full&&r.jsxs("p",{children:[" ",h.address_full]}),h.phone&&r.jsxs("p",{children:[" ",h.phone]}),h.email&&r.jsxs("p",{children:[" ",h.email]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Adresse ou code postal"}),r.jsx("input",{type:"text",value:e,onChange:f=>t(f.target.value),placeholder:"Ex: H3B 4W8 ou 123 rue Example, Montral",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyPress:f=>f.key==="Enter"&&c()}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accepte : code postal, adresse partielle ou complte"})]})]}),r.jsx("button",{onClick:c,disabled:l||!e.trim(),className:"w-full md:w-auto px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:l?" Calcul en cours...":" Calculer les Frais"})]}),u&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:r.jsxs("p",{className:"text-red-800",children:[" ",u]})}),i&&r.jsxs("div",{className:"space-y-4",children:[i.recommendation&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsx("p",{className:"text-green-800 font-semibold",children:i.recommendation})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.results.map((f,S)=>{const b=f.technician_name===i.cheapest_technician,E=f.is_free;return r.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 border-2 ${b?"border-green-500 ring-2 ring-green-200":E?"border-green-300":"border-gray-200"}`,children:[b&&r.jsx("div",{className:"mb-3",children:r.jsx("span",{className:"inline-block bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:" Recommand"})}),r.jsxs("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:[" ",f.technician_name]}),r.jsx("div",{className:"mb-4",children:E?r.jsx("div",{className:"text-3xl font-bold text-green-600",children:"GRATUIT"}):r.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[f.total_fee.toFixed(2),"$"]})}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" Distance:"}),r.jsxs("span",{className:"font-semibold",children:[f.distance_km," km"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" Temps:"}),r.jsxs("span",{className:"font-semibold",children:[f.duration_minutes.toFixed(0)," min"]})]}),!E&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Dtail:"}),f.breakdown.distance_fee>0&&r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{children:"Distance:"}),r.jsxs("span",{children:[f.breakdown.distance_fee.toFixed(2),"$"]})]}),f.breakdown.time_fee>0&&r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{children:"Temps:"}),r.jsxs("span",{children:[f.breakdown.time_fee.toFixed(2),"$"]})]})]})]})]},f.technician_name)})}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Destination:"})," ",i.destination]}),h&&r.jsxs("p",{children:[r.jsx("strong",{children:"Client:"})," ",h.client_name]}),i.client_name&&!h&&r.jsxs("p",{children:[r.jsx("strong",{children:"Client:"})," ",i.client_name]})]})]})]})}const qm="https://assistant-gazelle-v5-api.onrender.com";function id(){const[e,t]=j.useState("usr_HcCiFk7o0vZ9xAI0"),[n,s]=j.useState(new Date().toISOString().split("T")[0]),[l,a]=j.useState(""),[i,o]=j.useState(""),[u,p]=j.useState(!1),[v,y]=j.useState(null),[m,_]=j.useState(null),h=[{id:"usr_HcCiFk7o0vZ9xAI0",name:"Nicolas"},{id:"usr_ofYggsCDt2JAVeNP",name:"Allan"},{id:"usr_ReUSmIJmBF86ilY1",name:"Jean-Philippe"}],w=async()=>{if(!e){alert("Veuillez slectionner un technicien");return}if(!n&&!i){alert("Choisissez soit une date, soit une plage (date de fin), soit un trimestre");return}p(!0),_(null),y(null);try{const C=await fetch(`${qm}/api/admin/kilometers/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({technician_id:e,date:n,date_end:l||null,quarter:i||null})});if(!C.ok){const c=await C.json();throw new Error(c.detail||"Erreur de calcul")}const d=await C.json();y(d)}catch(C){_(C.message)}finally{p(!1)}};return r.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[r.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800",children:" Calculateur de Kilomtres Parcourus"}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Technicien"}),r.jsx("select",{value:e,onChange:C=>t(C.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:h.map(C=>r.jsx("option",{value:C.id,children:C.name},C.id))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:" Dates (jour ou plage) / Trimestre"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsx("input",{type:"date",value:n,onChange:C=>s(C.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("input",{type:"date",value:l,onChange:C=>a(C.target.value),placeholder:"Date de fin (optionnel)",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["Q1","Q2","Q3","Q4"].map(C=>r.jsx("button",{onClick:()=>o(C),className:`px-3 py-1 text-sm rounded border ${i===C?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:C},C)),i&&r.jsx("button",{onClick:()=>o(""),className:"px-3 py-1 text-sm rounded border bg-gray-100 text-gray-700 border-gray-300",children:"Effacer trimestre"})]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["- Renseignez une date unique OU une plage (date dbut + fin) OU un trimestre (Q1=jan-mars, Q2=avr-juin, Q3=jul-sep, Q4=oct-dc).",r.jsx("br",{}),"- Le trimestre crase la plage de dates si slectionn."]})]})]}),r.jsx("button",{onClick:w,disabled:u,className:"w-full md:w-auto px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:u?" Calcul en cours...":" Calculer les Kilomtres"})]}),m&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:r.jsxs("p",{className:"text-red-800",children:[" ",m]})}),v&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg shadow-lg p-6",children:[r.jsxs("h3",{className:"text-2xl font-bold mb-4",children:[" Rsum - ",v.technician_name]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-90",children:"Distance Totale"}),r.jsxs("p",{className:"text-3xl font-bold",children:[v.total_km," km"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-90",children:"Temps Total"}),r.jsxs("p",{className:"text-3xl font-bold",children:[v.total_duration_minutes," min"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-90",children:"Remboursement"}),r.jsxs("p",{className:"text-3xl font-bold",children:[v.reimbursement.toFixed(2),"$"]}),r.jsx("p",{className:"text-xs opacity-75",children:"(0.72$/km)"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-90",children:"Priode"}),r.jsx("p",{className:"text-lg font-semibold",children:v.date_start===v.date_end?new Date(v.date_start).toLocaleDateString("fr-FR"):`${new Date(v.date_start).toLocaleDateString("fr-FR")} - ${new Date(v.date_end).toLocaleDateString("fr-FR")}`})]})]})]}),v.segments&&v.segments.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsx("h4",{className:"text-xl font-bold mb-4 text-gray-800",children:" Segments Dtaills"}),r.jsx("div",{className:"space-y-3",children:v.segments.map((C,d)=>r.jsx("div",{className:"border-l-4 border-blue-500 pl-4 py-2 bg-gray-50 rounded",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"font-semibold text-gray-800",children:[d+1,". ",C.from,"  ",C.to]})}),r.jsxs("div",{className:"text-right text-sm text-gray-600",children:[r.jsx("p",{children:r.jsxs("strong",{children:[C.distance_km," km"]})}),r.jsx("p",{children:C.duration_text})]})]})},d))})]})]})]})}const Qm=({currentUser:e})=>{const[t,n]=j.useState("inventaire"),[s,l]=j.useState([]),[a,i]=j.useState(null),[o,u]=j.useState({nom:"",date_debut:"",date_fin:"",notes:""});j.useEffect(()=>{p()},[]);const p=async()=>{try{const h=localStorage.getItem("tournees_accords");l(h?JSON.parse(h):[])}catch(h){console.error("Erreur chargement tournes:",h),l([])}},v=async h=>{if(h.preventDefault(),!o.nom||!o.date_debut){alert(" Veuillez remplir au minimum le nom et la date de dbut");return}try{const w={id:`tournee_${Date.now()}`,...o,technicien_responsable:(e==null?void 0:e.email)||"nicolas@example.com",techniciens_assignes:[],status:"planifiee",created_at:new Date().toISOString()},C=JSON.parse(localStorage.getItem("tournees_accords")||"[]");C.push(w),localStorage.setItem("tournees_accords",JSON.stringify(C)),alert(" Tourne cre avec succs!"),u({nom:"",date_debut:"",date_fin:"",notes:""}),await p()}catch(w){alert(" Erreur: "+w.message)}},y=async h=>{if(confirm("tes-vous sr de vouloir supprimer cette tourne ?"))try{const C=JSON.parse(localStorage.getItem("tournees_accords")||"[]").filter(d=>d.id!==h);localStorage.setItem("tournees_accords",JSON.stringify(C)),alert(" Tourne supprime"),await p()}catch(w){alert(" Erreur: "+w.message)}},m=async h=>{try{const C=JSON.parse(localStorage.getItem("tournees_accords")||"[]").map(d=>({...d,status:d.id===h?"en_cours":d.status==="en_cours"?"planifiee":d.status}));localStorage.setItem("tournees_accords",JSON.stringify(C)),alert(" Tourne active"),await p()}catch(w){alert(" Erreur: "+w.message)}},_=async h=>{if(confirm("tes-vous sr de vouloir conclure cette tourne ?"))try{const C=JSON.parse(localStorage.getItem("tournees_accords")||"[]").map(d=>({...d,status:d.id===h?"terminee":d.status}));localStorage.setItem("tournees_accords",JSON.stringify(C)),alert(" Tourne conclue"),await p()}catch(w){alert(" Erreur: "+w.message)}};return a?r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6 flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("button",{onClick:()=>i(null),className:"mb-2 text-blue-600 hover:text-blue-800 flex items-center gap-2",children:" Retour aux tournes"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a.nom}),r.jsxs("p",{className:"text-gray-600",children:[" Du ",new Date(a.date_debut).toLocaleDateString("fr-CA"),a.date_fin&&` au ${new Date(a.date_fin).toLocaleDateString("fr-CA")}`]})]})}),r.jsx($i,{currentUser:e,tourneeId:a.id})]}):r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Nick"}),r.jsx("p",{className:"text-gray-600",children:"Gestionnaire - Inventaire & tournes"})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsxs("nav",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>n("inventaire"),className:`px-4 py-2 border-b-2 font-medium ${t==="inventaire"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:" Inventaire techniciens"}),r.jsx("button",{onClick:()=>n("tournees"),className:`px-4 py-2 border-b-2 font-medium ${t==="tournees"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:" Tournes d'accords"}),r.jsx("button",{onClick:()=>n("calculateur"),className:`px-4 py-2 border-b-2 font-medium ${t==="calculateur"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:" Calculateur"})]})}),t==="inventaire"&&r.jsx(ld,{currentUser:e,allowComment:!0}),t==="tournees"&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Crer une nouvelle tourne d'accords"}),r.jsxs("form",{onSubmit:v,className:"bg-white rounded-lg shadow p-6 mb-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de la tourne *"}),r.jsx("input",{type:"text",value:o.nom,onChange:h=>u({...o,nom:h.target.value}),placeholder:"ex: Tourne Place des Arts - Janvier 2025",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{className:"flex gap-3 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de dbut *"}),r.jsx("input",{type:"date",value:o.date_debut,onChange:h=>u({...o,date_debut:h.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{width:"170px"},required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),r.jsx("input",{type:"date",value:o.date_fin,onChange:h=>u({...o,date_fin:h.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{width:"170px"}})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),r.jsx("textarea",{value:o.notes,onChange:h=>u({...o,notes:h.target.value}),placeholder:"Notes additionnelles sur la tourne...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-semibold",children:" Crer la tourne"})]}),r.jsx("h3",{className:"text-lg font-bold mb-3",children:"Tournes planifies"}),r.jsx("div",{className:"space-y-3",children:s.length===0?r.jsx("p",{className:"text-gray-500",children:"Aucune tourne planifie"}):s.map((h,w)=>r.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-blue-600",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-gray-900",children:h.nom}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" Du ",new Date(h.date_debut).toLocaleDateString("fr-CA"),h.date_fin&&` au ${new Date(h.date_fin).toLocaleDateString("fr-CA")}`]}),h.notes&&r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:h.notes})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-3 py-1 rounded text-sm font-semibold ${h.status==="terminee"?"bg-green-100 text-green-800":h.status==="en_cours"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:h.status==="terminee"?"Termine":h.status==="en_cours"?"En cours":"Planifie"}),h.status==="planifiee"&&r.jsx("button",{onClick:()=>m(h.id),className:"px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 text-sm font-medium",title:"Activer cette tourne",children:" Activer"}),h.status==="en_cours"&&r.jsx("button",{onClick:()=>_(h.id),className:"px-3 py-1 bg-orange-100 text-orange-700 rounded hover:bg-orange-200 text-sm font-medium",title:"Conclure cette tourne",children:" Conclure"}),r.jsx("button",{onClick:()=>i(h),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium",title:"Voir les pianos de cette tourne",children:" Voir les pianos"}),r.jsx("button",{onClick:()=>y(h.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-sm font-medium",title:"Supprimer cette tourne",children:""})]})]})},w))})]}),t==="calculateur"&&r.jsxs("div",{className:"space-y-8",children:[r.jsx(ad,{}),r.jsx("div",{className:"border-t border-gray-200 pt-8",children:r.jsx(id,{})})]})]})},Gm=({currentUser:e})=>{const[t,n]=j.useState("inventaire"),[s,l]=j.useState([]),[a,i]=j.useState(null);j.useEffect(()=>{o()},[]);const o=async()=>{try{const u=localStorage.getItem("tournees_accords");if(u){const p=JSON.parse(u);l(p)}else l([])}catch(u){console.error("Erreur chargement tournes:",u),l([])}};return a?r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6 flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("button",{onClick:()=>i(null),className:"mb-2 text-blue-600 hover:text-blue-800 flex items-center gap-2",children:" Retour aux tournes"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a.nom}),r.jsxs("p",{className:"text-gray-600",children:[" Du ",new Date(a.date_debut).toLocaleDateString("fr-CA"),a.date_fin&&` au ${new Date(a.date_fin).toLocaleDateString("fr-CA")}`]})]})}),r.jsx($i,{currentUser:e,tourneeId:a.id})]}):r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Louise"}),r.jsx("p",{className:"text-gray-600",children:"Assistante - Inventaire & tournes"})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsxs("nav",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>n("inventaire"),className:`px-4 py-2 border-b-2 font-medium ${t==="inventaire"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:" Inventaire techniciens"}),r.jsx("button",{onClick:()=>n("tournees"),className:`px-4 py-2 border-b-2 font-medium ${t==="tournees"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:" Tournes d'accords"})]})}),t==="inventaire"&&r.jsx(ld,{currentUser:e,allowComment:!0}),t==="tournees"&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tourne active"}),r.jsx("div",{className:"space-y-3",children:s.filter(u=>u.status==="en_cours").length===0?r.jsx("p",{className:"text-gray-500",children:"Aucune tourne active pour le moment"}):s.filter(u=>u.status==="en_cours").map((u,p)=>r.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-blue-600",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-gray-900",children:u.nom}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" Du ",new Date(u.date_debut).toLocaleDateString("fr-CA"),u.date_fin&&` au ${new Date(u.date_fin).toLocaleDateString("fr-CA")}`]}),u.notes&&r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:u.notes})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-3 py-1 rounded text-sm font-semibold ${u.status==="terminee"?"bg-green-100 text-green-800":u.status==="en_cours"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:u.status==="terminee"?"Termine":u.status==="en_cours"?"En cours":"Planifie"}),r.jsx("button",{onClick:()=>i(u),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium",title:"Voir les pianos de cette tourne",children:" Voir les pianos"})]})]})},p))})]})]})},Jm="https://assistant-gazelle-v5-api.onrender.com";function Km({item:e,index:t,rawText:n,currentUser:s,onCorrect:l}){const[a,i]=j.useState(e.confidence<1),[o,u]=j.useState({appointment_date:e.appointment_date||"",room:e.room||"",for_who:e.for_who||"",diapason:e.diapason||"",piano:e.piano||"",time:e.time||"",requester:e.requester||""}),[p,v]=j.useState(!1),y=(w,C)=>{u(d=>({...d,[w]:C}))},m=async()=>{v(!0);try{await fetch(`${Jm}/place-des-arts/learn`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({original_text:n,parsed_date:e.appointment_date,parsed_room:e.room,parsed_for_who:e.for_who,parsed_diapason:e.diapason,parsed_piano:e.piano,parsed_time:e.time,parsed_requester:e.requester,parsed_confidence:e.confidence,corrected_date:o.appointment_date,corrected_room:o.room,corrected_for_who:o.for_who,corrected_diapason:o.diapason,corrected_piano:o.piano,corrected_time:o.time,corrected_requester:o.requester,corrected_by:(s==null?void 0:s.email)||"admin"})}),i(!1),l&&l(t,o)}catch(w){console.error("Erreur sauvegarde correction:",w),alert("Erreur lors de l'enregistrement de la correction")}finally{v(!1)}},_=e.confidence>=.8?"text-green-600 bg-green-50":e.confidence>=.6?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",h=e.confidence>=.8?" Haute confiance":e.confidence>=.6?" Moyenne confiance":" Faible confiance - Vrification requise";return a?r.jsxs("div",{className:"px-3 py-3 text-sm space-y-3 bg-blue-50 border-l-4 border-blue-400",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("span",{className:`text-xs px-2 py-1 rounded ${_}`,children:[h," (",Math.round(e.confidence*100),"%) - Mode dition"]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date RDV"}),r.jsx("input",{type:"date",value:o.appointment_date,onChange:w=>y("appointment_date",w.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Heure"}),r.jsx("input",{type:"text",value:o.time,onChange:w=>y("time",w.target.value),placeholder:"Ex: 13h00",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Salle"}),r.jsxs("select",{value:o.room,onChange:w=>y("room",w.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"-- Slectionner --"}),r.jsx("option",{value:"WP",children:"WP - Wilfrid-Pelletier"}),r.jsx("option",{value:"TM",children:"TM - Thtre Maisonneuve"}),r.jsx("option",{value:"MS",children:"MS - Salle MS"}),r.jsx("option",{value:"SD",children:"SD - Salle D"}),r.jsx("option",{value:"C5",children:"C5 - Cinquime Salle"}),r.jsx("option",{value:"SCL",children:"SCL - Studio Claude-Lveille"}),r.jsx("option",{value:"ODM",children:"ODM - Opera de Montreal"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Diapason"}),r.jsx("input",{type:"text",value:o.diapason,onChange:w=>y("diapason",w.target.value),placeholder:"Ex: 440",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pour qui (artiste/vnement)"}),r.jsx("input",{type:"text",value:o.for_who,onChange:w=>y("for_who",w.target.value),placeholder:"Ex: Clmence",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Demandeur"}),r.jsx("input",{type:"text",value:o.requester,onChange:w=>y("requester",w.target.value),placeholder:"Ex: Isabelle",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Piano"}),r.jsx("input",{type:"text",value:o.piano,onChange:w=>y("piano",w.target.value),placeholder:"Ex: Piano Baldwin (9')",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2 border-t border-blue-200",children:[r.jsx("button",{onClick:m,disabled:p,className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:p?"Enregistrement...":" Valider et apprendre"}),r.jsx("button",{onClick:()=>i(!1),disabled:p,className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50",children:"Annuler"})]}),e.warnings&&e.warnings.length>0&&r.jsxs("div",{className:"text-xs text-amber-700 bg-amber-50 border border-amber-200 rounded px-2 py-1",children:["Avertissements: ",e.warnings.join(" | ")]})]}):r.jsxs("div",{className:"px-3 py-3 text-sm space-y-2 bg-white hover:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:`text-xs px-2 py-1 rounded ${_}`,children:[h," (",Math.round(e.confidence*100),"%)"]}),e.confidence<1&&r.jsx("button",{onClick:()=>i(!0),className:"text-xs text-blue-600 hover:text-blue-800",children:" Modifier"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Date RDV:"}),r.jsx("span",{className:"ml-2",children:e.appointment_date||""}),e.time&&r.jsx("span",{className:"ml-2 text-gray-600",children:e.time})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Salle:"}),r.jsx("span",{className:"ml-2",children:e.room||""})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Pour qui:"}),r.jsx("span",{className:"ml-2",children:e.for_who||""})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Diapason:"}),r.jsx("span",{className:"ml-2",children:e.diapason||""})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Piano:"}),r.jsx("span",{className:"ml-2",children:e.piano||""})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Demandeur:"}),r.jsx("span",{className:"ml-2",children:e.requester||""})]})]}),e.warnings&&e.warnings.length>0&&r.jsxs("div",{className:"text-xs text-amber-700 bg-amber-50 border border-amber-200 rounded px-2 py-1",children:["Avertissements: ",e.warnings.join(" | ")]}),e.duplicate_of&&e.duplicate_of.length>0&&r.jsxs("div",{className:"text-xs text-red-700 bg-red-50 border border-red-200 rounded px-2 py-1",children:["Doublon potentiel : ",e.duplicate_of.join(", ")]})]})}const dt="https://assistant-gazelle-v5-api.onrender.com";function qo({currentUser:e}){const t=(e==null?void 0:e.role)==="nick"||(e==null?void 0:e.role)==="louise",[n,s]=j.useState([]),[l,a]=j.useState(!1),[i,o]=j.useState(null),[u,p]=j.useState({imported:0,to_bill:0,this_month:0}),[v,y]=j.useState(!1),[m,_]=j.useState(!1),[h,w]=j.useState(!1),[C,d]=j.useState({appointment_date:"",room:"",for_who:"",piano:"",time:"",diapason:"",requester:"",technician_id:"",notes:"",billing_amount:"",parking:""}),[c,f]=j.useState(new Date().getFullYear()),[S,b]=j.useState(""),[E,T]=j.useState(""),[I,k]=j.useState(""),[P,V]=j.useState(""),[J,ee]=j.useState(""),[le,Ee]=j.useState(""),[ye,Oe]=j.useState("asc"),[z,B]=j.useState([]),[H,X]=j.useState(""),[re,ve]=j.useState([]),[ce,ze]=j.useState(!1),[We,rt]=j.useState(!1),[Ct,te]=j.useState(null),Te=j.useCallback(async()=>{try{a(!0),o(null);const g=await fetch(`${dt}/place-des-arts/requests?limit=200`);if(!g.ok)throw new Error(`HTTP ${g.status}`);const G=await g.json();s(G||[])}catch(g){o(g.message)}finally{a(!1)}},[]),$e=j.useCallback(async()=>{try{const g=await fetch(`${dt}/place-des-arts/stats`);if(!g.ok)throw new Error(`HTTP ${g.status}`);const G=await g.json();p(G||{imported:0,to_bill:0,this_month:0})}catch{}},[]);j.useEffect(()=>{Te(),$e()},[Te]);const Me=j.useMemo(()=>n.filter(g=>{if(S&&g.status!==S||E&&g.appointment_date&&!g.appointment_date.startsWith(E)||P&&g.technician_id!==P||J&&(g.room||"").toUpperCase()!==J.toUpperCase())return!1;if(I){const G=I.toLowerCase();if(![g.for_who,g.piano,g.room,g.requester,g.diapason,g.time].join(" ").toLowerCase().includes(G))return!1}return!0}),[n,S,E,P,J,I]),mn=j.useMemo(()=>{if(!le)return Me;const g=ye==="desc"?-1:1,G=(K,M)=>{const Se=(K==null?void 0:K[le])??"",he=(M==null?void 0:M[le])??"";if(le==="request_date"||le==="appointment_date"){const vt=Se?new Date(Se).getTime():0,Et=he?new Date(he).getTime():0;return(vt-Et)*g}return String(Se).localeCompare(String(he))*g};return[...Me].sort(G)},[Me,le,ye]),we=g=>{le===g?Oe(G=>G==="asc"?"desc":"asc"):(Ee(g),Oe("asc"))},Pe=g=>le!==g?"":ye==="asc"?"":"",lr=g=>{B(G=>G.includes(g)?G.filter(K=>K!==g):[...G,g])},Tn=()=>{z.length===Me.length?B([]):B(Me.map(g=>g.id))},je=async(g,G)=>{try{o(null);const K=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!K.ok){const M=await K.text();throw new Error(M||`HTTP ${K.status}`)}await Te(),await $e(),te("Action effectue"),B([])}catch(K){o(K.message)}},yt=async(g,G=null)=>{const K=G||z;!g||K.length===0||await je(`${dt}/place-des-arts/requests/update-status-batch`,{request_ids:K,status:g})},N=async()=>{z.length!==0&&await je(`${dt}/place-des-arts/requests/bill`,{request_ids:z,status:"BILLED"})},D=async()=>{z.length!==0&&await je(`${dt}/place-des-arts/requests/delete`,{request_ids:z})},A=async()=>{try{o(null),te(null);const g=await fetch(`${dt}/place-des-arts/requests/find-duplicates`);if(!g.ok)throw new Error(`Erreur lors de la recherche de doublons: ${g.status}`);const K=(await g.json()).duplicates||[];if(K.length===0){te("Aucun doublon dtect");return}const M=K.map((he,vt)=>`${vt+1}. ${he.appointment_date} - ${he.room} - ${he.for_who||"(sans nom)"} (ID: ${he.id})`).join(`
`),Se=`${K.length} doublon(s) dtect(s):

${M}

Voulez-vous vraiment supprimer ces doublons?`;if(!window.confirm(Se)){te("Suppression annule");return}await je(`${dt}/place-des-arts/requests/delete-duplicates`,{})}catch(g){o(g.message||"Erreur lors de la suppression des doublons")}},U=()=>{window.open(`${dt}/place-des-arts/export`,"_blank")},qe=async(g,G,K)=>{const M=await fetch(`${dt}/place-des-arts/requests/update-cell`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({request_id:g,field:G,value:K})});if(!M.ok){const Se=await M.text();throw new Error(Se||`HTTP ${M.status}`)}},de=async(g,G,K)=>{try{o(null);const M=z.includes(g)&&z.length>1?z:[g];for(const Se of M)await qe(Se,G,K),G==="technician_id"&&K&&await qe(Se,"status","ASSIGN_OK");await Te(),te(`Champ mis  jour pour ${M.length} lment(s)`)}catch(M){o(M.message)}},fn=async()=>{if(z.length)try{o(null);const g=parseInt(c,10);if(!g||g<2e3||g>2100)throw new Error("Anne invalide");for(const G of z){const K=n.find(vt=>vt.id===G);if(!K)continue;const M=vt=>{if(!vt)return null;const Et=new Date(vt);return Number.isNaN(Et.getTime())?null:(Et.setFullYear(g),Et.toISOString().slice(0,10))},Se=M(K.appointment_date),he=M(K.request_date);Se&&await qe(G,"appointment_date",Se),he&&await qe(G,"request_date",he)}await Te(),te(`Anne mise  ${c} pour ${z.length} lment(s)`),B([])}catch(g){o(g.message)}},hl=async()=>{if(H.trim())try{ze(!0),te(null);const g=await fetch(`${dt}/place-des-arts/preview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({raw_text:H,source:"email"})});if(!g.ok){const K=await g.text();throw new Error(K||`HTTP ${g.status}`)}const G=await g.json();ve(G.preview||[])}catch(g){o(g.message)}finally{ze(!1)}},gl=async()=>{if(H.trim())try{rt(!0),o(null),te(null);const g=await fetch(`${dt}/place-des-arts/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({raw_text:H,source:"email"})});if(!g.ok){const K=await g.text();throw new Error(K||`HTTP ${g.status}`)}const G=await g.json();te(G.message||`Import: ${G.imported||0}`),ve([]),await Te()}catch(g){o(g.message)}finally{rt(!1)}},Yr={usr_U9E5bLxrFiXqTbE8:"Nick",usr_allan:"Allan",usr_jp:"JP"},yl=j.useMemo(()=>[{id:"usr_U9E5bLxrFiXqTbE8",label:"Nick"},{id:"usr_allan",label:"Allan"},{id:"usr_jp",label:"JP"}],[]);return r.jsxs("div",{className:`${v?"fixed inset-0 z-50 bg-white overflow-auto":"max-w-7xl mx-auto"} p-6 space-y-4`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Place des Arts"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Demandes importes (limite 200, tri date RDV desc)"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 text-gray-700 px-3 py-1 rounded-md text-sm",children:[r.jsx("span",{className:"font-semibold",children:u.imported??0}),r.jsx("span",{children:"nouvelles"})]}),r.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 text-gray-700 px-3 py-1 rounded-md text-sm",children:[r.jsx("span",{className:"font-semibold",children:u.to_bill??0}),r.jsx("span",{children:" facturer"})]}),r.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 text-gray-700 px-3 py-1 rounded-md text-sm",children:[r.jsx("span",{className:"font-semibold",children:u.this_month??0}),r.jsx("span",{children:"ce mois"})]}),r.jsx("button",{onClick:()=>{const g=!v;y(g);try{g&&document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():!g&&document.exitFullscreen&&document.exitFullscreen()}catch{}},className:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:v?"Mode fentr":"Plein cran"})]})]}),h&&r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Ajouter une demande"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Date RDV"}),r.jsx("input",{type:"date",value:C.appointment_date,onChange:g=>d({...C,appointment_date:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Salle"}),r.jsx("input",{type:"text",value:C.room,onChange:g=>d({...C,room:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Pour qui"}),r.jsx("input",{type:"text",value:C.for_who,onChange:g=>d({...C,for_who:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Piano"}),r.jsx("input",{type:"text",value:C.piano,onChange:g=>d({...C,piano:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Heure"}),r.jsx("input",{type:"text",value:C.time,onChange:g=>d({...C,time:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Diapason"}),r.jsx("input",{type:"text",value:C.diapason,onChange:g=>d({...C,diapason:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Demandeur"}),r.jsx("input",{type:"text",value:C.requester,onChange:g=>d({...C,requester:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Technicien"}),r.jsxs("select",{value:C.technician_id,onChange:g=>d({...C,technician_id:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"usr_U9E5bLxrFiXqTbE8",children:"Nick"}),r.jsx("option",{value:"usr_allan",children:"Allan"}),r.jsx("option",{value:"usr_jp",children:"JP"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Facturation"}),r.jsx("input",{type:"number",step:"0.01",value:C.billing_amount,onChange:g=>d({...C,billing_amount:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Stationnement"}),r.jsx("input",{type:"text",value:C.parking,onChange:g=>d({...C,parking:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]}),r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Notes"}),r.jsx("input",{type:"text",value:C.notes,onChange:g=>d({...C,notes:g.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:async()=>{try{o(null),te(null);const g=await fetch(`${dt}/place-des-arts/requests/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(!g.ok){const G=await g.text();throw new Error(G||`HTTP ${g.status}`)}te("Demande ajoute"),w(!1),d({appointment_date:"",room:"",for_who:"",piano:"",time:"",diapason:"",requester:"",technician_id:"",notes:"",billing_amount:"",parking:""}),await Te()}catch(g){o(g.message)}},className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Enregistrer"}),r.jsx("button",{onClick:()=>w(!1),className:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Annuler"})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Import depuis email (copier-coller)"}),r.jsx("textarea",{value:H,onChange:g=>X(g.target.value),placeholder:"Collez le texte de l'email ici...",className:"w-full min-h-[140px] border border-gray-300 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:hl,disabled:!H.trim()||ce,className:"px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-md border border-gray-200 disabled:opacity-50",children:ce?"Prvisualisation...":"Prvisualiser"}),r.jsx("button",{onClick:gl,disabled:!H.trim()||We,className:"px-3 py-2 text-sm bg-blue-600 text-white hover:bg-blue-700 rounded-md disabled:opacity-50",children:We?"Import...":"Importer"}),r.jsx("button",{onClick:()=>{X(""),ve([]),te(null),o(null)},className:"px-3 py-2 text-sm bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Effacer"})]}),Ct&&r.jsx("div",{className:"text-sm text-green-700 bg-green-50 border border-green-200 px-3 py-2 rounded",children:Ct}),re.length>0&&r.jsxs("div",{className:"border border-gray-200 rounded-md",children:[r.jsxs("div",{className:"bg-gray-50 px-3 py-2 text-sm font-medium text-gray-700 flex items-center justify-between",children:[r.jsxs("span",{children:["Prvisualisation (",re.length,")"]}),r.jsx("span",{className:"text-xs text-gray-500",children:re.filter(g=>g.confidence<1).length>0&&`${re.filter(g=>g.confidence<1).length} item(s) ncessitent une vrification`})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto divide-y divide-gray-100",children:re.map((g,G)=>r.jsx(Km,{item:g,index:G,rawText:H,currentUser:e,onCorrect:(K,M)=>{ve(Se=>Se.map((he,vt)=>vt===K?{...he,...M,confidence:1}:he))}},G))})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex flex-wrap items-center gap-2",children:[!t&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:A,className:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:" Nettoyer doublons"}),r.jsx("button",{onClick:U,className:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:" Export CSV"})]}),r.jsx("button",{onClick:()=>_(g=>!g),className:`px-3 py-2 text-sm border rounded-md ${m?"bg-blue-600 text-white border-blue-600":"bg-white border-gray-300 hover:bg-gray-50"}`,children:m?"Mode dition activ":"Mode dition"}),r.jsx("button",{onClick:()=>w(g=>!g),className:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:h?"Fermer ajout":" Ajouter"}),!t&&r.jsx("button",{disabled:!0,title:"Sync Gazelle ( venir)",className:"px-3 py-2 text-sm bg-gray-100 border border-gray-300 rounded-md text-gray-400 cursor-not-allowed",children:" Sync Gazelle"}),!t&&r.jsxs("div",{className:"flex items-center gap-2 ml-auto flex-wrap",children:[r.jsx("input",{type:"month",value:E,onChange:g=>T(g.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm"}),r.jsxs("select",{value:S,onChange:g=>b(g.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[r.jsx("option",{value:"",children:"Tous statuts"}),r.jsx("option",{value:"PENDING",children:"Nouveau"}),r.jsx("option",{value:"ASSIGN_OK",children:"Assign"}),r.jsx("option",{value:"CREATED_IN_GAZELLE",children:"Cr Gazelle"}),r.jsx("option",{value:"COMPLETED",children:"Complt"}),r.jsx("option",{value:"BILLED",children:"Factur"})]}),r.jsx("input",{type:"text",value:J,onChange:g=>ee(g.target.value),placeholder:"Salle",className:"border border-gray-300 rounded-md px-2 py-1 text-sm"}),r.jsx("input",{type:"text",value:P,onChange:g=>V(g.target.value),placeholder:"Technicien id",className:"border border-gray-300 rounded-md px-2 py-1 text-sm"}),r.jsx("input",{type:"text",value:I,onChange:g=>k(g.target.value),placeholder:"Recherche (client/piano)",className:"border border-gray-300 rounded-md px-2 py-1 text-sm"}),r.jsx("button",{onClick:()=>{b(""),T(""),ee(""),V(""),k("")},className:"px-3 py-1 text-sm bg-gray-100 border border-gray-200 rounded-md hover:bg-gray-200",children:"Rinitialiser"})]})]}),z.length>0&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex flex-wrap gap-2 items-center",children:[r.jsxs("span",{className:"text-sm text-blue-800 font-medium",children:[z.length," slectionn(s)"]}),r.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[r.jsx("input",{type:"number",value:c,onChange:g=>f(g.target.value),className:"w-20 border border-gray-300 rounded px-2 py-1",min:"2000",max:"2100"}),r.jsx("button",{onClick:fn,className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Changer l'anne"})]}),r.jsxs("select",{onChange:g=>yt(g.target.value),defaultValue:"",className:"text-xs border border-gray-300 rounded px-2 py-1 bg-white",children:[r.jsx("option",{value:"",children:"Changer statut..."}),r.jsx("option",{value:"PENDING",children:"Nouveau"}),r.jsx("option",{value:"ASSIGN_OK",children:"Assign"}),r.jsx("option",{value:"CREATED_IN_GAZELLE",children:"Cr Gazelle"}),r.jsx("option",{value:"COMPLETED",children:"Complt"}),r.jsx("option",{value:"BILLED",children:"Factur"})]}),r.jsx("button",{onClick:()=>yt("PENDING"),className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Statut: Nouveau"}),r.jsx("button",{onClick:()=>yt("ASSIGN_OK"),className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Statut: Assign"}),r.jsx("button",{onClick:()=>yt("CREATED_IN_GAZELLE"),className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Statut: Cr Gazelle"}),r.jsx("button",{onClick:()=>yt("COMPLETED"),className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Statut: Complt"}),r.jsx("button",{onClick:N,className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Facturer"}),r.jsx("button",{onClick:D,className:"px-2 py-1 text-xs bg-red-50 border border-red-200 text-red-700 rounded hover:bg-red-100",children:"Supprimer"}),r.jsx("button",{onClick:()=>B([]),className:"ml-auto px-2 py-1 text-xs text-blue-800",children:"Dslectionner"})]}),l&&r.jsx("div",{className:"text-gray-600",children:"Chargement..."}),i&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded",children:["Erreur: ",i]}),!l&&!i&&r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-2",children:r.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:z.length>0&&z.length===Me.length,onChange:Tn})}),r.jsxs("th",{onClick:()=>we("request_date"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Date demande ",Pe("request_date")]}),r.jsxs("th",{onClick:()=>we("appointment_date"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Date RDV ",Pe("appointment_date")]}),r.jsxs("th",{onClick:()=>we("room"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Salle ",Pe("room")]}),r.jsxs("th",{onClick:()=>we("for_who"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Pour qui ",Pe("for_who")]}),r.jsxs("th",{onClick:()=>we("diapason"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Diapason ",Pe("diapason")]}),r.jsxs("th",{onClick:()=>we("requester"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Demandeur ",Pe("requester")]}),r.jsxs("th",{onClick:()=>we("piano"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Piano ",Pe("piano")]}),r.jsxs("th",{onClick:()=>we("time"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Heure ",Pe("time")]}),r.jsxs("th",{onClick:()=>we("technician_id"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Qui le fait ",Pe("technician_id")]}),r.jsxs("th",{onClick:()=>we("notes"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Commentaire ",Pe("notes")]}),r.jsxs("th",{onClick:()=>we("billing_amount"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Facturation ",Pe("billing_amount")]}),r.jsxs("th",{onClick:()=>we("parking"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Stationnement ",Pe("parking")]}),r.jsxs("th",{onClick:()=>we("status"),className:"px-3 py-2 text-left font-medium text-gray-700 cursor-pointer select-none",children:["Statut ",Pe("status")]})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100 bg-white",children:[mn.map(g=>{const G=g.status==="COMPLETED",K=z.includes(g.id)?"bg-blue-50":G?"bg-green-50":"";return r.jsxs("tr",{className:K,children:[r.jsx("td",{className:"px-2 py-2",children:r.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:z.includes(g.id),onChange:()=>lr(g.id)})}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"date",value:g.request_date?g.request_date.slice(0,10):"",onChange:M=>de(g.id,"request_date",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.request_date?g.request_date.slice(0,10):""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"date",value:g.appointment_date?g.appointment_date.slice(0,10):"",onChange:M=>de(g.id,"appointment_date",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.appointment_date?g.appointment_date.slice(0,10):""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"text",defaultValue:g.room||"",onBlur:M=>de(g.id,"room",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.room||""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"text",defaultValue:g.for_who||"",onBlur:M=>de(g.id,"for_who",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.for_who||""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"text",defaultValue:g.diapason||"",onBlur:M=>de(g.id,"diapason",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.diapason||""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"text",defaultValue:g.requester||"",onBlur:M=>de(g.id,"requester",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.requester||""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"text",defaultValue:g.piano||"",onBlur:M=>de(g.id,"piano",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.piano||""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"text",defaultValue:g.time||"",onBlur:M=>de(g.id,"time",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.time||""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsxs("select",{value:g.technician_id||"",onChange:M=>de(g.id,"technician_id",M.target.value),className:"w-full border border-gray-200 rounded px-1 py-1 text-xs bg-white font-medium",title:Yr[g.technician_id]||g.technician||"Choisir technicien",style:{width:"70px"},children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"usr_U9E5bLxrFiXqTbE8",children:"Nick"}),r.jsx("option",{value:"usr_allan",children:"Allan"}),r.jsx("option",{value:"usr_jp",children:"JP"})]}):Yr[g.technician_id]||g.technician_id||""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"text",defaultValue:g.notes||"",onBlur:M=>de(g.id,"notes",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.notes||""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"number",step:"0.01",defaultValue:g.billing_amount??"",onBlur:M=>de(g.id,"billing_amount",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.billing_amount??""}),r.jsx("td",{className:"px-3 py-2 text-gray-800",children:m?r.jsx("input",{type:"text",defaultValue:g.parking||"",onBlur:M=>de(g.id,"parking",M.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-xs"}):g.parking||""}),r.jsx("td",{className:"px-3 py-2",children:r.jsxs("select",{value:g.status||"",onChange:M=>{const Se=z.includes(g.id)&&z.length>1?z:[g.id];yt(M.target.value,Se)},className:"text-xs border border-gray-300 rounded px-2 py-1 bg-white",children:[r.jsx("option",{value:"PENDING",children:"Nouveau"}),r.jsx("option",{value:"ASSIGN_OK",children:"Assign"}),r.jsx("option",{value:"CREATED_IN_GAZELLE",children:"Cr Gazelle"}),r.jsx("option",{value:"COMPLETED",children:"Complt"}),r.jsx("option",{value:"BILLED",children:"Factur"})]})})]},g.id)}),Me.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:14,className:"px-3 py-4 text-center text-gray-500",children:"Aucune donne"})})]})]}),r.jsx("datalist",{id:"tech-options",children:yl.map(g=>r.jsx("option",{value:g.id,children:g.label},g.id))})]})]})}const Ym="https://assistant-gazelle-v5-api.onrender.com";function Xm({clientId:e,onClose:t}){const[n,s]=j.useState(!0),[l,a]=j.useState(null),[i,o]=j.useState(null);return j.useEffect(()=>{e&&(async()=>{try{s(!0),a(null);const p=encodeURIComponent(e),v=await fetch(`${Ym}/assistant/client/${p}`);if(!v.ok)throw new Error(`HTTP ${v.status}`);const y=await v.json();o(y)}catch(p){console.error("Erreur chargement dtails client:",p),a(p.message)}finally{s(!1)}})()},[e]),r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:u=>{u.target===u.currentTarget&&t()},children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Dtails Client"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),r.jsxs("div",{className:"p-6",children:[n&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement des dtails..."})]}),l&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-4 text-red-800",children:[" Erreur: ",l]}),i&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Informations"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded space-y-2",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Nom:"})," ",i.name]}),i.address&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Adresse:"})," ",i.address]}),i.city&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Ville:"})," ",i.city]}),i.postal_code&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Code postal:"})," ",i.postal_code]}),i.phone&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Tlphone:"})," ",i.phone]}),i.email&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Email:"})," ",i.email]}),i.type&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Type:"})," ",r.jsx("span",{className:`px-2 py-1 rounded text-xs ${i.type==="client"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:i.type==="client"?"Client":"Contact"})]})]})]}),i.client_notes&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Notes Client"}),r.jsx("div",{className:"bg-yellow-50 p-4 rounded border-l-4 border-yellow-400",children:r.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:i.client_notes})})]}),i.associated_contacts&&i.associated_contacts.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Contacts Associs (",i.associated_contacts.length,")"]}),r.jsx("div",{className:"space-y-2",children:i.associated_contacts.map((u,p)=>r.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[r.jsx("p",{className:"font-medium",children:u.name||"N/A"}),u.role&&r.jsx("p",{className:"text-sm text-gray-600",children:u.role}),u.phone&&r.jsxs("p",{className:"text-sm",children:[" ",u.phone]}),u.email&&r.jsxs("p",{className:"text-sm",children:[" ",u.email]})]},p))})]}),i.pianos&&i.pianos.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-2",children:[" Pianos (",i.pianos.length,")"]}),r.jsx("div",{className:"space-y-3",children:i.pianos.map((u,p)=>r.jsxs("div",{className:"bg-gray-50 p-4 rounded border-l-4 border-blue-400",children:[r.jsxs("p",{className:"font-medium",children:[u.make||""," ",u.model||"",u.serial_number&&r.jsxs("span",{className:"text-gray-600 text-sm ml-2",children:["(S/N: ",u.serial_number,")"]})]}),r.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[u.year&&r.jsxs("p",{className:"text-gray-600",children:["Anne: ",u.year]}),u.type&&r.jsxs("p",{className:"text-gray-600",children:["Type: ",u.type]}),u.location&&r.jsxs("p",{className:"text-gray-600",children:[" ",u.location]}),u.notes&&r.jsx("div",{className:"mt-2 p-2 bg-blue-50 rounded",children:r.jsx("p",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:u.notes})})]})]},p))})]}),i.service_history&&i.service_history.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-2",children:[" Historique de Service (",i.service_history.length,")"]}),r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.service_history.map((u,p)=>r.jsx("div",{className:"bg-blue-50 p-3 rounded border-l-4 border-blue-400",children:r.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:u})},p))})]}),i.upcoming_appointments&&i.upcoming_appointments.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-2",children:[" Prochains Rendez-vous (",i.upcoming_appointments.length,")"]}),r.jsx("div",{className:"space-y-2",children:i.upcoming_appointments.map((u,p)=>r.jsxs("div",{className:"bg-green-50 p-3 rounded border-l-4 border-green-400",children:[r.jsxs("p",{className:"font-medium",children:[u.date,"  ",u.time]}),u.title&&r.jsx("p",{className:"text-sm text-gray-600",children:u.title}),u.description&&r.jsx("p",{className:"text-sm text-gray-600",children:u.description}),u.assigned_to&&r.jsxs("p",{className:"text-sm",children:["Technicien: ",u.assigned_to]})]},p))})]})]})]})]})})}function Zm({content:e,entities:t=[]}){const[n,s]=j.useState(null);if(!t||t.length===0)return r.jsx("div",{className:"whitespace-pre-wrap",children:e});let l=e;t.forEach(i=>{const o=i.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),u=new RegExp(`\\*\\*${o}\\*\\*`,"g");l=l.replace(u,`<a href="#" data-client-id="${i.id}" class="text-blue-600 hover:text-blue-800 font-bold underline cursor-pointer">${i.name}</a>`)});const a=i=>{i.preventDefault();const o=i.target.getAttribute("data-client-id");o&&s(o)};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:l},onClick:a}),n&&r.jsx(Xm,{clientId:n,onClose:()=>s(null)})]})}const ef="https://assistant-gazelle-v5-api.onrender.com";function tf({currentUser:e,role:t="admin",compact:n=!1,onBackToDashboard:s}){const[l,a]=j.useState(!1);j.useEffect(()=>{const c=()=>{a(window.innerWidth<768)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const[i,o]=j.useState(!1),[u,p]=j.useState([]),[v,y]=j.useState(""),[m,_]=j.useState(!1),h=j.useRef(null);j.useEffect(()=>{var c;(c=h.current)==null||c.scrollIntoView({behavior:"smooth"})},[u]);const w=()=>{const c={admin:" Bonjour Allan ! Je peux vous aider avec les stats, les imports, les recherches de clients, etc.",nick:" Salut Nick ! Je peux t'aider avec tes tournes, tes rendez-vous et ton inventaire.",louise:" Bonjour Louise ! Je peux t'aider avec les rendez-vous, les recherches de clients et les stats.",jeanphilippe:" Salut Jean-Philippe ! Je peux t'aider avec tes rendez-vous, les pianos et ton stock."};return c[t]||c.admin},C=()=>{const c={admin:[{text:".aide",description:"Voir toutes les commandes"},{text:".mes rv",description:"Mes prochains rendez-vous"},{text:".stats",description:"Statistiques du systme"},{text:".cherche Yamaha",description:"Chercher un client/piano"}],nick:[{text:".mes rv",description:"Mes prochains rendez-vous"},{text:".prochaines tournes",description:"Mes tournes  venir"},{text:".stock cordes",description:"Stock de cordes disponible"},{text:".aide",description:"Voir toutes les commandes"}],louise:[{text:".rv demain",description:"Rendez-vous de demain"},{text:".cherche client",description:"Chercher un client"},{text:".stats mois",description:"Stats du mois"},{text:".aide",description:"Voir toutes les commandes"}],jeanphilippe:[{text:".mes rv",description:"Mes prochains rendez-vous"},{text:".piano [numro]",description:"Infos d'un piano"},{text:".stock marteaux",description:"Stock de marteaux"},{text:".aide",description:"Voir toutes les commandes"}]};return c[t]||c.admin},d=async(c=v)=>{var S;if(!c.trim())return;const f={role:"user",content:c};p(b=>[...b,f]),y(""),_(!0);try{const b=await fetch(`${ef}/assistant/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:c,user_id:(e==null?void 0:e.email)||"anonymous"})});if(!b.ok)throw new Error(`HTTP ${b.status}`);const E=await b.json(),T={role:"assistant",content:E.answer||"Dsol, je n'ai pas pu traiter votre demande.",metadata:{query_type:E.query_type,confidence:E.confidence,clickable_entities:((S=E.structured_data)==null?void 0:S.clickable_entities)||[]},structured_data:E.structured_data||null};p(I=>[...I,T])}catch(b){console.error("Erreur assistant:",b),p(E=>[...E,{role:"assistant",content:` Erreur: ${b.message}. Vrifiez que l'API est dmarre.`,error:!0}])}finally{_(!1)}};return i?r.jsxs("div",{className:`fixed ${l?"inset-0 w-full h-full rounded-none":"bottom-6 right-6 w-96 rounded-lg"} bg-white shadow-2xl border border-gray-200 z-50 flex flex-col`,style:l?{}:{height:n?"400px":"600px"},children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-t-lg flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[s&&r.jsx("button",{onClick:s,className:"text-white/80 hover:text-white mr-2 md:hidden",title:"Retour au dashboard",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),r.jsx("h3",{className:"font-semibold",children:"Assistant Gazelle"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>p([]),className:"text-white/80 hover:text-white text-sm",title:"Effacer l'historique",children:""}),r.jsx("button",{onClick:()=>o(!1),className:"text-white/80 hover:text-white",title:"Fermer",children:""})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:[u.map((c,f)=>{var S,b;return r.jsx("div",{className:`flex ${c.role==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${c.role==="user"?"bg-blue-600 text-white":c.error?"bg-red-100 text-red-800 border border-red-300":"bg-white border border-gray-200 text-gray-800"}`,children:[c.role==="assistant"&&((S=c.metadata)!=null&&S.clickable_entities)&&c.metadata.clickable_entities.length>0?r.jsx(Zm,{content:c.content,entities:c.metadata.clickable_entities}):r.jsx("div",{className:"text-sm whitespace-pre-wrap",children:c.content}),((b=c.structured_data)==null?void 0:b.appointments)&&r.jsx("div",{className:"mt-3 space-y-2",children:c.structured_data.appointments.map((E,T)=>r.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-200 hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>{E.client_external_id&&d(`cherche client ${E.client_external_id}`)},title:E.client_external_id?"Cliquer pour voir les dtails du client":"",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-800",children:E.client_name}),E.location&&r.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["(",E.location,")"]})]}),r.jsx("div",{className:"text-xs text-gray-400",children:E.appointment_time})]}),E.description&&r.jsx("div",{className:"text-xs text-gray-600 mt-1",children:E.description})]},T))}),c.metadata&&r.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 text-xs text-gray-500",children:[r.jsxs("div",{children:["Type: ",c.metadata.query_type]}),c.metadata.confidence&&r.jsxs("div",{children:["Confiance: ",(c.metadata.confidence*100).toFixed(0),"%"]})]})]})},f)}),m&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),r.jsx("span",{className:"text-sm",children:"Rflexion en cours..."})]})})}),r.jsx("div",{ref:h})]}),u.length<=1&&r.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 bg-gray-50",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Suggestions :"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:C().map((c,f)=>r.jsx("button",{onClick:()=>d(c.text),className:"px-3 py-1 text-xs bg-white border border-gray-300 rounded-full hover:bg-blue-50 hover:border-blue-300 transition-colors",title:c.description,children:c.text},f))})]}),r.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white rounded-b-lg",children:[r.jsxs("form",{onSubmit:c=>{c.preventDefault(),d()},className:"flex gap-2",children:[r.jsx("input",{type:"text",value:v,onChange:c=>y(c.target.value),placeholder:"Posez votre question...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:m}),r.jsx("button",{type:"submit",disabled:m||!v.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:"Envoyer"})]}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500 text-center",children:["Tapez ",r.jsx("code",{className:"bg-gray-100 px-1 rounded",children:".aide"})," pour voir les commandes"]})]})]}):r.jsxs("button",{onClick:()=>{o(!0),u.length===0&&p([{role:"assistant",content:w()}])},className:"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all hover:scale-110 z-50",title:"Ouvrir l'assistant",children:[r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:"?"})]})}function nf({show:e}){return e?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"festive-tree","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 180 260",role:"presentation",children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"treeGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#1c7c54"}),r.jsx("stop",{offset:"100%",stopColor:"#0f5a3d"})]}),r.jsxs("linearGradient",{id:"trunkGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#8b5a2b"}),r.jsx("stop",{offset:"100%",stopColor:"#5c3b1a"})]})]}),r.jsx("polygon",{points:"90,10 20,110 160,110",fill:"#e0b31a"}),r.jsx("polygon",{points:"90,40 25,140 155,140",fill:"url(#treeGrad)"}),r.jsx("polygon",{points:"90,90 30,190 150,190",fill:"url(#treeGrad)"}),r.jsx("polygon",{points:"90,140 40,230 140,230",fill:"url(#treeGrad)"}),r.jsx("rect",{x:"75",y:"220",width:"30",height:"30",rx:"4",fill:"url(#trunkGrad)"}),r.jsx("path",{d:"M35 140 C70 150, 110 150, 145 135",stroke:"#f6c453",strokeWidth:"6",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M40 175 C80 188, 105 188, 140 172",stroke:"#f6c453",strokeWidth:"6",fill:"none",strokeLinecap:"round"}),[[60,120,"#e63946"],[120,125,"#3c6e71"],[70,165,"#e63946"],[110,170,"#f4a261"],[90,200,"#3c6e71"]].map((t,n)=>r.jsx("circle",{cx:t[0],cy:t[1],r:"8",fill:t[2],stroke:"white",strokeWidth:"2"},n)),r.jsx("polygon",{points:"90,18 96,34 114,34 100,44 106,60 90,50 74,60 80,44 66,34 84,34",fill:"#ffd166"})]})}),r.jsx("div",{className:"festive-sleigh","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 260 140",role:"presentation",children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"sledBody",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[r.jsx("stop",{offset:"0%",stopColor:"#b82030"}),r.jsx("stop",{offset:"100%",stopColor:"#e63946"})]})}),r.jsx("path",{d:"M30 90 C60 110, 140 110, 190 90 L210 90 C220 90, 225 95, 225 105 C225 120, 210 125, 195 122 L70 122 C50 122, 35 112, 30 100 Z",fill:"url(#sledBody)",stroke:"#5a0f1a",strokeWidth:"4"}),r.jsx("rect",{x:"55",y:"65",width:"90",height:"30",rx:"10",fill:"#ffd166",stroke:"#c68a12",strokeWidth:"3"}),r.jsx("circle",{cx:"80",cy:"118",r:"8",fill:"#f6c453"}),r.jsx("circle",{cx:"180",cy:"118",r:"8",fill:"#f6c453"}),r.jsx("path",{d:"M40 115 C60 135, 140 135, 220 115",stroke:"#5a0f1a",strokeWidth:"6",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M200 70 C220 65, 230 55, 235 40",stroke:"#5a0f1a",strokeWidth:"6",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M210 65 C230 60, 238 52, 242 40",stroke:"#5a0f1a",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]})})]}):null}function rf(){var _,h,w;const[e,t]=j.useState(null),[n,s]=j.useState("dashboard"),[l,a]=j.useState(null),[i,o]=j.useState(()=>{const C=localStorage.getItem("festiveTheme");return C!==null?C==="true":!0});j.useEffect(()=>{const C=localStorage.getItem("currentUser");if(C)try{t(JSON.parse(C))}catch{localStorage.removeItem("currentUser")}},[]),j.useEffect(()=>{localStorage.setItem("festiveTheme",i?"true":"false");const C=document.body;i?C.classList.add("festive"):C.classList.remove("festive")},[i]);const u=l||Fm(e==null?void 0:e.email),p=l?{...e,email:((_=Xt[l])==null?void 0:_.email)||(e==null?void 0:e.email),name:((h=Xt[l])==null?void 0:h.name.split(" ")[0])||(e==null?void 0:e.name),role:l}:e,v=C=>{t(C)},y=()=>{localStorage.removeItem("currentUser"),t(null),a(null)};if(!e)return r.jsx(Mm,{onLogin:v});const m=()=>{switch(u){case"nick":return n==="place-des-arts"?r.jsx(qo,{currentUser:p}):r.jsx(Wl,{currentUser:p});case"louise":return r.jsx(Gm,{currentUser:p});case"jeanphilippe":return r.jsx(Wl,{currentUser:p});case"admin":default:return n==="dashboard"?r.jsx(Bm,{currentUser:p}):n==="notifications"?r.jsx(Wm,{currentUser:p}):n==="alertes-rv"?r.jsx(Hm,{currentUser:p}):n==="inventaire"?r.jsx(Wl,{currentUser:p}):n==="tournees"?r.jsx(Qm,{currentUser:p}):n==="place-des-arts"?r.jsx(qo,{currentUser:p}):n==="calculateur-frais"?r.jsxs("div",{className:"space-y-8",children:[r.jsx(ad,{}),r.jsx("div",{className:"border-t border-gray-200 pt-8",children:r.jsx(id,{})})]}):r.jsx($i,{currentUser:p})}};return r.jsxs("div",{className:`App ${i?"festive":""}`,children:[r.jsx(nf,{show:i}),r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Assistant Gazelle V5"})]}),(u==="admin"||u==="nick"||u==="louise"||u==="jeanphilippe")&&r.jsx("nav",{className:"flex gap-2",children:u==="nick"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>s("inventaire"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="inventaire"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Inventaire"}),r.jsx("button",{onClick:()=>s("place-des-arts"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="place-des-arts"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Place des Arts"})]}):u==="jeanphilippe"?r.jsx(r.Fragment,{children:r.jsx("button",{onClick:()=>s("inventaire"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="inventaire"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Inventaire"})}):r.jsxs(r.Fragment,{children:[u==="admin"&&r.jsx("button",{onClick:()=>s("dashboard"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="dashboard"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Dashboard"}),u==="admin"&&r.jsx("button",{onClick:()=>s("notifications"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="notifications"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Notifications"}),u==="admin"&&r.jsx("button",{onClick:()=>s("pianos"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="pianos"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Pianos"}),u==="admin"&&r.jsx("button",{onClick:()=>s("alertes-rv"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="alertes-rv"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Alertes RV"}),r.jsx("button",{onClick:()=>s("inventaire"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="inventaire"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Inventaire"}),(u==="admin"||u==="louise")&&r.jsx("button",{onClick:()=>s("place-des-arts"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="place-des-arts"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Place des Arts"}),(u==="admin"||u==="louise")&&r.jsx("button",{onClick:()=>s("tournees"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="tournees"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Tournes"}),(u==="admin"||u==="louise")&&r.jsx("button",{onClick:()=>s("calculateur-frais"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${n==="calculateur-frais"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:" Calculateur"})]})}),i&&r.jsx("span",{className:"hidden sm:inline-flex items-center text-xs font-medium px-2 py-1 rounded-full bg-red-50 text-red-700 border border-red-100",children:"Semaine des ftes"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[(e==null?void 0:e.email)==="asutton@piano-tek.com"&&r.jsxs("select",{value:l||u,onChange:C=>a(C.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded bg-yellow-50",title:"Slecteur de rle (temporaire pour test)",children:[r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"nick",children:"Nick"}),r.jsx("option",{value:"louise",children:"Louise"}),r.jsx("option",{value:"jeanphilippe",children:"Jean-Philippe"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm font-medium text-gray-800",children:(e==null?void 0:e.name)||"Test User"}),r.jsx("div",{className:"text-xs text-gray-500",children:((w=Xt[u])==null?void 0:w.name)||"Administrateur"})]}),r.jsx("button",{onClick:()=>o(C=>!C),className:`px-3 py-2 text-sm rounded-lg border transition-colors ${i?"bg-green-50 text-green-800 border-green-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,title:"Activer/dsactiver le thme des ftes",children:i?"Thme ftes : ON":"Thme ftes"}),r.jsx("button",{onClick:y,className:"px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"Dconnexion"})]})]})}),m(),r.jsx(tf,{currentUser:p,role:u,onBackToDashboard:n==="assistant"?()=>s("dashboard"):void 0})]})}ql.createRoot(document.getElementById("root")).render(r.jsx(Ha.StrictMode,{children:r.jsx(rf,{})}));
