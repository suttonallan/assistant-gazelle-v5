<!DOCTYPE html>
<html>
<head>
    <title>Debug Tourn√©es</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        pre { background: #f9f9f9; padding: 10px; border-radius: 4px; overflow-x: auto; white-space: pre-wrap; }
        button { padding: 10px 20px; margin: 10px 5px; cursor: pointer; }
        .tournee { border: 2px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .tournee.selected { border-color: #4CAF50; background: #e8f5e9; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Debug Tourn√©es LocalStorage</h1>

        <button onclick="loadData()">üîÑ Recharger</button>
        <button onclick="clearAll()">üóëÔ∏è Tout effacer</button>

        <h2>√âtat actuel:</h2>
        <div id="output"></div>
    </div>

    <script>
        function loadData() {
            const tournees = JSON.parse(localStorage.getItem('tournees_accords') || '[]');
            const output = document.getElementById('output');

            if (tournees.length === 0) {
                output.innerHTML = '<p>Aucune tourn√©e trouv√©e</p>';
                return;
            }

            let html = `<p><strong>Nombre de tourn√©es:</strong> ${tournees.length}</p>`;

            tournees.forEach((tournee, idx) => {
                html += `
                    <div class="tournee">
                        <h3>Tourn√©e #${idx + 1}: ${tournee.nom}</h3>
                        <p><strong>ID:</strong> ${tournee.id}</p>
                        <p><strong>Date:</strong> ${tournee.date_debut}</p>
                        <p><strong>√âtablissement:</strong> ${tournee.etablissement}</p>
                        <p><strong>Status:</strong> ${tournee.status}</p>
                        <p><strong>Nombre de pianos:</strong> ${(tournee.piano_ids || []).length}</p>
                        <details>
                            <summary>Piano IDs (${(tournee.piano_ids || []).length})</summary>
                            <pre>${JSON.stringify(tournee.piano_ids || [], null, 2)}</pre>
                        </details>
                        <details>
                            <summary>Donn√©es compl√®tes</summary>
                            <pre>${JSON.stringify(tournee, null, 2)}</pre>
                        </details>
                    </div>
                `;
            });

            output.innerHTML = html;
        }

        function clearAll() {
            if (!confirm('‚ö†Ô∏è Supprimer toutes les tourn√©es ?')) return;
            localStorage.removeItem('tournees_accords');
            loadData();
        }

        // Charger au d√©marrage
        window.addEventListener('load', loadData);
    </script>
</body>
</html>
